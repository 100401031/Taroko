(function(e){function t(t){for(var a,n,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],a=!0,r=1;r<o.length;r++){var l=o[r];0!==i[l]&&(a=!1)}a&&(s.splice(t--,1),e=n(n.s=o[0]))}return e}var a={},i={index:0},s=[];function n(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=a,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0578":function(e,t,o){},"0c11":function(e,t,o){"use strict";var a=o("cc92"),i=o.n(a);i.a},"0c52":function(e,t,o){},"0de0":function(e,t,o){"use strict";var a=o("63d9"),i=o.n(a);i.a},"0f28":function(e,t,o){"use strict";var a=o("db7f"),i=o.n(a);i.a},"11fc":function(e,t,o){"use strict";var a=o("a9fd"),i=o.n(a);i.a},"1acd":function(e,t,o){},"1b40":function(e,t,o){"use strict";var a=o("3685"),i=o.n(a);i.a},"241b":function(e,t,o){"use strict";var a=o("b518"),i=o.n(a);i.a},"2c3d":function(e,t,o){},"2def":function(e,t,o){},3083:function(e,t,o){"use strict";var a=o("550b"),i=o.n(a);i.a},3224:function(e,t,o){"use strict";var a=o("9c21"),i=o.n(a);i.a},3685:function(e,t,o){},"378e":function(e,t,o){},3895:function(e,t,o){"use strict";var a=o("bffc"),i=o.n(a);i.a},"3add":function(e,t,o){},"40a5":function(e,t,o){},4247:function(e,t,o){"use strict";var a=o("445a"),i=o.n(a);i.a},"445a":function(e,t,o){},"4d67":function(e,t,o){"use strict";var a=o("ee80"),i=o.n(a);i.a},"4fcb":function(e,t,o){},"502e":function(e,t,o){},"511d":function(e,t,o){"use strict";var a=o("54a4"),i=o.n(a);i.a},"54a4":function(e,t,o){},"550b":function(e,t,o){},"563d":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("4de4"),o("4160"),o("ac1f"),o("5319"),o("1276"),o("498a"),o("159b");var a=o("3835"),i=(o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("2b0e")),s=o("2f62"),n=o("bc3a"),r=o.n(n),l=o("a7fe"),c=o.n(l),u=(o("4989"),o("5c96")),d=o.n(u),p=o("5530"),m=o("a925"),h=o("4897"),f=o.n(h),g=o("c87b"),v=o.n(g),b=Object(p["a"])(Object(p["a"])({},v.a),{},{pageTitle:"Taroko - 旅途將從這裡展開",homePage:{welcomeTitle:"充滿意義的旅途將從這裡展開",carousel:{carouselTitle:"世界正為你綻放",joinWorldTitle:"參與其中",joinWorldDescription:"讓旅遊達人帶你一同參與世界大小事，體驗不同文化的身心陶冶。",onlineExpTitle:"線上體驗",onlineExpDescription:"不需出門，你也可以無遠弗屆地體驗各式各樣的事物。",featuredContentTitle:"精選內容",featuredContentDescription:"讓旅遊達人告訴你如何將旅行變得更加精彩可期。"},searchBar:{location_long:"你要去哪裡？",location_short:"位置",location:"位置",date:"住宿日期",addDates:"選擇日期",addDates_short:"日期",checkInDates:"入住日期",checkOutDates:"退房日期",guests:"房客人數",peopleNum:"新增人數",peopleNum_short:"人數",search:"搜尋",tipTooltip:"請按下Enter或點此查詢",peopleUnit:"位",peopleUnits:"位",customArea:"自訂範圍"}},mainMenu:{myWishList:"心願單",searchStay:"搜尋住宿",manageListing:"管理房源",logIn:"登入",logOut:"登出",language:"切換語言",langDialogTitle:"請選擇語言"},map:{searchByArea:"搜尋此範圍",yourLocation:"你的位置"},mapList:{myWishList:"我的心願單",emptyWishList:"心願單內尚未加入的房源",staysByArea:"自訂範圍內的房源",staysNumber:"間房源",roomTypesNumber:"共 {num} 種房型",eachNight:{text:"每晚",before:"true"},sortDescription:"位於{location}的{roomCategory}",guestUnit:"{num} 位房客",guestsUnit:"{num} 位房客",bedNumberUnit:"{num} 張床",bedsNumberUnit:"{num} 張床",noMatchStay:"{location}沒有符合條件的房源",designatedArea:"自訂範圍內",searchRange:"{location}的房源"},popconfirm:{deleteFromWishList:"確定將此房源從心願單移除嗎？",confirm:"確定",cancel:"取消"},stayCategory:{hotel:"飯店",bnb:"民宿",hostel:"青年旅舍"},roomTypeCategory:{bunk:"床位",room:"房間",entireApartment:"樓層",entireBuilding:"獨棟空間"},stayPage:{back:"返回",roomType:"房型",stayIntro:"{stayCategory}簡介",facilityService:"設施及服務",stayFacility:"房源設施",basicFacilities:"一般設施",bedroomFacilities:"臥室設施",bathroomFacilities:"衛浴設施",searchResults:"符合搜尋",allRooms:"全部房型",viewPanoramas:"全景相片",viewPhotos:"瀏覽相片",guestUnit:"{num} 位房客",guestsUnit:"{num} 位房客",priceBefore:"每晚",priceAfter:"",reserve:"預訂",bedTypeTitle:"床型",service:"貴賓服務",foodAndDrink:"餐飲設施",entertainment:"休閒娛樂設施",businessAndLeisure:"商務與生活設施"},bedType:{single:"單人床",double:"雙人床",king:"加大雙人床",floorMattress:"地板床墊",crib:"嬰兒床"},reserveModal:{reserveStay:"預訂旅宿",reserve:"預訂",selectDate:"選取日期",checkIn:"入住日期",checkOut:"退房日期",roomNum:"預訂房數",roomNumUnit:"間",night:"晚",total:"總計",reservationComplete:"預訂完成",checkAvailableDate:"查看可訂日期"},footer:{about:"關於",tarokoCulture:"Taroko",newsRoom:"新聞中心",partner:"成為夥伴",hostProperty:"出租房源",businessPartner:"商業合作",community:"社群交流",article:"旅遊文章",activity:"團體活動",support:"用戶支援",helpCenter:"使用指南"},roomTypeCard:{showAll:"顯示全部",collapse:"收合"},loginModal:{email:"信箱帳號",password:"密碼",login:"登入"},stayServiceAndFacilities:{wholeDayCounter:{icon:"fas fa-user-clock",label:"24小時櫃檯"},selfCheck:{icon:"el-icon-check",label:"自助入住"},pickUp:{icon:"fas fa-bus-alt",label:"接送服務"},luggageDeposit:{icon:"fas fa-luggage-cart",label:"行李寄放"},earlyCheckIn:{icon:"el-icon-finished",label:"提早入住"},lostPropertyStorage:{icon:"fas fa-toolbox",label:"遺失物保管"},parkLot:{icon:"el-icon-house",label:"停車空間"},valetParking:{icon:"fas fa-car-side",label:"代客泊車"},restaurant:{icon:"fas fa-utensils",label:"餐廳"},bar:{icon:"fas fa-wine-glass-alt",label:"酒吧"},kitchen:{icon:"fas fa-utensils",label:"自助廚房"},readingRoom:{icon:"fas fa-book-open",label:"閱讀室"},banquetRoom:{icon:"fas fa-cocktail",label:"宴客廳"},audiovisualHall:{icon:"el-icon-video-camera-solid",label:"影音廳"},swimmingPoor:{icon:"fas fa-swimming-pool",label:"游泳池"},publicBathhouse:{icon:"fas fa-water",label:"公共澡堂"},meetingRoom:{icon:"fas fa-chalkboard-teacher",label:"會議空間"},publicComputers:{icon:"fas fa-laptop-house",label:"公用電腦"},wholeDayWasher:{icon:"fas fa-tint",label:"24小時洗衣機"},wholeDayDryer:{icon:"fas fa-tshirt",label:"24小時烘衣機"},ironingFacility:{icon:"fas fa-weight-hanging",label:"熨燙衣物設備"},convenienceStore:{icon:"fas fa-store-alt",label:"24小時商店"}},facilitiesSheet:{balcony:{icon:"el-icon-house",label:"陽台"},bathTub:{icon:"fas fa-bath",label:"浴缸"},bathrobe:{icon:"fas fa-tshirt",label:"浴衣"},desk:{icon:"el-icon-house",label:"書桌"},dryWetDepart:{icon:"fas fa-shower",label:"乾濕分離"},electronicLock:{icon:"el-icon-house",label:"電子鎖"},freeToilet:{icon:"fas fa-toilet",label:"免治馬桶"},freeWifi:{icon:"fas fa-wifi",label:"免費Wi-Fi"},fridge:{icon:"el-icon-refrigerator",label:"冰箱"},independentBathroom:{icon:"fas fa-bath",label:"獨立衛浴"},kitchen:{icon:"fas fa-utensils",label:"廚房"},lamp:{icon:"el-icon-table-lamp",label:"檯燈"},miniBar:{icon:"el-icon-cold-drink",label:"迷你吧台"},mirror:{icon:"el-icon-house",label:"鏡子"},parlor:{icon:"el-icon-house",label:"客廳"},safeBox:{icon:"fas fa-wallet",label:"保險箱"},bodyWash:{icon:"fas fa-pump-soap",label:"沐浴乳"},shampoo:{icon:"fas fa-pump-soap",label:"洗髮精"},sofa:{icon:"fas fa-couch",label:"沙發"},smokingRoom:{icon:"el-icon-smoking",label:"吸菸房"},toothbrush:{icon:"el-icon-house",label:"牙刷"},toothpaste:{icon:"el-icon-house",label:"牙膏"},tv:{icon:"el-icon-monitor",label:"電視"},window:{icon:"el-icon-house",label:"對外窗"}}}),y=o("b2d6"),_=o.n(y),w=Object(p["a"])(Object(p["a"])({},_.a),{},{pageTitle:"Taroko - Where Inspiring Adventure Begins.",homePage:{welcomeTitle:"Where Inspiring Adventure Begins.",carousel:{carouselTitle:"The world is flourishing",joinWorldTitle:"Join the World",joinWorldDescription:"Let hosts lead you to a deep culture journey.",onlineExpTitle:"Online Experiences",onlineExpDescription:"You can experience anything you want at a distance.",featuredContentTitle:"Featured Contents",featuredContentDescription:"Let your journey become more colorful by other people's experience."},searchBar:{location_long:"Where are you going?",location_short:"Location",location:"Location",date:"Date",addDates:"Add dates",addDates_short:"Dates",checkInDates:"Check in",checkOutDates:"Check out",guests:"Guests",peopleNum:"Add guests",peopleNum_short:"Guests",search:"Search",tipTooltip:"Press 'Enter' or Click this button",peopleUnit:" guest",peopleUnits:" guests",customArea:"Designated"}},mainMenu:{myWishList:"Wishlist",searchStay:"Search stays",manageListing:"Manage listings",logIn:"Log in",logOut:"Log out",language:"Language",langDialogTitle:"Choose a language"},map:{searchByArea:"Search this area",yourLocation:"Your location"},mapList:{myWishList:"My wishlist",emptyWishList:"Your wishlist is empty.",staysByArea:"Stays in this area",staysNumber:" stays",roomTypesNumber:"with {num} room types",eachNight:{text:"night",before:"false"},sortDescription:"{roomCategory} in {location}",guestUnit:"{num} guest",guestsUnit:"{num} guests",bedNumberUnit:"{num} bed",bedsNumberUnit:"{num} beds",noMatchStay:"There is no matching stay in {location}.",designatedArea:"designated area",searchRange:"Stays in {location}"},popconfirm:{deleteFromWishList:"Are you sure to delete this stay from wishlist?",confirm:"Yes",cancel:"Cancel"},stayCategory:{hotel:"Hotel",bnb:"B&B",hostel:"Hostel"},roomTypeCategory:{bunk:"Bunk",room:"Room",entireApartment:"Entire Apartment",entireBuilding:"Entire Building"},bedType:{single:"single bed",double:"double bed",king:"king bed",floorMattress:"floor mattress",crib:"crib"},reserveModal:{reserveStay:"Reserve Your Stay",reserve:"Reserve",selectDate:"Select date",checkIn:"Check-in",checkOut:"Check-out",roomNum:"Room Number",roomNumUnit:"unit",night:"Night",total:"Total",reservationComplete:"Reservation Complete",checkAvailableDate:"Check Available Date"},footer:{about:"ABOUT",partner:"JOIN US",tarokoCulture:"Taroko",newsRoom:"News room",hostProperty:"Host your property",businessPartner:"business partner",community:"COMMUNITY",article:" Travel articles",activity:"Activities",support:"SUPPORT",helpCenter:"Help center"},roomTypeCard:{showAll:"Show all",collapse:"Collapse"},loginModal:{email:"Email Address",password:"Password",login:"Login"},facilitiesSheet:{balcony:{icon:"el-icon-house",label:"Balcony"},bathTub:{icon:"fas fa-bath",label:"Bathtub"},bathrobe:{icon:"fas fa-tshirt",label:"Bathrobe"},desk:{icon:"el-icon-house",label:"Desk"},dryWetDepart:{icon:"fas fa-shower",label:"Separate bath and toilet"},electronicLock:{icon:"el-icon-house",label:"Electronic lock"},freeToilet:{icon:"fas fa-toilet",label:"Freet toilet"},freeWifi:{icon:"fas fa-wifi",label:"Free Wi-Fi"},fridge:{icon:"el-icon-refrigerator",label:"Fridge"},independentBathroom:{icon:"fas fa-bath",label:"Independent bathroom"},kitchen:{icon:"fas fa-utensils",label:"Kitchen"},lamp:{icon:"el-icon-table-lamp",label:"Lamp"},miniBar:{icon:"el-icon-cold-drink",label:"Mini bar"},mirror:{icon:"el-icon-house",label:"Mirror"},parlor:{icon:"el-icon-house",label:"Parlor"},safeBox:{icon:"fas fa-wallet",label:"Safe box"},bodyWash:{icon:"fas fa-pump-soap",label:"Body wash"},shampoo:{icon:"fas fa-pump-soap",label:"Shampoo"},sofa:{icon:"fas fa-couch",label:"Sofa"},smokingRoom:{icon:"el-icon-smoking",label:"Smoking room"},toothbrush:{icon:"el-icon-house",label:"Toothbrush"},toothpaste:{icon:"el-icon-house",label:"Toothpaste"},tv:{icon:"el-icon-monitor",label:"TV"},window:{icon:"el-icon-house",label:"Windows"}},stayPage:{back:"Back to listings",roomType:"Rooms",stayIntro:"About this {stayCategory}",facilityService:"Service and Facilities",stayFacility:"Common",basicFacilities:"General",bedroomFacilities:"Bedroom",bathroomFacilities:"Bathroom",searchResults:"Search results",allRooms:"All rooms",viewPanoramas:"Panoramas",viewPhotos:"Photos",guestUnit:"{num} guest",guestsUnit:"{num} guests",priceBefore:"",priceAfter:"/ night",reserve:"Reserve",bedTypeTitle:"Bed type",service:"Guests Service",foodAndDrink:"Food and Drink",entertainment:"Entertainment",businessAndLeisure:"Business and Leisure"},stayServiceAndFacilities:{wholeDayCounter:{icon:"fas fa-user-clock",label:"24HR counter"},selfCheck:{icon:"el-icon-check",label:"Self check-in"},pickUp:{icon:"fas fa-bus-alt",label:"Pick up"},luggageDeposit:{icon:"fas fa-luggage-cart",label:"Luggage deposit"},earlyCheckIn:{icon:"el-icon-finished",label:"Early check-in"},lostPropertyStorage:{icon:"fas fa-toolbox",label:"Lost property procedure"},parkLot:{icon:"el-icon-house",label:"Parking lots"},valetParking:{icon:"fas fa-car-side",label:"Valet parking"},restaurant:{icon:"fas fa-utensils",label:"Restaurant"},bar:{icon:"fas fa-wine-glass-alt",label:"Bar"},kitchen:{icon:"fas fa-utensils",label:"Kitchen"},readingRoom:{icon:"fas fa-book-open",label:"Reading room"},banquetRoom:{icon:"fas fa-cocktail",label:"Banquet room"},audiovisualHall:{icon:"el-icon-video-camera-solid",label:"Audio-visual room"},swimmingPoor:{icon:"fas fa-swimming-pool",label:"Swimming poor"},publicBathhouse:{icon:"fas fa-water",label:"Public bathhouse"},meetingRoom:{icon:"fas fa-chalkboard-teacher",label:"Meeting room"},publicComputers:{icon:"fas fa-laptop-house",label:"Public computers"},wholeDayWasher:{icon:"fas fa-tint",label:"24HR washer"},wholeDayDryer:{icon:"fas fa-tshirt",label:"24HR cloth dryer"},ironingFacility:{icon:"fas fa-weight-hanging",label:"Ironing facilities"},convenienceStore:{icon:"fas fa-store-alt",label:"Convenience store"}}});i["default"].use(m["a"]);var S={};S=Object(p["a"])(Object(p["a"])({},S),{},{"zh-TW":b,en:w});var C=localStorage.getItem("language")||"zh-TW",P=new m["a"]({locale:C,messages:S});f.a.i18n((function(e,t){return P.t(e,t)}));var T,$,L=P,k=o("9062"),O=o.n(k),M=o("8a5d"),I=(o("e40d"),o("859b")),R=(o("d355"),o("7bb1")),x=o("4c93"),E=o("60d4"),D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view"),e.loginModalVisible?o("LoginModal"):e._e(),o("LoadingOverlay",{attrs:{active:e.isLoading}})],1)},A=[],B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{staticClass:"login-modal",on:{close:e.handleClose},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(e._s(e.$t("loginModal.login")))]},proxy:!0},{key:"body",fn:function(){return[o("form",{staticClass:"login-form",on:{submit:function(t){return t.preventDefault(),e.signIn(t)}}},[o("div",{staticClass:"input-wrapper",on:{click:function(t){return e.handleInputClick("emailInput")}}},[o("label",{attrs:{for:"inputEmail"}},[o("div",{staticClass:"label-text",class:{shrink:e.emailInputFocus||e.user.username}},[e._v(" "+e._s(e.$t("loginModal.email"))+" ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],ref:"emailInput",staticClass:"inner-input",attrs:{type:"email",id:"inputEmail",required:""},domProps:{value:e.user.username},on:{focus:function(t){e.emailInputFocus=!0},blur:function(t){e.emailInputFocus=!1},input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})])]),o("div",{staticClass:"input-wrapper",on:{click:function(t){return e.handleInputClick("passwordInput")}}},[o("label",{attrs:{for:"inputPassword"}},[o("div",{staticClass:"label-text",class:{shrink:e.passwordInputFocus||e.user.password}},[e._v(" "+e._s(e.$t("loginModal.password"))+" ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"passwordInput",staticClass:"inner-input",attrs:{type:"password",id:"inputPassword",required:""},domProps:{value:e.user.password},on:{focus:function(t){e.passwordInputFocus=!0},blur:function(t){e.passwordInputFocus=!1},input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})])]),e.isError?o("div",{staticClass:"login-error"},[e._v("登入失敗")]):e._e(),o("button",{staticClass:"submit-btn",style:{backgroundPosition:"left "+e.btnBgPosition.x+"px top "+e.btnBgPosition.y+"px"},attrs:{disabled:e.loginLoading,type:"submit"},on:{mouseenter:e.handleBtnHover,mousemove:e.handleBtnHover}},[e.loginLoading?e._e():o("span",[e._v(e._s(e.$t("loginModal.login")))]),o("pulse-loader",{attrs:{loading:e.loginLoading,color:"#ffffffee",size:"8px"}})],1)])]},proxy:!0}])})],1)},N=[],j=(o("99af"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("transition",{attrs:{name:"el-fade-in"}},[e.show||!e.animate?o("div",{staticClass:"modal-mask",on:{click:e.handleClose}}):e._e()]),o("transition",{attrs:{name:"el-fade-in"}},[e.show||!e.animate?o("div",{staticClass:"modal-layout",class:{md:!e._windowSize.lg.larger}},[o("button",{staticClass:"close-btn",on:{click:e.handleClose}},[o("i",{staticClass:"el-icon-close"})]),o("header",[e._t("header")],2),o("div",{staticClass:"modal-body"},[e._t("body")],2)]):e._e()])],1)}),V=[],U={props:{visible:{type:Boolean,default:!0},animate:{type:Boolean,default:!0}},data:function(){return{show:!1}},computed:Object(p["a"])({},Object(s["d"])("UIModules",["_windowSize"])),methods:{handleClose:function(){this.$emit("close")}},mounted:function(){this.show=!0}},F=U,H=(o("ba7d"),o("2877")),W=Object(H["a"])(F,j,V,!1,null,"743e6510",null),z=W.exports,q={components:{Modal:z},name:"Login",data:function(){return{user:{username:null,password:null},emailInputFocus:!1,passwordInputFocus:!1,prevOverflow:null,btnBgPosition:{x:null,y:null},loginLoading:!1,isError:!1}},methods:{signIn:function(){var e=this;this.loginLoading=!0;var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),o=this;this.$http.post(t,o.user).then((function(t){if(t.data.success){var a=t.data.token,i=t.data.expired;document.cookie="hexToken=".concat(a,";expires=").concat(i,"; Max-Age=").concat(i,";");var s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");e.$http.defaults.headers.common.Authorization=s,o.$store.commit("AuthModules/UPDATE_USER_AUTH",!0),o.handleClose(),e.isError=!1,o.loginLoading=!1,"manageListings"==o.$route.query.loginPath&&o.$nextTick((function(){o.$router.push({name:"Products"}).catch((function(e){console.log(e,o.$router)}))})),e.$route.query.nextUrl?e.$router.push(e.$route.query.nextUrl):e.$router.push("/admin/products")}else e.isError=!0,o.loginLoading=!1}))},handleInputClick:function(e){this.$refs[e].focus()},handleClose:function(){this.$store.commit("UIModules/SET_LOGIN_MODAL_VISIBLE",!1)},handleBtnHover:function(e){this.btnBgPosition.x=e.offsetX-1.5*e.target.offsetWidth,this.btnBgPosition.y=e.offsetY-1.5*e.target.offsetHeight}},mounted:function(){this.prevOverflow=document.body.style.overflow,document.body.style.overflow="hidden"},beforeDestroy:function(){if(document.body.style.overflow=this.prevOverflow,this.$route.query.loginPath){var e=Object.assign({},this.$route.query);delete e.loginPath,this.$router.replace({query:e})}}},G=q,K=(o("3895"),o("3083"),Object(H["a"])(G,B,N,!1,null,"b4c75e1c",null)),Q=K.exports,Y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("loading",{attrs:{active:e.active},on:{"update:active":function(t){e.active=t}}},[o("template",{slot:"default"},[o("Logo",{staticClass:"logo animate"}),o("pulse-loader",{staticClass:"loading-spinner",attrs:{loading:e.active,color:"#00a69c",size:"10px"}})],1)],2)},J=[],Z=o("ec4e"),X=o.n(Z),ee={components:{Logo:X.a},props:{active:{type:Boolean,default:!1}}},te=ee,oe=(o("8a19"),Object(H["a"])(te,Y,J,!1,null,"2e23cedc",null)),ae=oe.exports,ie={name:"app",components:{LoginModal:Q,LoadingOverlay:ae},watch:{"$route.query.lang":{handler:function(e){e in this.$i18n.messages&&(this._i18n.locale=e,localStorage.setItem("language",e))}}},computed:Object(p["a"])(Object(p["a"])({},Object(s["d"])("UIModules",["loginModalVisible"])),Object(s["c"])(["isLoading"])),created:function(){var e=this;document.title=this.$t("pageTitle"),this.$route.query.lang&&(this._i18n.locale=this.$route.query.lang,localStorage.setItem("language",this.$route.query.lang));var t=this.getCookie("hexToken"),o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t?this.$http.defaults.headers.common.Authorization=o:this.$store.commit("AuthModules/UPDATE_USER_AUTH",!1);var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");this.$http.post(a).then((function(t){t.data.success?(console.log("check login success"),e.$store.commit("AuthModules/UPDATE_USER_AUTH",!0)):(document.cookie="hexToken=; Max-Age=0",document.cookie="hexTokenExpireAt=; Max-Age=0",e.$store.commit("AuthModules/UPDATE_USER_AUTH",!1),e.$route.meta.requiresAuth&&e.$router.push("/"))}))},methods:{onResize:function(){this.$bus.$emit("resize"),this.windowWidth=window.innerWidth,this.$store.commit("UIModules/SET_WINDOW_WIDTH",window.innerWidth)},getCookie:function(e){var t={};return document.cookie.split(";").forEach((function(e){var o=e.split("="),i=Object(a["a"])(o,2),s=i[0],n=i[1];t[s.trim()]=n})),t[e]}},mounted:function(){var e=this;this.$store.commit("UIModules/SET_WINDOW_WIDTH",window.innerWidth),this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))}},se=ie,ne=(o("5c0b"),Object(H["a"])(se,D,A,!1,null,null,null)),re=ne.exports,le=o("8c4f"),ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("LoadingOverlay",{attrs:{active:e.isLoading}}),o("Alert"),o("el-container",[o("el-header",[o("Navbar",{attrs:{stage:"back"}})],1),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-main",{attrs:{role:"main"}},[o("router-view")],1)],1)],1)],1)},ue=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-container"},[a("router-link",{staticStyle:{display:"contents"},attrs:{to:{name:"homePage"}}},[a("span",{staticClass:"logo-wrapper",class:{"logo-wrapper-front":"front"===e.stage,"logo-wrapper-back":"back"===e.stage}},[a("Logo",{staticClass:"logo",class:{animate:e.isLoading}}),"front"!==e.stage||!e._windowSize.md.larger&&e.searchBarVisible?e._e():a("LogoWord",{staticClass:"logo-word"})],1)]),a("div",{staticClass:"strech-container"},["back"===e.stage?a("el-menu",{attrs:{"default-active":e.navActiveIndex,mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"Products"},on:{click:function(t){return e.$router.push({name:"Products"})}}},[a("router-link",{attrs:{to:"/admin/products"}},[e._v("房源")])],1),a("el-menu-item",{attrs:{index:"RoomManagement"},on:{click:function(t){return e.$router.push({name:"RoomManagement"})}}},[a("router-link",{attrs:{to:"/admin/management"}},[e._v("預訂")])],1)],1):e._e(),e.searchBarVisible&&"wishList"!=e.$route.name?[e._windowSize.lg.larger?a("SearchBar"):a("SearchCollapse")]:e._e()],2),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleDropDownCommand}},[a("button",{staticClass:"user-btn"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:o("ba97")}})])]),a("el-dropdown-menu",{staticClass:"dropdown-container",attrs:{slot:"dropdown"},slot:"dropdown"},["wishList"!=e.$route.name?a("el-dropdown-item",{attrs:{command:"wishList"}},[e._v(e._s(e.$t("mainMenu.myWishList")))]):e._e(),"search"!=e.$route.name?a("el-dropdown-item",{attrs:{command:"searchMode"}},[e._v(e._s(e.$t("mainMenu.searchStay")))]):e._e(),e.$route.path.includes("admin")?e._e():a("el-dropdown-item",{attrs:{command:"changeLanguage"}},[e._v(e._s(e.$t("mainMenu.language")))]),e.$route.path.includes("admin")?e._e():a("el-dropdown-item",{attrs:{command:"manageListings"}},[e._v(e._s(e.$t("mainMenu.manageListing")))]),e.userAuth?e._e():a("el-dropdown-item",{attrs:{command:"LogIn"}},[e._v(e._s(e.$t("mainMenu.logIn")))]),e.userAuth?a("el-dropdown-item",{attrs:{command:"LogOut"}},[e._v(e._s(e.$t("mainMenu.logOut")))]):e._e()],1)],1),a("el-dialog",{staticClass:"lang-dialog",attrs:{title:e.$t("mainMenu.langDialogTitle"),visible:e.langDialogVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(t){e.langDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{md:12,sm:24}},[a("el-button",{class:{active:"zh-TW"==e.currentLang},on:{click:function(t){return e.handleChangeLang("zh-TW")}}},[a("span",[e._v("繁體中文")])])],1),a("el-col",{attrs:{md:12,sm:24}},[a("el-button",{class:{active:"en"==e.currentLang},on:{click:function(t){return e.handleChangeLang("en")}}},[a("span",[e._v("English")])])],1)],1)],1)],1)},pe=[],me=(o("b0c0"),o("71ac")),he=o.n(me),fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search-bar-container"},[o("CustomAutocomplete",{ref:"searchRef",staticClass:"search-bar-group",class:{"input-active":e.activeInput,"btn-active":!e.activeInput,"large-search-bar":e.large},attrs:{placeholder:e.large?e._windowSize.md.larger?e.$t("homePage.searchBar.location_long"):e.$t("homePage.searchBar.location_short"):(e._windowSize.lg.larger,e.$t("homePage.searchBar.location_short")),placement:"bottom",noData:e.noData,loading:e.suggestionLoading,"fetch-suggestions":e.querySearchAsync,suggestions:e.suggestions,"popper-append-to-body":!1},on:{blur:e.handleBlur,select:e.handleSelect,input:e.handleInput,KeyEnter:e.handleKeyEnter,"update:loading":function(t){e.suggestionLoading=t},"update:suggestions":function(t){e.suggestions=t}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[e.activeInput?e._e():o("el-button",{staticClass:"input-btn",class:{notFill:!e.searchByMap||"homePage"==e.$route.name},attrs:{slot:"append"},on:{click:function(t){return e.changeInput(!0)}},slot:"append"},[e.large?o("span",{staticClass:"label"},[e._v(e._s(e.$t("homePage.searchBar.location")))]):e._e(),o("span",[e._v(e._s(e.tempSelectLocation?e.tempSelectLocation.value:e.searchBarTitle))])]),o("el-popover",{staticClass:"ppl-popover-wrapper",attrs:{slot:"append",placement:"bottom",width:"400",trigger:"click","popper-class":"ppl-popover"},slot:"append"},[o("div",{staticClass:"input-wrapper"},[o("el-date-picker",{attrs:{type:"daterange",size:"small",align:"center","range-separator":"-","value-format":"yyyy/M/d","start-placeholder":e.$t("homePage.searchBar.checkInDates"),"end-placeholder":e.$t("homePage.searchBar.checkOutDates"),"picker-options":e.datePickerOptions},model:{value:e.computedDate,callback:function(t){e.computedDate=t},expression:"computedDate"}})],1),o("el-button",{staticClass:"ppl-popover-btn",class:{notFill:!e.computedDate},attrs:{slot:"reference"},slot:"reference"},[e.large?o("div",{staticClass:"label"},[e._v(e._s(e.$t("homePage.searchBar.date")))]):e._e(),e._v(" "+e._s(e.displayDate?e.displayDate[0]+" - "+e.displayDate[1]:e.$t("homePage.searchBar.addDates"))+" ")])],1),o("el-popover",{staticClass:"ppl-popover-wrapper",attrs:{slot:"append",placement:"bottom",width:"250",trigger:"click","popper-class":"ppl-popover"},slot:"append"},[o("div",{staticClass:"input-wrapper"},[o("span",{staticClass:"label"},[e._v(e._s(e.$t("homePage.searchBar.peopleNum_short")))]),o("el-input-number",{attrs:{size:"mini",min:0},model:{value:e.pplNum,callback:function(t){e.pplNum=t},expression:"pplNum"}})],1),o("el-button",{staticClass:"ppl-popover-btn",class:{notFill:!e.pplNum},attrs:{slot:"reference"},slot:"reference"},[e.large?o("div",{staticClass:"label"},[e._v(e._s(e.$t("homePage.searchBar.guests")))]):e._e(),e._v(" "+e._s(e.pplNum?e.pplNum+(e.pplNum>1?e.$t("homePage.searchBar.peopleUnits"):e.$t("homePage.searchBar.peopleUnit")):e._windowSize.md.larger?e.$t("homePage.searchBar.peopleNum"):e.$t("homePage.searchBar.peopleNum_short")))])],1),o("el-button",{class:{ready:e.selectLocation.mapInfo,"search-btn":e.large},attrs:{slot:"append",icon:e.large?"":"el-icon-search"},on:{click:function(t){e.selectLocation.mapInfo?e.handleSearch():e.leadToInput()}},slot:"append"},[e.large?[o("span",{staticClass:"search-btn-inner",style:{backgroundPosition:"left "+e.btnBgPosition.x+"px top "+e.btnBgPosition.y+"px"},on:{mouseenter:e.handleSearchBtnHover,mousemove:e.handleSearchBtnHover}},[o("span",[o("i",{staticClass:"el-icon-search"})])])]:e._e()],2),o("el-tooltip",{staticClass:"tipBtn",class:{tipActive:e.activeEnterTip},attrs:{slot:"suffix",effect:"dark",content:e.$t("homePage.searchBar.tipTooltip"),placement:"bottom",disabled:!e.activeEnterTip},slot:"suffix"},[o("span",{on:{click:e.handleTipClick}},[e.suggestionLoading?o("i",{staticClass:"el-icon-loading"}):e._e(),e._v(" "+e._s(e.suggestionLoading?"":"↵")+" ")])])],1)],1)},ge=[],ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[o("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.highlight(e.highlightedIndex-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.highlight(e.highlightedIndex+1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?o("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?o("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?o("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?o("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),o("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,a){return o("li",{key:a,class:{highlighted:e.highlightedIndex===a},attrs:{id:e.id+"-item-"+a,role:"option","aria-selected":e.highlightedIndex===a},on:{click:function(o){return e.select(t)}}},[e._t("default",[e._v(" "+e._s(t[e.valueKey])+" ")],{item:t})],2)})),0)],1)},be=[],ye=(o("a9e3"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[o("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?o("li",[e.parent.noData?e._e():o("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])}),_e=[],we=o("17ec"),Se=o("f6f4"),Ce={mixins:[we["a"],Se["a"]],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,o){e.dropdownWidth=o+"px",e.showPopper=t}))}},Pe=Ce,Te=Object(H["a"])(Pe,ye,_e,!1,null,null,null),$e=Te.exports,Le=o("0e15"),ke=o.n(Le),Oe=o("9169"),Me=o("6725"),Ie=o("6bd7"),Re=o("b044"),xe={name:"CustomAutocomplete",mixins:[Se["a"],Object(Re["a"])("input"),Me["a"]],inheritAttrs:!1,components:{ElAutocompleteSuggestions:$e},directives:{Clickoutside:Oe["a"]},props:{loading:{type:Boolean,default:!1},noData:{type:Boolean,default:!1},valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1},suggestions:{type:Array}},data:function(){return{inputQueryString:"",activated:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions,t=Array.isArray(e)&&e.length>0;return(t||this.loading)&&this.activated},id:function(){return"el-autocomplete-".concat(Object(Ie["a"])())}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,window.innerWidth<768?.85*window.innerWidth:480])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||this.fetchSuggestions(e,(function(e){t.$emit("update:loading",!1),t.suggestionDisabled||(Array.isArray(e)?(t.$emit("update:suggestions",e),t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))}))},handleInput:function(e){if(this.$emit("input",e),this.inputQueryString=e,this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void this.$emit("update:suggestions",[])},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.$emit("KeyEnter"),this.debouncedGetData(this.inputQueryString),this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.$emit("update:suggestions",[]),t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.$emit("update:suggestions",[]),t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),o=t.querySelectorAll(".el-autocomplete-suggestion__list li"),a=o[e],i=t.scrollTop,s=a.offsetTop;s+a.scrollHeight>i+t.clientHeight&&(t.scrollTop+=a.scrollHeight),s<i&&(t.scrollTop-=a.scrollHeight),this.highlightedIndex=e;var n=this.getInput();n.setAttribute("aria-activedescendant","".concat(this.id,"-item-").concat(this.highlightedIndex))}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=ke()(this.debounce,this.getData),this.$bus.$on("debouncedGetData",(function(){e.debouncedGetData(e.inputQueryString)})),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant","".concat(this.id,"-item-").concat(this.highlightedIndex))},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},Ee=xe,De=Object(H["a"])(Ee,ve,be,!1,null,null,null),Ae=De.exports,Be=(o("caad"),o("a15b"),o("d81d"),o("b64b"),o("2532"),o("96cf"),o("1da1")),Ne={computed:Object(p["a"])(Object(p["a"])(Object(p["a"])({pplNum:{get:function(){return this.$store.state.SearchModules.searchFilter.pplNum},set:function(e){this.$store.commit("SearchModules/updatePplNum",e)}},isLoading:function(){return this.$store.state.isLoadingQuery>0}},Object(s["d"])("MapModules",{searchLocation:function(e){return e.searchLocation},mapProduct:function(e){return e.mapProduct},mapCenter:function(e){return e.center}})),Object(s["d"])("SearchModules",{searchByMap:function(e){return e.searchByMap},searchFilter:function(e){return e.searchFilter},searchBounds:function(e){return e.searchBounds},searchExecuted:function(e){return e.searchExecuted},searchType:function(e){return e.searchType},searchByQuery:function(e){return e.searchByQuery}})),{},{searchBarTitle:function(){return"map"==this.searchType?this.$t("homePage.searchBar.customArea"):"location"==this.searchType?this.selectLocation?this.selectLocation.value:this.$t("homePage.searchBar.location_short"):"query"==this.searchType?this.searchByMap?this.$t("homePage.searchBar.customArea"):this.searchByQuery.routeQuery.place_name:this.large?this._windowSize.lg.larger?this.$t("homePage.searchBar.location_long"):this.$t("homePage.searchBar.location_short"):(this._windowSize.lg.larger,this.$t("homePage.searchBar.location_short"))},computedDate:{get:function(){return this.searchFilter.date},set:function(e){this.$store.commit("SearchModules/updateDate",e)}},displayDate:function(){if(this.searchFilter.date){var e=this.searchFilter.date.map((function(e){var t=new Date(e),o=[t.getMonth()+1,t.getDate()].join("/");return o}));return e}}}),watch:{mapCenter:function(e){this.searchLocation&&(this.viewportContainsCenter=this.searchLocation.mapInfo.geometry.viewport.contains(e))},searchByMap:function(e){e&&(this.query="",this.selectLocation=Object.assign({},this.selectLocationInit))},"searchFilter.location.value":function(e){!this.searchExecuted&&e&&(this.selectLocation.value=this.searchFilter.location.value)},searchByQuery:{handler:function(e){this.query=e.routeQuery.place_name}},date:{handler:function(e){this.$store.commit("SearchModules/updateDate",e)}}},methods:{updatePplNum:function(e){this.$store.commit("SearchModules/updatePplNum",e.target.value)},leadToInput:function(){var e=this;this.activeInput||(this.activeInput=!0,setTimeout((function(){e.$refs.searchRef.focus()}),0)),this.$store.dispatch("MapModules/handleSearchControl",!0),this.$store.dispatch("MapModules/setControlVisibleTimer")},handleSearch:function(){if(this.tempSelectLocation=null,!this.selectLocation||!this.searchFilter.location||this.selectLocation.value!=this.searchFilter.location.value){this.$store.dispatch("SearchModules/filterSearchProducts",{searchByMap:!1,searchType:"location"}),this.$store.dispatch("SearchModules/passSearchLocation",this.selectLocation);var e=Object.keys(this.selectLocation.mapInfo.geometry.viewport),t=this.selectLocation.mapInfo.geometry.viewport,o={search_by_map:!1,place_name:this.selectLocation.value,search_bounds_s:t[e[1]].i,search_bounds_e:t[e[0]].i,search_bounds_n:t[e[1]].j,search_bounds_w:t[e[0]].j,guest_number:this.searchFilter.pplNum};this.searchFilter.date&&(o.startDate=this.searchFilter.date[0],o.endDate=this.searchFilter.date[1]),this.$router.replace({query:o}),this.$store.commit("SearchModules/SET_SEARCH_QUERY",o),"search"!=this.$route.name&&this.$router.push({name:"search"}),this.$emit("searchSubmit")}},handleBlur:function(e){e.relatedTarget&&e.relatedTarget.className.includes("tipBtn")||0!=this.suggestions.length||(this.changeInput(!1),"query"!=this.searchType&&(this.query=null),this.selectLocation.value&&(this.query=this.selectLocation.value))},handleTipClick:function(){this.$bus.$emit("debouncedGetData"),this.handleEnterTip(!1)},handleKeyEnter:function(){this.handleEnterTip(!1)},handleInput:function(){this.handleEnterTip(!0),this.suggestions=[],this.searchVal=""},handleSelect:function(e){this.selectLocation=e,this.tempSelectLocation=e,this.query=e.value,this.suggestions=[],this.changeInput(!1)},handleEnterTip:function(e){""!=this.query&&this.query!=this.searchVal&&this.query!=this.selectLocation.value?this.activeEnterTip=e:this.activeEnterTip=!1},changeInput:function(e){var t=this;e?(this.handleEnterTip(e),this.activeInput=e,setTimeout((function(){t.$refs.searchRef.focus()}),0)):this.activeInput=e},querySearchAsync:function(e,t){var o=this;return Object(Be["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!=o.query&&e!=o.searchVal&&o.query!=o.selectLocation.value){a.next=2;break}return a.abrupt("return");case 2:if(o.suggestionLoading=!0,o.searchVal=e,i=o,o.$store.state.MapModules.geocoder){a.next=8;break}return a.next=8,o.$store.dispatch("MapModules/setGoogleAPI");case 8:o.$store.state.MapModules.geocoder.geocode({address:i.searchVal},(function(e,a){if("OK"===a){for(var i=[],s=0;s<e.length;s++){var n={value:e[s].formatted_address,mapInfo:e[s]};i.push(n)}o.resultArray=i,t(o.resultArray)}else console.log("not OK",e,a);0!==e.length&&"ZERO_RESULTS"!==a||(o.noData=!0,o.suggestionLoading=!1)}));case 9:case"end":return a.stop()}}),a)})))()},addDatePickerListener:function(e){e.path.includes(document.getElementsByClassName("date-pick-full-page"[0]))||(this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!1),window.removeEventListener("click",this.addDatePickerListener))},handleDatePickerClick:function(){var e=this;this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!0),this.$refs.datePicker.focus(),setTimeout((function(){window.addEventListener("click",e.addDatePickerListener)}),200)},handleDatePickerChange:function(){},handleDatePickerClose:function(){this.$refs.datePicker.handleClose(),this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!1)}},created:function(){this.searchFilter.location&&(this.selectLocation=this.searchFilter.location)}},je={components:{CustomAutocomplete:Ae},mixins:[Ne],props:{large:{type:Boolean,default:!1}},data:function(){return{noData:!1,suggestions:[],resultArray:[],google:null,fakePplNum:null,options:[],query:null,searchVal:null,activeInput:!1,suggestionLoading:!1,activeEnterTip:!1,selectLocation:{value:null},selectLocationInit:{value:null},viewportContainsCenter:!0,datePickerOptions:{disabledDate:function(e){var t=new Date;return t.setDate(t.getDate()-1),e<t}},btnBgPosition:{x:null,y:null},tempSelectLocation:null}},computed:Object(p["a"])({},Object(s["d"])("UIModules",["_windowSize"])),watch:{},methods:{handleSearchBtnHover:function(e){this.large&&(this.btnBgPosition.x=e.offsetX-1.5*e.target.offsetWidth,this.btnBgPosition.y=e.offsetY-1.5*e.target.offsetHeight)}}},Ve=je,Ue=(o("f2b0"),o("9cba"),Object(H["a"])(Ve,fe,ge,!1,null,"f3e07d84",null)),Fe=Ue.exports,He=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search-bar-short-container"},[o("button",{on:{click:function(t){e.searchCollapseVisible=!e.searchCollapseVisible}}},[o("i",{staticClass:"el-icon-search"}),e._v(" "+e._s(e.searchByMap?e.$t("homePage.searchBar.customArea"):e.searchFilter.location?e.searchFilter.location.value:"搜尋")+" ")]),o("div",{ref:"searchCollapse",staticClass:"search-collapse",class:{hide:!e.searchCollapseVisible}},["wishList"!=e.$route.name?o("SearchBarStraight",{on:{searchSubmit:function(t){e.searchCollapseVisible=!1}}}):e._e()],1),o("transition",{attrs:{name:"el-fade-in"}},[e.searchCollapseVisible?o("div",{staticClass:"mask"}):e._e()])],1)},We=[],ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search-bar-container"},[o("CustomAutocomplete",{ref:"searchRef",staticClass:"search-bar-group",class:{"input-active":e.activeInput,"btn-active":!e.activeInput,"large-search-bar":e.large},attrs:{placeholder:e.large?e._windowSize.md.larger?e.$t("homePage.searchBar.location_long"):e.$t("homePage.searchBar.location_short"):e._windowSize.lg.larger?e.$t("homePage.searchBar.location_long"):e.$t("homePage.searchBar.location_short"),placement:"bottom",noData:e.noData,loading:e.suggestionLoading,"fetch-suggestions":e.querySearchAsync,suggestions:e.suggestions,"popper-append-to-body":!1},on:{blur:e.handleBlur,select:e.handleSelect,input:e.handleInput,KeyEnter:e.handleKeyEnter,"update:loading":function(t){e.suggestionLoading=t},"update:suggestions":function(t){e.suggestions=t}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[e.activeInput?e._e():o("el-button",{staticClass:"input-btn",class:{notFill:!e.searchByMap||"homePage"==e.$route.name},attrs:{slot:"append"},on:{click:function(t){return e.changeInput(!0)}},slot:"append"},[e._v(e._s(e.tempSelectLocation?e.tempSelectLocation.value:e.searchBarTitle))]),o("el-tooltip",{staticClass:"tipBtn",class:{tipActive:e.activeEnterTip},attrs:{slot:"suffix",effect:"dark",content:e.$t("homePage.searchBar.tipTooltip"),placement:"bottom",disabled:!e.activeEnterTip},slot:"suffix"},[o("span",{on:{click:e.handleTipClick}},[e.suggestionLoading?o("i",{staticClass:"el-icon-loading"}):e._e(),e._v(" "+e._s(e.suggestionLoading?"":"↵")+" ")])])],1),o("el-date-picker",{ref:"datePicker",staticStyle:{display:"none"},attrs:{"popper-class":"date-pick-full-page",type:"daterange",size:"small",align:"center","range-separator":"-","value-format":"yyyy/M/d","start-placeholder":e.$t("homePage.searchBar.checkInDates"),"end-placeholder":e.$t("homePage.searchBar.checkOutDates"),"picker-options":e.datePickerOptions},model:{value:e.computedDate,callback:function(t){e.computedDate=t},expression:"computedDate"}}),o("div",{staticClass:"search-btn"},[o("el-popover",{staticClass:"ppl-popover-wrapper",attrs:{slot:"append",placement:"bottom",width:"250",trigger:"click","popper-class":"ppl-popover"},slot:"append"},[o("div",{staticClass:"input-wrapper"},[o("span",{staticClass:"label"},[e._v(e._s(e.$t("homePage.searchBar.peopleNum_short")))]),o("el-input-number",{attrs:{size:"mini",min:0},model:{value:e.pplNum,callback:function(t){e.pplNum=t},expression:"pplNum"}})],1),o("el-button",{staticClass:"ppl-popover-btn",class:{notFill:!e.pplNum},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.pplNum?e.pplNum+(e.pplNum>1?e.$t("homePage.searchBar.peopleUnits"):e.$t("homePage.searchBar.peopleUnit")):e.$t("homePage.searchBar.peopleNum")))])],1)],1),o("div",{staticClass:"search-btn"},[o("el-button",{staticClass:"ppl-popover-btn",class:{notFill:!e.computedDate},attrs:{slot:"reference"},on:{click:function(t){return e.handleDatePickerClick()}},slot:"reference"},[e._v(e._s(e.displayDate?e.displayDate[0]+" - "+e.displayDate[1]:e.$t("homePage.searchBar.addDates")))])],1),o("div",{staticClass:"search-btn-wrapper"},[o("el-button",{class:{ready:e.selectLocation.mapInfo},attrs:{slot:"append"},on:{click:function(t){e.selectLocation.mapInfo?e.handleSearch():e.leadToInput()}},slot:"append"},[[o("span",{staticClass:"search-btn-inner",style:{backgroundPosition:"left "+e.btnBgPosition.x+"px top "+e.btnBgPosition.y+"px"},on:{mouseenter:e.handleSearchBtnHover,mousemove:e.handleSearchBtnHover}},[o("span",[o("i",{staticClass:"el-icon-search"}),e._v(" "+e._s(e.$t("homePage.searchBar.search")))])])]],2)],1),e.datePickBtnShow?o("button",{staticClass:"date-picker-close-btn",on:{click:e.handleDatePickerClose}},[o("i",{staticClass:"el-icon-close"})]):e._e()],1)},qe=[],Ge={components:{CustomAutocomplete:Ae},mixins:[Ne],props:{large:{type:Boolean,default:!1}},data:function(){return{noData:!1,suggestions:[],resultArray:[],google:null,fakePplNum:null,options:[],query:null,searchVal:null,activeInput:!1,suggestionLoading:!1,activeEnterTip:!1,selectLocation:{value:null},selectLocationInit:{value:null},viewportContainsCenter:!0,datePickerOptions:{disabledDate:function(e){var t=new Date;return t.setDate(t.getDate()-1),e<t}},btnBgPosition:{x:null,y:null},closeBtn:null,tempSelectLocation:null}},computed:Object(p["a"])({},Object(s["d"])("UIModules",["_windowSize","datePickBtnShow"])),watch:{computedDate:function(e){e&&(this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!1),window.removeEventListener("click",this.addDatePickerListener))}},methods:{handleSearchBtnHover:function(e){this.btnBgPosition.x=e.offsetX-1.5*e.target.offsetWidth,this.btnBgPosition.y=e.offsetY-1.5*e.target.offsetHeight}},beforeDestroy:function(){this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!1)}},Ke=Ge,Qe=(o("73cb"),o("7028"),o("f338"),Object(H["a"])(Ke,ze,qe,!1,null,"3b010f9f",null)),Ye=Qe.exports,Je={data:function(){return{searchCollapseVisible:!1}},components:{SearchBarStraight:Ye},computed:Object(p["a"])(Object(p["a"])({},Object(s["d"])("UIModules",["searchBarVisible"])),Object(s["d"])("SearchModules",["searchByMap","searchFilter"])),watch:{searchCollapseVisible:function(e){var t=this;document.body.style.overflow=e?"hidden":"",e&&setTimeout((function(){window.addEventListener("click",t.addSearchCollapseListener)}),150)}},methods:{addSearchCollapseListener:function(e){e.path.includes(this.$refs.searchCollapse)||(this.searchCollapseVisible=!1,window.removeEventListener("click",this.addSearchCollapseListener))}},beforeDestroy:function(){document.body.style.overflow=""}},Ze=Je,Xe=(o("a244"),Object(H["a"])(Ze,He,We,!1,null,"0fe31d9b",null)),et=Xe.exports,tt={components:{Logo:X.a,LogoWord:he.a,SearchBar:Fe,SearchCollapse:et},props:{stage:String},data:function(){return{navActiveIndex:"0",windowWidth:null,langDialogVisible:!1,currentLang:null,searchCollapseVisible:!1}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["d"])(["mapPageMode"])),Object(s["d"])("MapModules",["mapProduct"])),Object(s["d"])("UIModules",["searchBarVisible","_windowSize"])),Object(s["d"])("AuthModules",["userAuth"])),{},{isLoading:function(){return this.$store.state.isLoadingQuery>0}}),watch:{},methods:{LogOut:function(){var e=this,t=this,o="".concat("https://vue-course-api.hexschool.io","/logout");this.$store.commit("COUNT_LOADING",1),document.cookie="hexToken=; Max-Age=0",this.$http.post(o).then((function(o){o.data.success&&(e.$store.commit("AuthModules/UPDATE_USER_AUTH",!1),e.$route.meta.requiresAuth&&e.$router.push("/")),t.$store.commit("COUNT_LOADING",-1)}))},onResize:function(){this.$bus.$emit("resize"),this.windowWidth=window.innerWidth,this.$store.commit("UIModules/SET_WINDOW_WIDTH",window.innerWidth)},handleDropDownCommand:function(e){if("searchMode"==e?this.$router.push({name:"search"}):"wishList"==e&&this.$router.push({name:"wishList"}),"manageListings"==e)if(this.userAuth)this.$router.push({name:"Products"}).catch((function(e){console.log(e)}));else{var t=Object.assign({loginPath:"manageListings"},this.$route.query);this.$router.replace({query:t}),this.$store.commit("UIModules/SET_LOGIN_MODAL_VISIBLE",!0)}if("LogIn"==e&&this.$store.commit("UIModules/SET_LOGIN_MODAL_VISIBLE",!0),"LogOut"==e&&this.LogOut(),"changeLanguage"==e&&(this.langDialogVisible=!0),"checkLogin"==e){var o="".concat("https://vue-course-api.hexschool.io","/api/user/check");this.$http.post(o).then((function(e){console.log("success",e.data.success,e.data)}))}},handleChangeLang:function(e){this._i18n.locale=e,this.currentLang=e,localStorage.setItem("language",e),this.langDialogVisible=!1,document.title=this.$t("pageTitle"),"search"!=this.$route.name||this.mapProduct.select||window.location.reload()}},created:function(){this.navActiveIndex=this.$route.name},mounted:function(){this.$store.commit("UIModules/SET_WINDOW_WIDTH",window.innerWidth),this.currentLang=localStorage.getItem("language")||"zh-TW",this.windowWidth=window.innerWidth}},ot=tt,at=(o("7aec"),o("d298"),Object(H["a"])(ot,de,pe,!1,null,"30554f70",null)),it=at.exports,st=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"message-alert"},e._l(e.messages,(function(t,a){return o("div",{key:a,staticClass:"alert alert-dismissible",class:"alert-"+t.status},[e._v(" "+e._s(t.message)+" "),o("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.removeMessage(a)}}},[o("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])})),0)},nt=[],rt={name:"Navbar",data:function(){return{}},computed:Object(p["a"])({},Object(s["d"])("AlertModules",["messages"])),methods:Object(p["a"])({},Object(s["b"])("AlertModules",["updateMessage","removeMessage","removeMessageWithTiming"])),created:function(){}},lt=rt,ct=(o("af05"),Object(H["a"])(lt,st,nt,!1,null,null,null)),ut=ct.exports,dt={components:{Navbar:it,Alert:ut,LoadingOverlay:ae},computed:Object(p["a"])({},Object(s["c"])(["isLoading"]))},pt=dt,mt=(o("241b"),Object(H["a"])(pt,ce,ue,!1,null,"0c934bc0",null)),ht=mt.exports,ft=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"flex-row"},[o("el-col",{staticClass:"center-col",attrs:{sm:24,md:22}},[o("el-breadcrumb",{staticClass:"mb-3",attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",[e._v("房源列表")])],1),o("div",{staticClass:"text-right"},[o("div",{staticStyle:{"text-align":"right",margin:"5px 0","min-height":"42px"}},[e.state.editRoomType?e._e():o("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.$router.push({name:"Create",params:{isNew:!0}})}}},[e._v("新增房源 ")])],1)]),[o("el-table",{staticClass:"el-table--border",class:{"empty-loading":e.isLoading},staticStyle:{width:"100%"},attrs:{data:e.tempProperties,"max-height":"480",stripe:""}},[e.isLoading?e._e():[o("el-table-column",{attrs:{"class-name":"title-cloumn",label:"房源"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-image",{class:{noPhoto:!t.row.photos.normalImgs},attrs:{src:t.row.photos.normalImgs?t.row.photos.normalImgs[0].url:"",fit:"cover"}},[t.row.photos.normalImgs?e._e():o("div",{staticClass:"placeholder",attrs:{slot:"error"},slot:"error"},[e._v(" 尚無圖片 ")])]),o("span",[e._v(e._s(t.row.info.title))])]}}],null,!1,3919843431)}),o("el-table-column",{attrs:{prop:"roomTypes.length",label:"房型數量",width:"50"}}),o("el-table-column",{attrs:{prop:"info.mapInfo.shortAddress",label:"地點",width:"150"}}),o("el-table-column",{attrs:{"class-name":"edit-cloumn",fixed:"right",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("ConfirmPopover",{attrs:{title:t.row.info.title,itemSrc:t,duplicate:!0},on:{duplicateItem:e.handleDuplicate,deleteItem:e.deleteProperty,editItem:function(o){return e.$router.push({name:"Edit",params:{isNew:!1,editItem:t.row}})}}})]}}],null,!1,172201611)})],o("template",{slot:"empty"},[e.isLoading?o("div"):e._e(),e.isLoading?e._e():o("div",[o("i",{staticClass:"el-icon-plus"}),e._v(" 尚未建立房源，請點選上方[新增房源] ")])]),o("template",{slot:"append"},[e.isLoading?o("div",{staticClass:"table-loading"},[o("i",{staticClass:"el-icon-loading"}),e._v(" 讀取房源中 ")]):e._e()])],2),o("div",{staticStyle:{"text-align":"center"}},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.pagination?e.pagination.total_pages:0,disabled:e.isLoading},on:{"current-change":e.paginationHandler,"prev-click":function(t){return e.paginationHandler(e.pagination.current_page-1)},"next-click":function(t){return e.paginationHandler(e.pagination.current_page+1)}}})],1)]],2)],1)},gt=[],vt=o("1157"),bt=o.n(vt),yt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-popover",{attrs:{placement:"bottom",width:"100","popper-class":"roomtype-popover"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("div",{staticClass:"poper-option",on:{click:function(t){return e.editHandler(e.itemSrc.row)}}},[e._v(" 編輯 ")]),o("el-divider"),e.duplicate?o("div",{staticClass:"poper-option",on:{click:function(t){return e.duplicateHandler(e.itemSrc.row)}}},[e._v(" 複製 ")]):e._e(),o("el-divider"),o("el-popconfirm",{attrs:{title:"確定刪除「"+e.title+"」嗎？",confirmButtonText:"確定",cancelButtonText:"取消",cancelButtonType:"Text"},on:{onConfirm:e.deleteHandler}},[o("div",{staticClass:"poper-option",attrs:{slot:"reference"},slot:"reference"},[e._v(" 刪除 ")])]),o("el-button",{attrs:{slot:"reference",type:"text",size:"midium",disabled:e.itemSrc.disable||e.isLoading,icon:e.itemSrc.disable||e.isLoading?"el-icon-loading":"el-icon-more"},slot:"reference"})],1)},_t=[],wt={props:{itemSrc:Object,title:String,duplicate:Boolean},data:function(){return{visible:!1,disable:!1}},computed:{isLoading:function(){return this.$store.state.isLoadingQuery>0}},methods:{deleteHandler:function(){this.visible=!1,this.itemSrc.disable=!0,this.$emit("deleteItem",this.itemSrc.row)},editHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("editItem",e)},duplicateHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.visible=!1,this.itemSrc.disable=!0,this.$emit("duplicateItem",e)}}},St=wt,Ct=(o("8bfa"),Object(H["a"])(St,yt,_t,!1,null,"f7cd5daa",null)),Pt=Ct.exports,Tt={components:{ConfirmPopover:Pt},data:function(){return{isNew:!1,tempProperties:[],state:{uploadingProduct:!1,uploadingFile:!1,deletingProduct:!1,editingRoomType:null,createRoomType:!1,comfirmDelRoomType:!1}}},computed:Object(p["a"])(Object(p["a"])({},Object(s["c"])("ProductsModules",["products","pagination"])),{},{isLoading:function(){return this.$store.state.isLoadingQuery>0}}),watch:{products:{handler:function(e){var t=this;this.tempProperties=[],e.forEach((function(e){t.tempProperties.push(e)}))}}},methods:Object(p["a"])(Object(p["a"])({},Object(s["b"])("ProductsModules",["getProducts"])),{},{paginationHandler:function(e){this.getProducts(["admin",e])},updateProperty:function(){var e=this;this.$store.dispatch("updateLoading",!0);var t,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product"),a=this,i="post";a.isNew||(o="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product/").concat(this.tempProduct.id),i="put",t=a.pagination.current_page),this.state.uploadingProduct=!0,this.$http[i](o,{data:a.tempProduct}).then((function(o){o.data.success?(e.$store.dispatch("ProductsModules/getProducts",["admin",t]),bt()("#productModal").modal("hide"),a.clearUploadFileInput(),e.$message({showClose:!0,center:!0,type:"success",message:o.data.message})):(e.$store.dispatch("ProductsModules/getProducts",["admin",t]),bt()("#productModal").modal("hide"),a.clearUploadFileInput(),e.$message({showClose:!0,center:!0,type:"danger",message:o.data.message})),e.$store.dispatch("updateLoading",!0)}))},deleteProperty:function(e){var t=this,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product/").concat(e.id),a=this;this.$store.dispatch("updateLoading",!0),this.$http.delete(o).then((function(o){o.data.success?(t.$message({showClose:!0,center:!0,type:"warning",message:"".concat(o.data.message,": ").concat(e.info.title)}),bt()("#delProductModal").modal("hide"),a.getProducts(["admin",a.pagination.current_page])):t.$message({showClose:!0,center:!0,type:"danger",message:o.data.message}),t.$store.dispatch("updateLoading",!1)}))},handleDuplicate:function(e){var t=this,o=JSON.parse(JSON.stringify(e));o.id=this.$custom.getUuid(),o.info.title+="-複製",this.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product"),i=this,s="post";this.state.uploadingProperty=!0,this.$http[s](a,{data:o}).then((function(e){e.data.success?(t.$message({showClose:!0,center:!0,type:"success",message:"".concat(e.data.message,": ").concat(o.info.title)}),i.tempProperties.unshift(o)):t.$message({showClose:!0,center:!0,type:"danger",message:e.data.message}),t.getProducts(["admin"])}))}}),created:function(){this.getProducts(["admin"])}},$t=Tt,Lt=(o("906b"),Object(H["a"])($t,ft,gt,!1,null,"39c14e4d",null)),kt=Lt.exports,Ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"flex-row"},[o("el-col",{staticClass:"center-col",attrs:{sm:24,md:22}},[o("div",{staticClass:"title"},[e._v(" 預訂 ")]),o("el-table",{staticClass:"el-table--border",staticStyle:{width:"100%"},attrs:{data:e.titleList?e.tempOrders[e.currentPage-1]:null,"max-height":"480",stripe:""}},[o("el-table-column",{attrs:{label:"建立時間",width:"60","class-name":"center-align-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{attrs:{effect:"dark",content:e._f("date")(t.row.create_at),placement:"top"}},[o("el-button",{attrs:{type:"text",icon:"el-icon-date"}})],1)]}}])}),o("el-table-column",{attrs:{label:"預訂狀態",width:"60","class-name":"center-align-col"},scopedSlots:e._u([{key:"default",fn:function(t){return["confirm"===t.row.message.status?o("el-tooltip",{attrs:{effect:"dark",content:"已確認",placement:"top"}},[o("el-button",{attrs:{loading:e.updating,type:"text",icon:"el-icon-success"}})],1):e._e(),t.row.message.status&&"tbd"!==t.row.message.status?e._e():o("el-tooltip",{attrs:{effect:"dark",content:"待確認",placement:"top"}},[o("el-button",{attrs:{loading:e.updating,type:"text",icon:"el-icon-warning"}})],1),"cancel"===t.row.message.status?o("el-tooltip",{attrs:{effect:"dark",content:"已取消",placement:"top"}},[o("el-button",{attrs:{loading:e.updating,type:"text",icon:"el-icon-remove"}})],1):e._e()]}}])}),o("el-table-column",{attrs:{label:"預訂房源",width:"140","class-name":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.titleList.hasOwnProperty(t.row.message.roomInfo.propertyId)?[e._v(" "+e._s(e.titleList[t.row.message.roomInfo.propertyId]?e.titleList[t.row.message.roomInfo.propertyId].propertyTitle:"loading")+" ")]:[o("div",{staticClass:"content-placeholder"})]]}}])}),o("el-table-column",{attrs:{label:"預訂房型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.titleList[t.row.message.roomInfo.propertyId]?[e._v(" "+e._s(e.titleList[t.row.message.roomInfo.propertyId].roomTypes[t.row.message.roomInfo.roomTypeId]?e.titleList[t.row.message.roomInfo.propertyId].roomTypes[t.row.message.roomInfo.roomTypeId].name:"房型不存在")+" ")]:[o("div",{staticClass:"content-placeholder"})]]}}])}),o("el-table-column",{attrs:{label:"預訂間數",width:"60","class-name":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.message.roomInfo.roomQty)+" ")]}}])}),o("el-table-column",{attrs:{label:"入住日期",width:"120","class-name":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.message.roomInfo.orderDate[0])+" ")]}}])}),o("el-table-column",{attrs:{label:"入住天數",width:"60","class-name":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.message.roomInfo.orderDate.length+" 天")+" ")]}}])}),o("el-table-column",{attrs:{label:"總金額",width:"120","class-name":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.titleList[t.row.message.roomInfo.propertyId]?[e._v(" "+e._s(e._f("currency")(e.titleList[t.row.message.roomInfo.propertyId].roomTypes[t.row.message.roomInfo.roomTypeId]?t.row.message.roomInfo.orderDate.length*t.row.message.roomInfo.roomQty*parseInt(e.titleList[t.row.message.roomInfo.propertyId].roomTypes[t.row.message.roomInfo.roomTypeId].price):"0"))+" ")]:[o("div",{staticClass:"content-placeholder"})]]}}])}),o("el-table-column",{attrs:{label:"操作",width:"50","class-name":"center-align-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("OrderPopover",{attrs:{title:"房源",itemSrc:t,updating:e.updating},on:{confirmItem:e.confirmOrder,deleteItem:e.deleteOrder,cancelItem:e.cancelOrder}})]}}])}),o("template",{slot:"empty"},[e.isLoading?o("div",[o("i",{staticClass:"el-icon-loading"}),e._v(" 讀取訂單中")]):e._e(),e.isLoading?e._e():o("div",[o("i",{staticClass:"el-icon-loading"}),e._v(" 讀取訂單中")])])],2),o("el-pagination",{attrs:{background:"","pager-count":5,layout:"prev, pager, next","page-count":e.paginatedOrderArray.length,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1)],1)},Mt=[],It=(o("7db0"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-popover",{attrs:{placement:"bottom",width:"100","popper-class":"roomtype-popover"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("div",{staticClass:"poper-option",on:{click:function(t){return e.confirmHandler(e.itemSrc.row)}}},[e._v(" 確認訂單 ")]),o("el-divider"),o("el-popconfirm",{attrs:{title:"確定取消嗎？",confirmButtonText:"確定",cancelButtonText:"取消",cancelButtonType:"Text"},on:{onConfirm:e.cancelHandler}},[o("div",{staticClass:"poper-option",attrs:{slot:"reference"},slot:"reference"},[e._v(" 取消訂單 ")])]),o("el-divider"),o("el-popconfirm",{attrs:{title:"確定刪除嗎？",confirmButtonText:"確定",cancelButtonText:"取消",cancelButtonType:"Text"},on:{onConfirm:e.deleteHandler}},[o("div",{staticClass:"poper-option",attrs:{slot:"reference"},slot:"reference"},[e._v(" 刪除訂單 ")])]),o("el-button",{attrs:{slot:"reference",type:"text",size:"midium",loading:e.updating,icon:e.itemSrc.disable?"el-icon-loading":"el-icon-more"},slot:"reference"})],1)}),Rt=[],xt={props:{itemSrc:Object,title:String,updating:Boolean},data:function(){return{visible:!1,disable:!1}},methods:{cancelHandler:function(){this.visible=!1,this.$emit("cancelItem",this.itemSrc.row)},confirmHandler:function(e){this.visible=!1,this.$emit("confirmItem",e)},deleteHandler:function(){this.visible=!1,this.$emit("deleteItem",this.itemSrc.row)}}},Et=xt,Dt=(o("baf4"),Object(H["a"])(Et,It,Rt,!1,null,"15ebd330",null)),At=Dt.exports,Bt={components:{OrderPopover:At},data:function(){return{calendar:!1,updating:!1,tempOrders:[],currentPage:1}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["c"])("ProductsModules",["products"])),Object(s["c"])("OrdersModules",["paginatedOrderArray"])),Object(s["d"])("OrdersModules",["orders","filteredOrders","pagination","titleList"])),{},{isLoading:function(){return this.$store.state.isLoadingQuery>0}}),watch:{paginatedOrderArray:{handler:function(){this.tempOrders=this.paginatedOrderArray}}},methods:Object(p["a"])(Object(p["a"])({},Object(s["b"])("ProductsModules",["getProducts"])),{},{updateOrders:function(e){var t=this;this.updating=!0;var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/order/").concat(e.id);this.$http.put(o,{data:e}).then((function(e){e.data.success?t.$message({showClose:!0,center:!0,type:"success",message:e.data.message}):t.$message({showClose:!0,center:!0,type:"danger",message:e.data.message}),t.$store.dispatch("OrdersModules/GetRoomManagementData"),t.updating=!1}))},cancelOrder:function(e){var t=JSON.parse(JSON.stringify(e));t.message.status="cancel",this.updateOrders(t)},deleteOrder:function(e){var t=JSON.parse(JSON.stringify(e));t.message.status="delete",this.updateOrders(t)},confirmOrder:function(e){var t=JSON.parse(JSON.stringify(e));t.message.status="confirm",this.updateOrders(t)},manualComputed:function(e,t,o){var a=null,i=null;return this.products&&(a=this.products.find((function(t){return t.id==e})),a&&(i=a.roomTypes.find((function(e){return e.id==t})))),"property"===o?a.info.title:"roomType"===o?i?i.name:null:"calcPrice"===o?parseInt(i.price):void 0},handlePageChange:function(e){this.currentPage=e}}),created:function(){this.$store.dispatch("OrdersModules/GetRoomManagementData")}},Nt=Bt,jt=(o("f5f0"),Object(H["a"])(Nt,Ot,Mt,!1,null,"069eddde",null)),Vt=jt.exports,Ut=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"flex-row"},[o("el-col",{staticClass:"center-col",attrs:{xs:24,sm:16}},[this.isNew||this.editItem?o("div",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/admin/products"}}},[e._v("房源列表")]),o("el-breadcrumb-item",[e._v(e._s(e.isNew?"新增房源":"編輯房源"))])],1),o("ValidationObserver",{ref:"validObserver",staticClass:"w-100",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,i=t.invalid;return[o("div",{staticStyle:{"text-align":"right",margin:"5px 0","min-height":"42px"}},[e.state.editRoomType?e._e():o("el-button",{attrs:{loading:e.state.uploadingProperty,size:"medium"},on:{click:function(t){e.validNotify(i),a(e.updateProduct)}}},[e._v(" "+e._s(e.isNew?"新增房源":"儲存房源")+" ")])],1),o("el-tabs",{model:{value:e.tabActiveName,callback:function(t){e.tabActiveName=t},expression:"tabActiveName"}},[o("el-tab-pane",{attrs:{label:"房源資訊",name:"info"}}),o("el-tab-pane",{attrs:{label:"照片",name:"photos"}}),o("el-tab-pane",{attrs:{label:"設施與服務",name:"facilityService"}}),o("el-tab-pane",{attrs:{label:"房型",name:"room"}})],1),[o("div",{staticClass:"tabs",class:{visible:"info"==e.tabActiveName}},[o("el-row",{attrs:{gutter:18}},[o("el-col",{attrs:{xs:24,sm:24}},[o("el-form",{attrs:{"label-position":"top"}},[o("el-row",{attrs:{gutter:8}},[o("el-col",{attrs:{sm:14,xs:24}},[o("ValidationProvider",{attrs:{name:"房源名稱",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},attrs:{label:"房源名稱"}},[o("el-input",{attrs:{placeholder:"請輸入房源名稱",maxlength:"30","show-word-limit":""},model:{value:e.tempProperty.info.title,callback:function(t){e.$set(e.tempProperty.info,"title","string"===typeof t?t.trim():t)},expression:"tempProperty.info.title"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{sm:4,xs:12}},[o("ValidationProvider",{attrs:{name:"房源類型",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},attrs:{label:"房源類型"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"房源類型"},model:{value:e.tempProperty.info.category,callback:function(t){e.$set(e.tempProperty.info,"category",t)},expression:"tempProperty.info.category"}},[o("el-option",{attrs:{label:"飯店",value:"hotel"}}),o("el-option",{attrs:{label:"民宿",value:"bnb"}}),o("el-option",{attrs:{label:"青年旅舍",value:"hostel"}})],1),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{sm:6,xs:12}},[o("ValidationProvider",{attrs:{name:"房源面積",rules:"required|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"房源面積"}},[o("el-input",{attrs:{"suffix-icon":"el-icon-square",placeholder:"請輸入房源面積"},model:{value:e.tempProperty.info.floorArea,callback:function(t){e.$set(e.tempProperty.info,"floorArea","string"===typeof t?t.trim():t)},expression:"tempProperty.info.floorArea"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{span:24}},[o("ValidationProvider",{attrs:{name:"房源介紹",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},attrs:{label:"房源介紹"}},[o("el-input",{attrs:{type:"textarea",resize:"none",rows:"4",maxlength:"1000","show-word-limit":"",placeholder:"請輸入房源介紹"},model:{value:e.tempProperty.info.description,callback:function(t){e.$set(e.tempProperty.info,"description",t)},expression:"tempProperty.info.description"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("ValidationProvider",{attrs:{name:"地址",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"地址"}},[o("el-col",{staticClass:"mb-2",attrs:{xs:24,sm:18,md:20}},[o("el-input",{attrs:{placeholder:"請點擊[取得位置]選取地址",disabled:!e.tempProperty.info.LatLng},model:{value:e.tempProperty.info.address,callback:function(t){e.$set(e.tempProperty.info,"address","string"===typeof t?t.trim():t)},expression:"tempProperty.info.address"}})],1),o("el-col",{staticClass:"text-center",attrs:{xs:24,sm:6,md:4}},[o("SearchAddress",{attrs:{mapDialogVisible:e.mapDialogVisible},on:{"update:mapDialogVisible":function(t){e.mapDialogVisible=t},"update:map-dialog-visible":function(t){e.mapDialogVisible=t},updateAddress:e.saveAddress,closeDialog:function(t){e.mapDialogVisible=!1}}})],1),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)}),e.tempProperty.info.LatLng?o("el-col",{staticClass:"display-container",attrs:{span:24}},[o("GoogleMapLoader",{ref:"displayMapLoader",staticClass:"display-google-map-loader",attrs:{initGeolocation:!1,setMarker:e.tempProperty.info.LatLng,mapConfig:e.displayMapConfig,apiKey:"AIzaSyDTP6E9ofDGuoa6fo0egyM8CSOKQ4cGVAg"}})],1):e._e()],1)],1)],1)],1)],1)],[o("div",{staticClass:"tabs",class:{visible:"photos"==e.tabActiveName}},[o("PhotoUploader",{attrs:{uploadingFile:e.uploadingFile,photoSrc:e.tempProperty.photos},on:{"update:uploadingFile":function(t){e.uploadingFile=t},"update:uploading-file":function(t){e.uploadingFile=t}}})],1)],[o("div",{staticClass:"tabs",class:{visible:"facilityService"==e.tabActiveName}},[o("el-form",[o("el-col",{attrs:{sm:24}},[o("el-collapse",{model:{value:e.editPropertyOption.collapeActiveNames,callback:function(t){e.$set(e.editPropertyOption,"collapeActiveNames",t)},expression:"editPropertyOption.collapeActiveNames"}},[o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"房客服務",name:"servie"}},e._l(e.editPropertyOption.service,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempProperty.service[t.model],callback:function(o){e.$set(e.tempProperty.service,t.model,o)},expression:"tempProperty.service[item.model]"}},[e._v(e._s(t.label))])})),1)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"餐飲設施",name:"catering"}},e._l(e.editPropertyOption.facility.catering,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempProperty.facility.catering[t.model],callback:function(o){e.$set(e.tempProperty.facility.catering,t.model,o)},expression:"tempProperty.facility.catering[item.model]"}},[e._v(e._s(t.label))])})),1)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"休閒設施",name:"entertainment"}},e._l(e.editPropertyOption.facility.entertainment,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempProperty.facility.entertainment[t.model],callback:function(o){e.$set(e.tempProperty.facility.entertainment,t.model,o)},expression:"tempProperty.facility.entertainment[item.model]"}},[e._v(e._s(t.label))])})),1)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"商務與生活設施",name:"bussinessLife"}},e._l(e.editPropertyOption.facility.bussinessLife,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempProperty.facility.bussinessLife[t.model],callback:function(o){e.$set(e.tempProperty.facility.bussinessLife,t.model,o)},expression:"tempProperty.facility.bussinessLife[item.model]"}},[e._v(e._s(t.label))])})),1)],1)],1)],1)],1)],1)],[o("div",{staticClass:"tabs",class:{visible:"room"==e.tabActiveName}},[e.state.editRoomType?e._e():o("div",[o("el-button",{staticStyle:{float:"right","margin-bottom":"13px"},attrs:{size:"medium"},on:{click:function(t){return e.editRoomType()}}},[e._v("新增房型")])],1),e.state.editRoomType?e._e():o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tempProperty.roomTypes,"empty-text":"尚未建立房型，請點選上方[新增房型]",stripe:"",border:""}},[o("el-table-column",{attrs:{prop:"name",label:"房型",width:"180",sortable:""}}),o("el-table-column",{attrs:{prop:"type",formatter:e.roomTypeFormatter,label:"種類",sortable:""}}),o("el-table-column",{attrs:{prop:"bedType.total",label:"床數",sortable:""}}),o("el-table-column",{attrs:{prop:"pplNum",label:"入住人數",sortable:""}}),o("el-table-column",{attrs:{prop:"price",formatter:e.formatter,label:"訂價",sortable:""}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("ConfirmPopover",{attrs:{title:"房型",itemSrc:t,duplicate:!0},on:{deleteItem:e.removeRoomType,editItem:e.editRoomType,duplicateItem:e.duplicateRoomType}})]}}],null,!0)})],1),o("ValidationObserver",{ref:"validObserver",staticClass:"w-100",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,i=t.invalid;return[e.state.editRoomType?o("div",[o("div",{staticClass:"tab-title"},[e._v(e._s(e.state.createRoomType?"新增":"編輯")+"房型")]),o("el-row",{staticStyle:{display:"flex"}},[o("el-col",{staticStyle:{margin:"auto 0"},attrs:{span:12}},[o("el-page-header",{staticStyle:{margin:"auto 0"},on:{back:e.handleCancelCreateRoomType}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s((e.state.createRoomType,"返回")))]),o("span",{attrs:{slot:"content"},slot:"content"})])],1),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[o("el-button",{on:{click:function(t){e.validNotify(i),a(e.finishEditRoomType)}}},[e._v(e._s(e.state.createRoomType?"儲存房型":"更新房型"))])],1)],1),o("el-row",{attrs:{gutter:8}},[o("el-form",{attrs:{"label-position":"top"}},[o("el-col",{attrs:{sm:4}},[o("ValidationProvider",{attrs:{name:"房型種類",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"房型種類"}},[o("el-select",{attrs:{placeholder:"房型單位"},model:{value:e.tempRoom.type,callback:function(t){e.$set(e.tempRoom,"type",t)},expression:"tempRoom.type"}},[o("el-option",{attrs:{label:"床位",value:"bunk"}}),o("el-option",{attrs:{label:"房間",value:"room"}}),o("el-option",{attrs:{label:"樓層",value:"entireApartment"}}),o("el-option",{attrs:{label:"獨棟",value:"entireBuilding"}})],1),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{sm:14}},[o("ValidationProvider",{attrs:{name:"房型名稱",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},attrs:{label:"房型名稱"}},[o("el-input",{attrs:{placeholder:"請輸入房型名稱",maxlength:"30","show-word-limit":""},model:{value:e.tempRoom.name,callback:function(t){e.$set(e.tempRoom,"name",t)},expression:"tempRoom.name"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{span:6,xs:24}},[o("ValidationProvider",{attrs:{name:"房型面積",rules:"required|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"房型面積"}},[o("el-input",{attrs:{"suffix-icon":"el-icon-square",placeholder:"請輸入房型面積"},model:{value:e.tempRoom.floorArea,callback:function(t){e.$set(e.tempRoom,"floorArea",t)},expression:"tempRoom.floorArea"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{span:6,xs:24}},[o("ValidationProvider",{attrs:{name:"房型訂價",rules:"required|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"房型訂價"}},[o("el-input",{attrs:{type:"number",placeholder:"請輸入房型訂價"},model:{value:e.tempRoom.price,callback:function(t){e.$set(e.tempRoom,"price",t)},expression:"tempRoom.price"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{span:6,xs:24}},[o("ValidationProvider",{attrs:{name:"房型數量",rules:"required|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"房型數量"}},[o("el-input",{attrs:{type:"number",placeholder:"請輸入房型數量"},model:{value:e.tempRoom.roomNum,callback:function(t){e.$set(e.tempRoom,"roomNum",t)},expression:"tempRoom.roomNum"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{span:6,xs:24}},[o("ValidationProvider",{attrs:{name:"可住人數",rules:"required|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("el-form-item",{class:{"is-error":a.length>0},staticStyle:{width:"100%"},attrs:{label:"可住人數"}},[o("el-input",{attrs:{type:"number",placeholder:"請輸入可住人數"},model:{value:e.tempRoom.pplNum,callback:function(t){e.$set(e.tempRoom,"pplNum",t)},expression:"tempRoom.pplNum"}}),o("div",{staticClass:"el-form-item__error"},[e._v(" "+e._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("el-col",{attrs:{sm:24}},[o("el-collapse",{model:{value:e.editRoomTypeOption.collapeActiveNames,callback:function(t){e.$set(e.editRoomTypeOption,"collapeActiveNames",t)},expression:"editRoomTypeOption.collapeActiveNames"}},[o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{staticClass:"bed-type",attrs:{title:"床型",name:"bedType"}},e._l(e.editRoomTypeOption.bedType,(function(t){return o("span",{key:t.model,staticClass:"input-number"},[o("label",[e._v(e._s(t.label))]),o("el-input-number",{attrs:{min:0,size:"mini"},model:{value:e.tempRoom.bedType[t.model],callback:function(o){e.$set(e.tempRoom.bedType,t.model,o)},expression:"tempRoom.bedType[item.model]"}})],1)})),0)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"整體設施",name:"basic"}},e._l(e.editRoomTypeOption.basicFacilities,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempRoom.facilities.basicFacilities[t.model],callback:function(o){e.$set(e.tempRoom.facilities.basicFacilities,t.model,o)},expression:"tempRoom.facilities.basicFacilities[item.model]"}},[e._v(e._s(t.label))])})),1)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"臥室設備",name:"bedroom"}},e._l(e.editRoomTypeOption.bedroomFacilities,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempRoom.facilities.bedroomFacilities[t.model],callback:function(o){e.$set(e.tempRoom.facilities.bedroomFacilities,t.model,o)},expression:"tempRoom.facilities.bedroomFacilities[item.model]"}},[e._v(e._s(t.label))])})),1)],1),o("el-card",{attrs:{shadow:"hover"}},[o("el-collapse-item",{attrs:{title:"衛浴設備",name:"bathroom"}},e._l(e.editRoomTypeOption.bathroomFacilities,(function(t){return o("el-checkbox",{key:t.model,model:{value:e.tempRoom.facilities.bathroomFacilities[t.model],callback:function(o){e.$set(e.tempRoom.facilities.bathroomFacilities,t.model,o)},expression:"tempRoom.facilities.bathroomFacilities[item.model]"}},[e._v(e._s(t.label))])})),1)],1)],1)],1)],1)],1),o("PhotoUploader",{attrs:{uploadingFile:e.uploadingFile,photoSrc:e.tempRoom.photos},on:{"update:uploadingFile":function(t){e.uploadingFile=t},"update:uploading-file":function(t){e.uploadingFile=t}}})],1):e._e()]}}],null,!0)})],1)]]}}],null,!1,758612950)})],1):e._e()])],1)},Ft=[],Ht=(o("c975"),o("13d5"),o("a434"),o("07ac"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{ref:"googleMap",staticClass:"google-map"}),Boolean(this.google)&&Boolean(this.map)?[e._t("default",null,{google:e.google,map:e.map})]:e._e()],2)}),Wt=[],zt=o("f464"),qt=o.n(zt),Gt={props:{mapConfig:Object,apiKey:String,setMarker:Object,initGeolocation:Boolean},data:function(){return{marker:null,google:null,map:null,geocoder:null,latLngBounds:null,pos:null}},mounted:function(){var e=this;return Object(Be["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt()({apiKey:e.apiKey});case 2:o=t.sent,e.google=o,e.geocoder=new e.google.maps.Geocoder,e.initializeMap();case 6:case"end":return t.stop()}}),t)})))()},watch:{setMarker:function(){this.placeMarker(this.setMarker),this.setMapCenter(this.setMarker)}},methods:{initializeMap:function(){var e=this.$refs.googleMap;this.map=new this.google.maps.Map(e,this.mapConfig),this.addListeners(),this.initGeolocation&&this.getGeolocation(),this.setMarker&&this.placeMarker(this.setMarker)},setMapCenter:function(e){this.map.setCenter(e)},placeMarker:function(e){this.marker&&this.removeMarkers();var t=new this.google.maps.Marker({position:e,map:this.map,animation:this.google.maps.Animation.DROP});this.marker=t},removeMarkers:function(){this.marker.setMap(null)},getGeolocation:function(){var e=this,t=new e.google.maps.InfoWindow;function o(e,t,o){t.setPosition(o),t.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}navigator.geolocation?navigator.geolocation.getCurrentPosition((function(o){e.pos={lat:o.coords.latitude,lng:o.coords.longitude};var a=new e.google.maps.Marker({position:e.pos,icon:{url:"images/dot.svg",scaledSize:new e.google.maps.Size(30,30),origin:new e.google.maps.Point(0,0),anchor:new e.google.maps.Point(15,15)},title:this.$t("map.yourLocation")});a.setMap(e.map),t.setPosition(e.pos),t.setContent(this.$t("map.yourLocation")),e.map.setCenter(e.pos),e.map.setZoom(16)}),(function(){o(!0,t,e.map.getCenter())})):o(!1,t,e.map.getCenter())},addListeners:function(){var e=this;this.map.addListener("click",(function(t){e.$emit("update:click",t)})),this.map.addListener("center_changed",(function(){var t={lat:e.map.getCenter().lat(),lng:e.map.getCenter().lng()};e.$emit("update:center",t)})),this.map.addListener("bounds_changed",(function(){var t={sw:{lat:e.map.getBounds().getSouthWest().lat(),lng:e.map.getBounds().getSouthWest().lng()},ne:{lat:e.map.getBounds().getNorthEast().lat(),lng:e.map.getBounds().getNorthEast().lng()}};e.$emit("update:bounds",t)})),this.map.addListener("zoom_changed",(function(){var t=e.map.getZoom();e.$emit("update:zoom",t)}))}}},Kt=Gt,Qt=(o("7754"),Object(H["a"])(Kt,Ht,Wt,!1,null,"03eba756",null)),Yt=Qt.exports,Jt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{staticStyle:{width:"100%"},on:{click:e.openMapDialog}},[e._v("取得位置")]),o("el-dialog",{attrs:{id:"map-dialog",visible:e.mapDialogVisible,"lock-scroll":!0,width:"75%","custom-class":"map-dialog",center:!0,top:"40px"},on:{"update:visible":function(t){e.mapDialogVisible=t}}},[o("el-button",{staticClass:"el-dialog__headerbtn",attrs:{"aria-label":"Close"},on:{click:function(t){return e.$emit("closeDialog")}}},[o("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]),o("GoogleMapLoader",{ref:"mapLoader",staticClass:"google-map-loader",attrs:{initGeolocation:!0,mapConfig:e.searchMapConfig,apiKey:"AIzaSyDTP6E9ofDGuoa6fo0egyM8CSOKQ4cGVAg"},on:{"update:click":e.updateClick}}),o("div",{staticClass:"buttons"},[o("el-row",{attrs:{gutter:1}},[o("el-col",{staticClass:"my-2",attrs:{xs:24,md:24}},[o("customSelect",{attrs:{id:"map-select",filterable:"",remote:"",clearable:"","remote-method":e.addressToGocode,placeholder:"請輸入地址搜尋或點擊地圖搜尋","no-match-text":"沒有相符地址，請點擊地圖或按下Enter查詢","no-data-text":e.noDataText},on:{change:e.mapSelectionOn,clear:function(t){e.mapSelections=null,e.searchByClick=!1}},model:{value:e.mapSelect,callback:function(t){e.mapSelect=t},expression:"mapSelect"}},e._l(e.mapSelections,(function(e){return o("el-option",{key:e.place_id,attrs:{icon:"el-icon-search",label:e.formatted_address,value:e.formatted_address,latLng:e}})})),1)],1),o("el-col",{staticClass:"my-2 text-right",attrs:{xs:24,md:24}},[o("el-button",{on:{click:function(t){e.mapDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{on:{click:function(t){e.$emit("updateAddress",e.mapInfo),e.mapDialogVisible=!1}}},[e._v("確認")])],1)],1)],1)],1)],1)},Zt=[],Xt={north:85,south:-85,west:-180,east:180},eo={clickableIcons:!1,streetViewControl:!0,panControlOptions:!0,mapTypeControl:!1,zoom:9,minZoom:2,maxZoom:18,restriction:{latLngBounds:Xt,strictBounds:!1},styles:[{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#e2f4e2"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#e6e6e6"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#d9d9d9"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",stylers:[{weight:.5}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{visibility:"simplified"}]}]},to={name:"customSelect",extends:u["Select"],props:{latLng:Object},methods:{emitChange:function(e){Object(Ie["e"])(this.value,e)||this.$emit("change",this.options[this.hoverIndex].$attrs.latLng)},selectOption:function(){if(this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu(),"function"===typeof this.remoteMethod&&!this.options[this.hoverIndex]){var e=this.query;this.remoteMethod(e)}},handleQueryChange:function(e){var t=this;if(this.previousQuery!==e&&!this.isOnComposition){if(null===this.previousQuery&&("function"===typeof this.filterMethod||"function"===typeof this.remoteMethod))return this.hoverIndex=-1,void(this.previousQuery=e);this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?this.hoverIndex=-1:"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}}},oo=to,ao=Object(H["a"])(oo,T,$,!1,null,null,null),io=ao.exports,so={props:{},data:function(){return{mapDialogVisible:!1,noDataText:"按下Enter查詢",searchChange:!1,searchByClick:!1,searchVal:null,mapSelectLatlng:null,mapSelect:null,mapInfo:{},mapSelections:[],marker:null}},computed:{searchMapConfig:function(){return Object(p["a"])(Object(p["a"])({},eo),{},{clickableIcons:!1,streetViewControl:!1,fullscreenControl:!1,center:{lat:25.033976,lng:121.5645389}})}},components:{GoogleMapLoader:Yt,customSelect:io},methods:{openMapDialog:function(){this.mapDialogVisible=!0},updateClick:function(e){this.placeMarker(e.latLng,this.$refs.mapLoader.map),this.latLngToAddress(e.latLng),this.searchByClick=!0,bt()("#map-select").focus()},mapSelectionOn:function(e){this.mapInfo=e,this.$refs.mapLoader.map.panTo(e.geometry.location),this.placeMarker(e.geometry.location,this.$refs.mapLoader.map,this.searchByClick)},addressToGocode:function(e){var t=this;this.mapSelections=null,this.searchByClick=!1;var o=e;if(""==o||o==this.searchVal)return this.noDataText="按下Enter查詢",void(this.searchChange=!1);this.searchVal=o;var a=this;this.$refs.mapLoader.geocoder.geocode({address:a.searchVal},(function(e,o){if("OK"===o){for(var i=[],s=0;s<e.length;s++)i.push(e[s]);a.mapSelections=i}else console.log("not OK",e,o),0==e.length&&(t.noDataText="查無地址")}))},latLngToAddress:function(e){var t=this;this.$refs.mapLoader.geocoder.geocode({location:e},(function(e,o){if("OK"===o){console.log("OK",e);for(var a=[],i=0;i<e.length/4;i++)a.push(e[i]);t.mapSelections=a}}))},placeMarker:function(e,t){var o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;this.marker&&this.removeMarkers(),a?(o=new this.$refs.mapLoader.google.maps.Marker({position:e,map:t,animation:i.$refs.mapLoader.google.maps.Animation.BOUNCE}),this.searchByClick=!1):o=new this.$refs.mapLoader.google.maps.Marker({position:e,map:t,animation:i.$refs.mapLoader.google.maps.Animation.DROP}),this.marker=o},removeMarkers:function(){this.marker.setMap(null)}}},no=so,ro=(o("806a"),Object(H["a"])(no,Jt,Zt,!1,null,"5bce3270",null)),lo=ro.exports,co=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:8}},[o("el-col",{attrs:{xs:24,sm:24}},[o("el-card",{staticClass:"image-card",attrs:{shadow:"hover"}},[o("template",{slot:"header"},[o("span",{staticClass:"el-form-item__label"},[e._v(" 預覽照片 ")]),o("el-button",{staticClass:"cover-img-input-trigger",staticStyle:{margin:"auto 0"},attrs:{icon:"el-icon-upload",size:"small"},on:{click:function(t){return e.$refs.photoImgs.click()}}},[e._v("上傳")])],1),o("el-row",{attrs:{gutter:8}},[e._l(e.photoSrc.normalImgs,(function(t,a){return o("el-col",{key:t.id,attrs:{xs:12,sm:6}},[o("EditImage",{attrs:{uploading:t.uploading,imgSrc:t.url,previewSrcList:e.imgPrewviewSrcList},on:{delete:function(t){return e.removeImg(a,"normalImg")}}})],1)})),e.photoSrc.normalImgs&&e.photoSrc.normalImgs.length<1?o("el-col",{staticStyle:{color:"#C0C4CC","text-align":"center",padding:"10%"},attrs:{span:24}},[e._v(" 尚無上傳預覽照片 ")]):e._e()],2)],2),o("el-card",{staticClass:"image-card",attrs:{shadow:"hover"}},[o("template",{slot:"header"},[o("span",{staticClass:"el-form-item__label"},[e._v(" 全景圖 ")]),o("el-button",{staticClass:"cover-img-input-trigger",staticStyle:{"margin-left":"5px"},attrs:{icon:"el-icon-upload",size:"small"},on:{click:function(t){return e.$refs.panoImgs.click()}}},[e._v("上傳")])],1),o("el-row",{attrs:{gutter:8}},[e._l(e.photoSrc.panoramas,(function(t,a){return o("el-col",{key:t.id,attrs:{xs:12,sm:8}},[o("EditImage",{attrs:{panoramas:!0,panoramasData:t.uploading?{}:t.data,uploading:t.uploading,imgSrc:t.data.display_url},on:{delete:function(t){return e.removeImg(a,"panoramas")}}})],1)})),!e.photoSrc.panoramas||e.photoSrc.panoramas.length<1?o("el-col",{staticStyle:{color:"#C0C4CC","text-align":"center",padding:"10%"},attrs:{span:24}},[e._v(" 尚無上傳全景圖 ")]):e._e()],2)],2)],1),o("div",{staticStyle:{display:"none"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.photoSrc.coverUrl,expression:"photoSrc.coverUrl"}],attrs:{type:"text",id:"image"},domProps:{value:e.photoSrc.coverUrl},on:{input:function(t){t.target.composing||e.$set(e.photoSrc,"coverUrl",t.target.value)}}}),o("input",{ref:"photoImgs",attrs:{type:"file",id:"customFile"},on:{change:e.uploadFile}}),o("input",{ref:"panoImgs",attrs:{type:"file",id:"panoFile"},on:{change:e.uploadPano}})])],1)},uo=[],po=(o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"img-container",on:{mouseenter:function(t){return t.target!==t.currentTarget?null:e.hoverHandler(!0)},mouseleave:function(t){return t.target!==t.currentTarget?null:e.hoverHandler(!1)}}},[o("CustomImage",{class:{hover:e.hover},staticStyle:{width:"100%",height:"100%"},attrs:{src:e.imgSrc,fit:"cover","preview-src-list":e.previewSrcList,previewListVisible:!e.panoramas&&e.previewVisible},on:{closeViewer:function(t){e.previewVisible=!1}}},[e.uploading?o("div",{staticClass:"uploading-slot",attrs:{slot:"uploading"},slot:"uploading"},[o("div",{staticClass:"state-container"},[o("i",{staticClass:"el-icon-loading"}),o("span",[e._v("上傳中")])])]):e._e(),o("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[o("i",{staticClass:"el-icon-loading"})]),o("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-warning-outline"}),o("div",{staticStyle:{"font-size":"14px",position:"absolute",left:"50%",transform:"translateX(-50%)"}},[e._v(" 無法讀取圖片 ")])])]),e.uploading?e._e():o("div",{staticClass:"btn-wrapper"},[o("el-popconfirm",{attrs:{title:"確定刪除此照片嗎?",placement:"right-start",confirmButtonText:"確定",cancelButtonText:"取消",cancelButtonType:"Text",hideIcon:!0},on:{onConfirm:e.deleteHandler}},[o("div",{attrs:{slot:"reference"},slot:"reference"},[o("transition",{attrs:{name:"el-fade-in"}},[e.hover?o("el-button",{attrs:{icon:"el-icon-delete",size:"mini",plain:""}}):e._e()],1)],1)]),o("div",{attrs:{slot:"reference"},slot:"reference"},[o("transition",{attrs:{name:"el-fade-in"}},[e.hover?o("el-button",{attrs:{icon:"el-icon-view",size:"mini",plain:""},on:{click:function(t){e.previewVisible=!0,e.hover=!1}}}):e._e()],1)],1)],1),e.panoramas&&e.previewVisible?o("PanoDialog",{attrs:{src:e.panoramasData.image.url,placeHolderSrc:e.imgSrc,visible:e.previewVisible},on:{closeDialog:e.closePreview}}):e._e()],1)}),mo=[],ho=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[o("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[o("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):o("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e._t("uploading",[o("div",{staticClass:"el-image__placeholder"})]),e.preview?[e.showViewer?o("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)},fo=[],go="",vo={extends:u["Image"],props:{previewListVisible:Boolean},watch:{previewListVisible:function(e){this.showViewer=e,e&&(go=document.body.style.overflow,document.body.style.overflow="hidden")}},methods:{clickHandler:function(){this.preview},closeViewer:function(){document.body.style.overflow=go,this.$emit("closeViewer",!1)}}},bo=vo,yo=(o("0de0"),Object(H["a"])(bo,ho,fo,!1,null,"14256ae4",null)),_o=yo.exports,wo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"preview-dialog",attrs:{"lock-scroll":!0,fullscreen:!0,visible:e.visible,width:"100%",center:!0},on:{close:e.closeDialog}},[o("VuePannellum",{staticStyle:{height:"100vh"},attrs:{src:e.src,preview:e.placeHolderSrc,showFullscreen:!0,autoRotate:!0}})],1)},So=[],Co=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vue-pannellum",on:{mouseup:e.onMouseUp,touchmove:e.onTouchMove,touchend:e.onTouchEnd}},[o("div",{ref:"panoRef",staticClass:"default-slot"},[e._t("default")],2)])},Po=[],To=(o("f55b"),o("82f4"),o("2702"),o("f7fe")),$o=o.n(To),Lo={props:{debug:{type:Boolean,default:!1},src:{type:[String,Object],required:!0},preview:{type:String,default:""},autoLoad:{type:Boolean,default:!0},autoRotate:{type:[Number,Boolean],default:0},orientation:{type:Boolean,default:!1},showZoom:{type:Boolean,default:!1},showFullscreen:{type:Boolean,default:!1},compass:{type:Boolean,default:!1},hotSpots:{type:Array,default:function(){return[]}},hfov:{type:Number,default:120},minHfov:{type:Number,default:30},maxHfov:{type:Number,default:120},yaw:{type:Number,default:0},pitch:{type:Number,default:0},panoList:{type:Array,default:function(){return[]}}},data:function(){return{viewer:null,info:"",rafId:-1}},computed:{srcOption:function(){return"string"===typeof this.src?{panorama:this.src}:{cubeMap:[this.src.pz,this.src.px,this.src.nz,this.src.nx,this.src.py,this.src.ny]}}},watch:{src:function(e){this.$el.innerHTML="",this.$nextTick(this.load)},hfov:function(e){this.viewer&&this.viewer.setHfov(e,!1)},yaw:function(e){this.viewer&&this.viewer.setYaw(e,!1)},pitch:function(e){this.viewer&&this.viewer.setPitch(e,!1)},maxHfov:function(e){this.viewer&&this.viewer.setHfovBounds([this.minHfov,this.maxHfov])},minHfov:function(e){this.viewer&&this.viewer.setHfovBounds([this.minHfov,this.maxHfov])},autoRotate:function(e){e?this.viewer.startAutoRotate():(this.viewer.stopAutoRotate(),this.orientation&&this.viewer.startOrientation())},orientation:function(e){e?this.viewer.startOrientation():(this.viewer.stopOrientation(),this.autoRotate&&this.viewer.startAutoRotate())}},created:function(){},mounted:function(){this.load(),this.rafId=window.requestAnimationFrame(this.loop)},beforeDestroy:function(){this.viewer.destroy(),window.cancelAnimationFrame(this.rafId)},methods:{load:function(){var e=this,t={type:"string"===typeof this.src?"equirectangular":"cubemap",autoLoad:this.autoLoad,autoRotate:!0===this.autoRotate?-2:0,orientationOnByDefault:this.orientation,compass:this.compass,hotSpots:this.hotSpots,preview:this.preview,hfov:this.hfov,yaw:this.yaw,pitch:this.pitch,minHfov:this.minHfov,maxHfov:this.maxHfov};if(Object.assign(t,this.srcOption),this.viewer=window.pannellum.viewer(this.$el,t),this.$el.appendChild(this.$refs.panoRef),this.viewer.on("load",(function(){e.$emit("load")})),this.viewer.on("error",(function(t){e.$emit("error",t)})),!1===this.showZoom){var o=this.$el.querySelector(".pnlm-zoom-controls");o&&(o.style.display="none")}if(!1===this.showFullscreen){var a=this.$el.querySelector(".pnlm-fullscreen-toggle-button");a&&(a.style.display="none")}},loop:function(){this.rafId=window.requestAnimationFrame(this.loop);var e=this.viewer.getHfov(),t=this.viewer.getYaw(),o=this.viewer.getPitch();o>90?o=90:o<-90&&(o=-90),e!=this.hfov&&this.$emit("update:hfov",e),t!=this.yaw&&this.$emit("update:yaw",t),o!=this.pitch&&this.$emit("update:pitch",o)},onMouseUp:function(){this.debug&&(this.info+=" mu"),this.debounceRotate()},onTouchMove:function(){this.debug&&(this.info+=" tm")},onTouchEnd:function(){this.debug&&(this.info+=" te"),this.debounceRotate()},debounceRotate:$o()((function(){this.orientation?this.viewer.startOrientation():this.autoRotate&&this.viewer.startAutoRotate()}),3e3)}},ko=Lo,Oo=(o("df751"),o("f4bc"),Object(H["a"])(ko,Co,Po,!1,null,"0548e69e",null)),Mo=Oo.exports,Io={props:{src:String,placeHolderSrc:String,visible:Boolean},methods:{closeDialog:function(){this.$emit("closeDialog")}},components:{VuePannellum:Mo}},Ro=Io,xo=(o("cbe3"),Object(H["a"])(Ro,wo,So,!1,null,"4f6c6674",null)),Eo=xo.exports,Do={data:function(){return{hover:!1,previewVisible:!1}},props:{uploading:Boolean,panoramas:Boolean,imgSrc:String,panoramasData:Object,previewSrcList:Array},methods:{closePreview:function(){this.previewVisible=!1},deleteHandler:function(){this.$emit("delete")},hoverHandler:function(e){this.hover=e}},components:{CustomImage:_o,PanoDialog:Eo}},Ao=Do,Bo=(o("db7c"),Object(H["a"])(Ao,po,mo,!1,null,"9f5e782a",null)),No=Bo.exports,jo=(o("b680"),o("466d"),o("5cc6"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),{methods:{checkAndHandleCompression:function(e){var t=this;return new Promise((function(o){t.imgBase64(e,(function(a,i){var s,n,r=15728640,l=e.size;l>r?(s=i.toDataURL(e.type,r/l),n=t.convertBase64UrlToFile(s,e.name)):(s=a.src,n=e);var c=n.size/1024;if(c.toFixed(2)>r)t.checkAndHandleUpload(n);else{var u={uploadSrc:s,uploadFile:n};o(u)}}))}))},imgBase64:function(e,t){if(e&&window.FileReader){var o=new Image;if(o.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d"),i=3e3;o.height>i&&(o.width*=i/o.height,o.height=i),a.clearRect(0,0,e.width,e.height),e.width=o.width,e.height=o.height,a.drawImage(o,0,0,o.width,o.height),t(o,e)},/^image/.test(e.type)){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){o.src=this.result}}}},convertBase64UrlToFile:function(e,t){var o=e.split(","),a=o[0].match(/:(.*?);/)[1],i=atob(o[1]),s=i.length,n=new Uint8Array(s);while(s--)n[s]=i.charCodeAt(s);return new File([n],t,{type:a})}}}),Vo={components:{EditImage:No},mixins:[jo],props:{photoSrc:{type:Object,default:function(){return{normalImgs:[],panoramas:[]}},required:!0},uploadingFile:{type:Number,required:!0}},computed:{imgPrewviewSrcList:function(){var e=this.photoSrc.normalImgs.map((function(e){return e.url}));return e}},created:function(){this.photoSrc.normalImgs||this.$set(this.photoSrc,"normalImgs",[]),this.photoSrc.panoramas||this.$set(this.photoSrc,"panoramas",[])},methods:{notifyMessage:function(e,t,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.$notify({title:e,message:t,type:o,duration:a})},uploadPano:function(){var e=this;return Object(Be["a"])(regeneratorRuntime.mark((function t(){var o,a,i,s,n,r,l,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(d=function(e,t,o){var s=this,n=window.URL||window.webkitURL;i.$http.post(c,e,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.success){var r=i.photoSrc.panoramas.find((function(e){return e.id==t}));r.data=e.data.data,delete r.uploading,n.revokeObjectURL(o),i.clearUploadFileInput(a)}s.$emit("update:uploadingFile",s.uploadingFile-1)}))},e.$emit("update:uploadingFile",e.uploadingFile+1),o=e.$refs.panoImgs.files[0],a=e.$refs.panoImgs.files,void 0!==o){t.next=6;break}return t.abrupt("return");case 6:return i=e,s=function(e){return new Promise((function(t){var o=window.URL||window.webkitURL,a=new Image,i=o.createObjectURL(e);a.src=i,a.onload=function(){t({img:a,objectUrl:i})}}))},t.next=10,s(o);case 10:if(n=t.sent,r=n.img,l=n.objectUrl,r.width==2*r.height){t.next=16;break}return i.notifyMessage("請確認檔案是否為全景圖","全景圖寬高比例應為2:1","warning"),t.abrupt("return");case 16:c="http://localhost:8080/api/https://api.imgbb.com/1/upload?key=dd68d6f707987b863567c93d13c0f472",u=i.$custom.getUuid(),e.checkAndHandleCompression(o).then((function(e){var t=new FormData;t.append("image",e.uploadFile);var o={uploading:!0,id:u,title:"",data:{display_url:l}};i.photoSrc.panoramas.push(o),d(t,u,l)}));case 19:case"end":return t.stop()}}),t)})))()},removeImg:function(e,t){"normalImg"==t?this.photoSrc.normalImgs.splice(e,1):"panoramas"==t&&this.photoSrc.panoramas.splice(e,1)},uploadFile:function(){var e=this;this.$emit("update:uploadingFile",this.uploadingFile+1);var t=this.$refs.photoImgs.files[0],o=this.$refs.photoImgs.files;if(void 0!==t){var a=window.URL||window.webkitURL,i=this.$custom.getUuid(),s=a.createObjectURL(t),n={id:i,uploading:!0,title:"",url:s};this.photoSrc.normalImgs.push(n);var r=new FormData;r.append("file-to-upload",t);var l=this,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/upload");l.$http.post(c,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(t.data.success){var n=e.photoSrc.normalImgs.find((function(e){return e.id==i}));n.url=t.data.imageUrl,delete n.uploading,a.revokeObjectURL(s),l.clearUploadFileInput(o)}else e.$bus.$emit("message:push",t.data.message,"danger");e.$emit("update:uploadingFile",e.uploadingFile-1)}))}},clearUploadFileInput:function(e){e=[],e.type="text",e.type="file"}}},Uo=Vo,Fo=(o("511d"),Object(H["a"])(Uo,co,uo,!1,null,"596e3531",null)),Ho=Fo.exports,Wo={components:{GoogleMapLoader:Yt,SearchAddress:lo,ConfirmPopover:Pt,PhotoUploader:Ho},props:{},data:function(){return{isNew:null,editItem:null,uploadingFile:0,tempProperty:{origin_price:500,price:600,info:{title:"",category:"",description:"",address:"",LatLng:null,mapInfo:{},floorArea:0},photos:{coverUrl:"",normalImgs:[],panoramas:[]},service:{wholeDayCounter:!1,selfCheck:!1,pickUp:!1,luggageDeposit:!1,earlyCheckIn:!1,lostPropertyStorage:!1,parkLot:!1,valetParking:!1},facility:{catering:{restaurant:!1,bar:!1,kitchen:!1},entertainment:{readingRoom:!1,banquetRoom:!1,audiovisualHall:!1,swimmingPoor:!1,publicBathhouse:!1},bussinessLife:{publicComputers:!1,wholeDayWasher:!1,wholeDayDryer:!1,ironingFacility:!1,convenienceStore:!1,meetingRoom:!1}},roomTypes:[]},tempRoom:{bedType:{total:0}},tempRoomInit:{id:"",name:"",type:"",price:0,roomNum:0,pplNum:0,floorArea:0,photos:{normalImgs:[],panoramas:[]},bedType:{single:0,double:0,king:0,floorMattress:0,crib:0,total:0},facilities:{basicFacilities:{independentBathroom:!1,smokingRoom:!1,kitchen:!1,parlor:!1,electronicLock:!1,balcony:!1,window:!1,freeWifi:!1},bedroomFacilities:{safeBox:!1,miniBar:!1,fridge:!1,tv:!1,desk:!1,mirror:!1,lamp:!1,sofa:!1,dryWetDepart:!1},bathroomFacilities:{freeToilet:!1,bathTub:!1,bodyWash:!1,shampoo:!1,toothbrush:!1,toothpaste:!1,bathrobe:!1}}},editPropertyOption:{collapeActiveNames:[],service:[{label:"24小時櫃檯",model:"wholeDayCounter"},{label:"自助入住",model:"selfCheck"},{label:"接送服務",model:"pickUp"},{label:"行李寄放",model:"luggageDeposit"},{label:"提早入住",model:"earlyCheckIn"},{label:"遺失物保管",model:"lostPropertyStorage"},{label:"停車空間",model:"parkLot"},{label:"代客泊車服務",model:"valetParking"}],facility:{catering:[{label:"餐廳",model:"restaurant"},{label:"酒吧",model:"bar"},{label:"自助廚房",model:"kitchen"}],entertainment:[{label:"閱讀室",model:"readingRoom"},{label:"影音廳",model:"audiovisualHall"},{label:"宴客廳",model:"banquetRoom"},{label:"游泳池",model:"swimmingPoor"},{label:"公共澡堂",model:"publicBathhouse"}],bussinessLife:[{label:"會議空間",model:"meetingRoom"},{label:"公用電腦",model:"publicComputers"},{label:"24小時洗衣機",model:"wholeDayWasher"},{label:"24小時烘衣機",model:"wholeDayDryer"},{label:"熨燙衣物設備",model:"ironingFacility"},{label:"24小時商店",model:"convenienceStore"}]}},editRoomTypeOption:{collapeActiveNames:[],bedType:[{label:"單人床",model:"single"},{label:"雙人床",model:"double"},{label:"加大雙人床",model:"king"},{label:"地板床墊",model:"floorMattress"},{label:"嬰兒床",model:"crib"}],basicFacilities:[{label:"獨立衛浴",model:"independentBathroom"},{label:"獨立廚房",model:"kitchen"},{label:"獨立客廳",model:"parlor"},{label:"電子門鎖",model:"electronicLock"},{label:"吸菸房",model:"smokingRoom"},{label:"對外窗",model:"window"},{label:"陽台",model:"balcony"},{label:"免費Wi-Fi",model:"freeWifi"}],bathroomFacilities:[{label:"免治馬桶",model:"freeToilet"},{label:"乾濕分離",model:"dryWetDepart"},{label:"浴缸",model:"bathTub"},{label:"沐浴乳",model:"bodyWash"},{label:"洗髮乳",model:"shampoo"},{label:"牙刷",model:"toothbrush"},{label:"牙膏",model:"toothpaste"},{label:"浴袍",model:"bathrobe"}],bedroomFacilities:[{label:"保險箱",model:"safeBox"},{label:"迷你吧台",model:"miniBar"},{label:"冰箱",model:"fridge"},{label:"電視",model:"tv"},{label:"辦公桌椅",model:"desk"},{label:"鏡子",model:"mirror"},{label:"檯燈",model:"lamp"},{label:"沙發",model:"sofa"}]},noDataText:"按下Enter查詢",searchChange:!1,searchByClick:!1,searchVal:null,mapSelectLatlng:null,mapSelect:null,mapSelections:[],marker:null,mapDialogVisible:!1,tabActiveName:"info",state:{uploadingProperty:!1,editRoomType:!1,updateRoomType:!1,createRoomType:!1},displayRoomTypes:null}},computed:Object(p["a"])(Object(p["a"])({},Object(s["d"])("ProductsModules",["products","pagination"])),{},{isLoading:function(){return this.$store.state.isLoading},displayMapConfig:function(){return Object(p["a"])(Object(p["a"])({},eo),{},{zoom:18,gestureHandling:"none",zoomControl:!1,disableDefaultUI:!1,panControlOptions:!1,clickableIcons:!1,streetViewControl:!1,fullscreenControl:!1,center:this.tempProperty.info.LatLng})},imgPrewviewSrcList:function(){var e=this.tempProperty.photos.normalImgs.map((function(e){return e.url}));return e}}),watch:{"tempRoom.bedType":{handler:function(e,t){var o=Object.values(e).reduce((function(e,t){return e+t}))-t.total;this.tempRoom.bedType.total=o},deep:!0},state:{handler:function(){this.$set(this.editRoomTypeOption,"collapeActiveNames",[])},immediate:!0},tabActiveName:{handler:function(){this.handleCancelCreateRoomType()}},tempRoom:{handler:function(e){e.photos||this.$set(this.tempRoom,"photos",{})},immediate:!0}},methods:Object(p["a"])(Object(p["a"])({},Object(s["b"])("ProductsModules",["getProducts"])),{},{handleCancelCreateRoomType:function(){this.state.editRoomType=!1,this.tempRoom=JSON.parse(JSON.stringify(this.tempRoomInit))},formatter:function(e){return this.$options.filters.currency(e.price)},roomTypeFormatter:function(e){return this.$t("roomTypeCategory.".concat(e.type))},updateProduct:function(){var e=this;if(this.uploadingFile>0)this.notifyMessage("","仍有檔案上傳中，請待上傳完成後再儲存","warning");else{this.$store.dispatch("updateLoading",!0);var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product"),o=this,a="post";this.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/product/").concat(this.tempProperty.id),a="put"),this.state.uploadingProperty=!0,this.$http[a](t,{data:o.tempProperty}).then((function(t){t.data.success?(e.$message({showClose:!0,center:!0,type:"success",message:t.data.message}),e.$router.push({name:"Products"}).catch((function(e){console.log(e)}))):e.$message({showClose:!0,center:!0,type:"danger",message:t.data.message})}))}},editRoomType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.editRoomType=!0,e?(this.state.createRoomType=!1,this.tempRoom=JSON.parse(JSON.stringify(e))):(this.state.createRoomType=!0,this.tempRoom=JSON.parse(JSON.stringify(this.tempRoomInit)))},duplicateRoomType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=JSON.parse(JSON.stringify(e));t.id=this.$custom.getUuid(),t.name+=" - 複製",this.tempProperty.roomTypes.push(t),this.orderRoomType()},finishEditRoomType:function(){this.uploadingFile>0?this.notifyMessage("","仍有檔案上傳中，請待上傳完成後再儲存","warning"):(this.state.createRoomType?this.addRoomType():this.state.editRoomType&&this.updateRoomType(),this.tempRoom=JSON.parse(JSON.stringify(this.tempRoomInit)),this.state.editRoomType=!1)},addRoomType:function(){this.state.createRoomType=!0,this.tempRoom.id=this.$custom.getUuid(),this.tempProperty.roomTypes||(this.tempProperty.roomTypes=[]),this.tempProperty.roomTypes.unshift(JSON.parse(JSON.stringify(this.tempRoom))),this.orderRoomType(),this.tempRoom=JSON.parse(JSON.stringify(this.tempRoomInit)),this.state.createRoomType=!1},orderRoomType:function(){this.tempProperty.roomTypes=this.$custom.quickSortObj(this.tempProperty.roomTypes,"pplNum")},updateRoomType:function(){var e=this,t=this.tempProperty.roomTypes.find((function(t){return t.id==e.tempRoom.id})),o=this.tempProperty.roomTypes.indexOf(t);this.tempProperty.roomTypes[o]=this.tempRoom},removeRoomType:function(e){this.tempProperty.roomTypes.splice(this.tempProperty.roomTypes.indexOf(e),1)},initState:function(){this.state.editingRoomType=null,this.state.createRoomType=!1,this.state.comfirmDelRoomType=null},saveAddress:function(e){this.tempProperty.info.mapInfo=e,this.tempProperty.info.LatLng=e.geometry.location,this.tempProperty.info.address=e.formatted_address,this.tempProperty.info.mapInfo.shortAddress="".concat(e.address_components[e.address_components.length-4].long_name,", ").concat(e.address_components[e.address_components.length-3].long_name)},validNotify:function(e){var t=this;if(e)var o=setInterval((function(){var e=t.$refs.validObserver.errors,a=[];for(var i in e)e[i].length>0&&a.push(e[i][0].split(" ")[0]);if(a.length<1)clearInterval(o);else{var s=a.join("、");t.notifyMessage("請確認以下資料皆填妥",s,"warning"),clearInterval(o)}}),100)},notifyMessage:function(e,t,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.$notify({title:e,message:t,type:o,duration:a})}}),created:function(){this.isNew=this.$route.params.isNew,this.editItem=this.$route.params.editItem?this.$route.params.editItem:null,this.isNew||this.editItem||this.$router.push({name:"Products"}).catch((function(e){console.log(e)})),this.editItem&&(this.editItem.photos.panoramas||(this.editItem.photos.panoramas=[]),this.editItem.photos.normalImgs||(this.editItem.photos.normalImgs=[]),this.tempProperty=JSON.parse(JSON.stringify(this.editItem)))}},zo=Wo,qo=(o("1b40"),Object(H["a"])(zo,Ut,Ft,!1,null,"dfaa2374",null)),Go=qo.exports,Ko=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{ref:"mainContainer"},[o("el-header",{class:{init:0===e.scrollY,"homepage-nav":"homePage"==e.$route.name},attrs:{height:"80px"}},[o("Navbar",{attrs:{stage:"front"}})],1),o("keep-alive",[o("router-view")],1)],1)},Qo=[],Yo={components:{Navbar:it},data:function(){return{scrollY:0}},watch:{"$route.name":{handler:function(e){"homePage"==e&&window.addEventListener("scroll",this.updateScroll)},immediate:!0}},computed:Object(p["a"])({},Object(s["d"])("UIModules",["datePickBtnShow"])),methods:{updateScroll:function(){this.scrollY=window.scrollY},handleDatePickerClose:function(){this.$store.commit("UIModules/SET_DATEPICKER_CLOSE_BUTTON",!0),this.$bus.$emit("datePickerClose")}},created:function(){},mounted:function(){},beforeDestroy:function(){this.$refs.mainContainer.$el.removeEventListener("scroll",this.updateScroll)}},Jo=Yo,Zo=(o("4247"),o("6cfe"),Object(H["a"])(Jo,Ko,Qo,!1,null,"61adb33c",null)),Xo=Zo.exports,ea=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-top":"80px"}},[o("div",{staticClass:"page-container"},[o("div",{staticClass:"welcome-title"},[e._v(e._s(e.$t("homePage.welcomeTitle")))]),o("SearchBar",{ref:"searchBar",attrs:{large:!0,stage:"front"}}),o("section",[o("header",[e._v(e._s(e.$t("homePage.carousel.carouselTitle")))]),o("ul",{ref:"carousel",staticClass:"carousel"},[o("li",{staticClass:"card-wrapper"},[o("a",{attrs:{href:"javascript:;"}},[o("div",{staticClass:"card"},[e._m(0),o("div",{staticClass:"text-area-wrapper"},[o("div",{staticClass:"text-area"},[o("header",[e._v(e._s(e.$t("homePage.carousel.joinWorldTitle")))]),o("div",{staticClass:"sub-title"},[e._v(" "+e._s(e.$t("homePage.carousel.joinWorldDescription"))+" ")])])])])])]),o("li",{staticClass:"card-wrapper"},[o("a",{attrs:{href:"javascript:;"}},[o("div",{staticClass:"card"},[e._m(1),o("div",{staticClass:"text-area-wrapper"},[o("div",{staticClass:"text-area"},[o("header",[e._v(e._s(e.$t("homePage.carousel.onlineExpTitle")))]),o("div",{staticClass:"sub-title"},[e._v(" "+e._s(e.$t("homePage.carousel.onlineExpDescription"))+" ")])])])])])]),o("li",{staticClass:"card-wrapper"},[o("a",{attrs:{href:"javascript:;"}},[o("div",{staticClass:"card"},[e._m(2),o("div",{staticClass:"text-area-wrapper"},[o("div",{staticClass:"text-area"},[o("header",[e._v(e._s(e.$t("homePage.carousel.featuredContentTitle")))]),o("div",{staticClass:"sub-title"},[e._v(" "+e._s(e.$t("homePage.carousel.featuredContentDescription"))+" ")])])])])])])])])],1),o("Footer")],1)},ta=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-wrapper"},[a("img",{attrs:{src:o("6cb4"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-wrapper"},[a("img",{attrs:{src:o("e146"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-wrapper"},[a("img",{attrs:{src:o("cff6"),alt:""}})])}],oa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("footer",[o("div",{staticClass:"list-wrapper"},[o("section",[o("header",[e._v(e._s(e.$t("footer.about")))]),o("ul",[o("li",[e._v(e._s(e.$t("footer.tarokoCulture")))]),o("li",[e._v(e._s(e.$t("footer.newsRoom")))])])]),o("section",[o("header",[e._v(e._s(e.$t("footer.partner")))]),o("ul",[o("li",[e._v(e._s(e.$t("footer.hostProperty")))]),o("li",[e._v(e._s(e.$t("footer.businessPartner")))])])]),o("section",[o("header",[e._v(e._s(e.$t("footer.community")))]),o("ul",[o("li",[e._v(e._s(e.$t("footer.activity")))]),o("li",[e._v(e._s(e.$t("footer.article")))])])]),o("section",[o("header",[e._v(e._s(e.$t("footer.support")))]),o("ul",[o("li",[e._v(e._s(e.$t("footer.helpCenter")))])])])]),e._m(0)])},aa=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bottom-note"},[o("span",[e._v("© 2020 Taroko prototype by William. All rights reserved")])])}],ia={},sa=ia,na=(o("d3e0"),Object(H["a"])(sa,oa,aa,!1,null,null,null)),ra=na.exports,la={components:{SearchBar:Fe,Footer:ra},methods:{handleScroll:function(){this.handleSearchBarVisible()},handleSearchBarVisible:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e)return console.log("handleSearchBarVisible",!1),void this.$store.commit("UIModules/SHOW_SEARCHBAR",!1);window.scrollY>this.$refs.searchBar.$el.offsetTop-15?this.$store.commit("UIModules/SHOW_SEARCHBAR",!0):this.$store.commit("UIModules/SHOW_SEARCHBAR",!1)}},watch:{$route:{handler:function(e){"homePage"==e.name&&this.handleSearchBarVisible(!1)}}},created:function(){window.addEventListener("scroll",this.handleScroll)},mounted:function(){this.handleSearchBarVisible()},beforeDestroy:function(){this.handleSearchBarVisible(!1),window.removeEventListener("scroll",this.handleScroll)}},ca=la,ua=(o("11fc"),Object(H["a"])(ca,ea,ta,!1,null,"55eafb35",null)),da=ua.exports,pa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{ref:"container"},[o("keep-alive",[e.asideVisible&&("search"!=e.mapPageMode||e.searchKey)?o("el-aside",{ref:"mapAside",class:{hideOverflow:e.showPhotoViewer||e.showPanoViewer},attrs:{width:1==e._windowSize.mapPointLg.larger?e.mapProduct.select?"1000px":"800px":"100%"}},[e.mapProduct.select?e._e():o("MapProducts"),e.mapProduct.select?o("MapProduct",{staticClass:"mapProduct"}):e._e()],1):e._e()],1),o("el-main",[o("SearchResultMap")],1),e._windowSize.mapPointLg.larger||"search"!=e.mapPageMode||e.searchKey||e._windowSize.mapPointLg.larger&&!e.asideVisible?o("MapSwitchButton"):e._e()],1)},ma=[],ha=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isMapAlive?o("GoogleMapLoader",{ref:"mapLoader",staticClass:"map",attrs:{initGeolocation:!1,mapConfig:e.mapConfig},on:{"update:center":e.updateCenter,"update:bounds":e.updateBounds,"update:zoom":e.updateZoom,idle:e.handleIdle,mapLoaded:e.handleMapLoaded},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.google,i=t.map;return[e._l(e.paginatedStaySource[e.currentPage-1],(function(t){return o("GoogleMapPopup",{key:"search"==e.$route.name?"searchPopup-"+(t.id+e.searchKey):"wishList"==e.$route.name?"wishListPopup-"+(t.id+e.searchKey):"popup-"+(t.id+e.searchKey),staticClass:"popup-bubble-content",class:{selected:t==e.$store.state.MapModules.mapProduct.select,hover:t==e.$store.state.MapModules.mapProduct.hover&&e.$store.state.MapModules.mapProduct.hoverClass},attrs:{google:a,map:i,item:t},nativeOn:{click:function(o){return e.popupClicked(t)},mouseenter:function(o){return e.hoverProduct(t)},mouseleave:function(o){return e.hoverProduct(t)}}})})),o("GoogleMapControl",{ref:"searchControlRef",class:{"fade-out":!e.SearchControlTimer,hide:!e.showSearchControl||"wishList"==e.$route.name||e.mapProduct.select},attrs:{google:a,map:i,wait:!e.SearchControlTimer},nativeOn:{click:function(t){return e.SearchControlEvent(t)}}})]}}],null,!1,1837083426)}):e._e()},fa=[],ga=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{ref:"googleMap",staticClass:"google-map"}),Boolean(this.google)&&Boolean(this.map)?[e._t("default",null,{google:e.google,map:e.map})]:e._e()],2)},va=[],ba={props:{mapConfig:Object,setMarker:Object,initGeolocation:{type:Boolean,default:!1},searchControl:{type:Boolean,default:!1}},data:function(){return{marker:null,google:null,map:null,geocoder:null,latLngBounds:null,pos:null}},mounted:function(){var e=this;return Object(Be["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.MapModules.google){t.next=3;break}return t.next=3,e.$store.dispatch("MapModules/setGoogleAPI");case 3:e.google=e.$store.state.MapModules.google,e.geocoder=e.$store.state.MapModules.geocoder,e.initializeMap(),e.$nextTick((function(){}));case 7:case"end":return t.stop()}}),t)})))()},watch:{setMarker:function(){this.placeMarker(this.setMarker),this.setMapCenter(this.setMarker)}},methods:{removeDefaultClass:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;document.getElementsByClassName("gm-style")[0]?document.getElementsByClassName("gm-style")[0].className="":setTimeout((function(){t+=1,t>30||e.removeDefaultClass(t)}),0+60*t)},initializeMap:function(){var e=this;return Object(Be["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.$refs.googleMap,t.next=3,new e.google.maps.Map(o,e.mapConfig);case 3:e.map=t.sent,e.$emit("mapLoaded"),e.addListeners(),e.getGeolocation(),e.setMarker&&e.placeMarker(e.setMarker),e.$bus.$emit("mapLoaded"),e.$store.commit("COUNT_LOADING",-1);case 10:case"end":return t.stop()}}),t)})))()},setMapCenter:function(e){this.map.setCenter(e)},placeMarker:function(e){this.marker&&this.removeMarkers();var t=new this.google.maps.Marker({position:e,map:this.map,animation:this.google.maps.Animation.DROP});this.marker=t},removeMarkers:function(){this.marker.setMap(null)},getGeolocation:function(){var e=this,t=new e.google.maps.InfoWindow;function o(e,t,o){t.setPosition(o),t.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.pos={lat:t.coords.latitude,lng:t.coords.longitude};var o=new e.google.maps.Marker({position:e.pos,icon:{url:"images/dot.svg",scaledSize:new e.google.maps.Size(30,30),origin:new e.google.maps.Point(0,0),anchor:new e.google.maps.Point(15,15)},title:e.$t("map.yourLocation")}),a=new e.google.maps.InfoWindow({content:e.$t("map.yourLocation")});a.setZIndex(401),o.addListener("mouseover",(function(){a.open(e.map,o),document.getElementsByClassName("gm-style-iw")[0]&&(document.getElementsByClassName("gm-style-iw")[0].getElementsByClassName("gm-ui-hover-effect")[0].style.display="none")})),o.addListener("mouseout",(function(){a.close()})),o.setMap(e.map),e.initGeolocation&&(e.map.setCenter(e.pos),e.map.setZoom(16))}),(function(){o(!0,t,e.map.getCenter())})):o(!1,t,e.map.getCenter())},addListeners:function(){var e=this;this.map.addListener("click",(function(t){e.$emit("update:click",t)})),this.map.addListener("center_changed",(function(){var t={lat:e.map.getCenter().lat(),lng:e.map.getCenter().lng()};e.$emit("update:center",t)})),this.map.addListener("bounds_changed",(function(){var t=e.map.getBounds();e.$emit("update:bounds",t)})),this.map.addListener("zoom_changed",(function(){var t=e.map.getZoom();e.$emit("update:zoom",t)})),this.map.addListener("idle",(function(){e.$emit("idle")}))}},created:function(){this.$store.commit("COUNT_LOADING",1)},beforeDestroy:function(){this.google.maps.event.clearInstanceListeners(this.map)}},ya=ba,_a=(o("99f8"),Object(H["a"])(ya,ga,va,!1,null,"2481c514",null)),wa=_a.exports,Sa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"popUpRef",staticClass:"search-popup",on:{click:e.clicked}},[e._v(" "+e._s(e._f("currency")(e.item.computedResult.sortedPrices[0]))+" ")])},Ca=[],Pa=(o("18a5"),{props:{google:{type:Object,required:!0},map:{type:Object,required:!0},item:{type:Object,required:!0}},data:function(){return{popup:"",Popup:""}},computed:{},methods:{clicked:function(){this.$emit("click")},definePopupClass:function(){this.Popup=function(e,t){this.position=e,t.classList.add("popup-bubble-content");var o=document.createElement("div");o.classList.add("popup-bubble-anchor"),o.appendChild(t),this.anchor=document.createElement("div"),this.anchor.classList.add("popup-tip-anchor"),this.anchor.appendChild(o)},this.Popup.prototype=Object.create(this.google.maps.OverlayView.prototype),this.Popup.prototype.onAdd=function(){this.getPanes().floatPane.appendChild(this.anchor)},this.Popup.prototype.onRemove=function(){this.anchor.parentElement&&this.anchor.parentElement.removeChild(this.anchor)},this.Popup.prototype.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(this.position),t=Math.abs(e.x)<4e3&&Math.abs(e.y)<4e3?"block":"none";"block"===t&&(this.anchor.style.left=e.x+"px",this.anchor.style.top=e.y+"px"),this.anchor.style.display!==t&&(this.anchor.style.display=t)}}},mounted:function(){var e=this;this.$nextTick((function(){e.definePopupClass(),e.popup=new e.Popup(new e.google.maps.LatLng(e.item.info.LatLng.lat,e.item.info.LatLng.lng),e.$refs.popUpRef),e.popup.setMap(e.map)}))},beforeDestroy:function(){this.popup.onRemove()}}),Ta=Pa,$a=(o("0c11"),Object(H["a"])(Ta,Sa,Ca,!1,null,null,null)),La=$a.exports,ka=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"gm-control",on:{mouseenter:function(t){return e.handleHover(!0)},mouseleave:function(t){return e.handleHover(!1)}}},[o("div",{staticClass:"search-control"},[o("div",[o("i",{staticClass:"el-icon-search"}),e.hover||!e.wait?o("span",[e._v(" "+e._s(e.$t("map.searchByArea")))]):e._e()])])])},Oa=[],Ma={data:function(){return{hover:!1}},props:{wait:{type:Boolean,default:!1},google:{type:Object,required:!0},map:{type:Object,required:!0}},methods:{handleHover:function(e){this.hover=e,this.$store.dispatch("MapModules/setControlVisibleTimer")},creactCustomControl:function(){var e=this,t=document.getElementsByClassName("gm-control")[0];setTimeout((function(){e.map.controls[e.google.maps.ControlPosition.TOP_CENTER].push(t)}),1500)}},mounted:function(){var e=this;this.$nextTick((function(){e.creactCustomControl()}))}},Ia=Ma,Ra=Object(H["a"])(Ia,ka,Oa,!1,null,null,null),xa=Ra.exports,Ea={data:function(){return{center:null,bounds:null,zoom:null,mapLoaded:!1,isMapAlive:!0,popupRefreash:!0}},components:{GoogleMapLoader:wa,GoogleMapControl:xa,GoogleMapPopup:La},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["c"])(["propertySource","paginatedStaySource"])),Object(s["d"])("MapModules",{google:function(e){return e.google},mapProduct:function(e){return e.mapProduct},SearchControlTimer:function(e){return e.SearchControlTimer},showSearchControl:function(e){return e.showSearchControl}})),Object(s["d"])("SearchModules",{filterSearchProducts:function(e){return e.filterSearchProducts},searchFilter:function(e){return e.searchFilter},resultsLatLng:function(e){return e.resultsLatLng},filteredProductsBounds:function(e){return e.filteredProductsBounds},searchBounds:function(e){return e.searchBounds},searchByQuery:function(e){return e.searchByQuery},searchKey:function(e){return e.searchKey}})),Object(s["d"])(["mapPageMode","currentPage"])),Object(s["d"])("WishlistModules",["wishListProducts","wishListProductsBounds"])),{},{mapConfig:function(){return Object(p["a"])(Object(p["a"])({},eo),{},{center:{lat:25.0409201,lng:121.5720055},streetViewControl:!1,fullscreenControl:!1})}}),watch:{"mapProduct.select":function(e){e&&!this.mapProduct.selectByMap&&(this.$refs.mapLoader.map.fitBounds(e.info.mapInfo.geometry.viewport),this.addTempListener(this.controlFadeOut))},"searchFilter.location.mapInfo.geometry.viewport":{handler:function(e){this.searchFilter.location&&(this.addTempListener(this.controlHide),this.setViewport(e,this.searchFilter.location.mapInfo.geometry.location))},deep:!0},resultsLatLng:function(e){if(!(e.length<1)){for(var t=new this.$refs.mapLoader.google.maps.LatLngBounds,o=0;o<e.length;o++)t.extend(e[o]);this.$store.commit("SearchModules/SAVE_FILTERED_PRODUCTS_BOUNDS",t)}},"searchFilter.pplNum":function(){this.$store.dispatch("MapModules/setControlVisibleTimer"),this.$store.dispatch("MapModules/handleSearchControl",!0)},wishListProductsBounds:function(){"wishList"==this.$route.name&&this.wishListProductsBounds&&this.$refs.mapLoader.map.fitBounds(this.wishListProductsBounds)},searchByQuery:{handler:function(e){var t=this;e.bounds&&(this.$store.dispatch("SearchModules/filterSearchProducts",{searchByQuery:!0,searchType:"query",searchByMap:"true"==e.routeQuery.search_by_map,bounds:e.bounds}),this.addTempListener((function(){setTimeout((function(){t.$refs.mapLoader.map.fitBounds(e.bounds,0)}),1500)})))}},"$route.name":function(e){"search"==e&&this.searchBounds&&this.$refs.mapLoader.map.fitBounds(this.searchBounds,0)}},methods:{addTempListener:function(e){var t=this,o=this.$refs.mapLoader.google.maps.event.addListener(this.$refs.mapLoader.map,"idle",(function(){e(),t.$refs.mapLoader.google.maps.event.removeListener(o)}))},controlFadeOut:function(){this.$store.dispatch("MapModules/handleSearchControl",!1)},controlHide:function(){this.$store.dispatch("MapModules/handleSearchControl",!1)},setViewport:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&this.$refs.mapLoader.map.setCenter(t),this.$refs.mapLoader.map.fitBounds(e);var o=this.$refs.mapLoader.map.getZoom();this.$refs.mapLoader.map.setZoom(o+.8)},handleIdle:function(){},hoverProduct:function(e){if(e!=this.$store.state.MapModules.mapProduct.hover)return this.$store.dispatch("MapModules/hoverMapProduct",{product:e,hoverClass:!1}),void this.$store.dispatch("MapModules/scrollToMapProduct",e.id);this.$store.dispatch("MapModules/hoverMapProduct",{product:null,hoverClass:!1})},SearchControlEvent:function(){var e=Object.keys(this.bounds);this.$store.dispatch("MapModules/handleSearchControl",!1);var t={search_by_map:!0,search_bounds_s:this.bounds[e[1]].i,search_bounds_e:this.bounds[e[0]].i,search_bounds_n:this.bounds[e[1]].j,search_bounds_w:this.bounds[e[0]].j,guest_number:this.searchFilter.pplNum};this.searchFilter.date&&(t.startDate=this.searchFilter.date[0],t.endDate=this.searchFilter.date[1]),this.$router.replace({query:t}),this.$store.commit("SearchModules/SET_SEARCH_QUERY",t),this.$store.dispatch("SearchModules/filterSearchProducts",{searchByMap:!0,searchType:"map"}),this.$store.dispatch("SearchModules/passSearchLocation",null),this.$store.dispatch("MapModules/removeMapProduct")},latLngToAddress:function(e){var t=this;this.$refs.mapLoader.geocoder.geocode({location:e},(function(e,o){if("OK"===o){var a=e[e.length-5].address_components,i=a.reduce((function(e,t){var o=Number(t.long_name);return isNaN(o)&&e.push(t.long_name),e}),[]),s=i.reverse().join(",");t.$store.dispatch("MapModules/searchByMapAddress",s)}else console.log("not OK",e)}))},handleBoundChange:function(){this.$store.dispatch("MapModules/handleSearchControl",!0),this.$store.dispatch("MapModules/setControlVisibleTimer")},updateCenter:function(e){this.center=e,this.$store.commit("MapModules/UPDATE_CENTER",e)},updateBounds:function(e){this.bounds=e,this.$store.commit("MapModules/UPDATE_BOUNDS",e),this.handleBoundChange()},updateZoom:function(e){this.zoom=e},popupClicked:function(e){this.$store.dispatch("MapModules/selectMapProduct",[e,!0])},handleMapLoaded:function(){this.mapLoaded=!0}},created:function(){var e=this;this.$bus.$on("backToProductsList",(function(){e.mapProduct.selectByMap||(e.addTempListener(e.controlFadeOut),"wishList"==e.$route.name?e.$refs.mapLoader.map.fitBounds(e.wishListProductsBounds):"search"==e.$route.name&&(e.$refs.mapLoader.map.fitBounds(e.searchBounds,0),e.addTempListener((function(){setTimeout((function(){e.$refs.mapLoader.map.fitBounds(e.searchBounds),e.$refs.mapLoader.map.setZoom(e.zoom+1)}),0)}))))}))},mounted:function(){},beforeDestroy:function(){this.$bus.$off("backToProductsList")}},Da=Ea,Aa=(o("b007"),Object(H["a"])(Da,ha,fa,!1,null,"aea04244",null)),Ba=Aa.exports,Na=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"staysContainer",staticClass:"stays-container",class:{"hover-wrapper":e.hoverWrapper,md:!e._windowSize.mapPointLg.larger}},[o("div",{staticClass:"listHeader"},["wishList"==e.$route.name?[e.staySource.length>0?[o("div",{staticClass:"resultsNum"},[e._v(" "+e._s(e.staySource.length+" "+this.$t("mapList.staysNumber")+" · "+this.$t("mapList.roomTypesNumber",{num:e.wishListRoomTypeNumber}))+" ")]),o("div",{staticClass:"searchRange"},[e._v(" "+e._s(e.$t("mapList.myWishList"))+" ")])]:e._e(),e.staySource.length<1&&!e.isLoading?[o("div",{staticClass:"noResult"},[e._v(" "+e._s(e.$t("mapList.emptyWishList"))+" ")])]:e._e()]:e._e(),"search"==e.$route.name?[e.staySource.length>0?[o("div",{staticClass:"resultsNum"},[e._v(" "+e._s(e.staySource.length+" "+this.$t("mapList.staysNumber")+" · "+this.$t("mapList.roomTypesNumber",{num:e.roomTypeNumber}))+" ")]),o("div",{staticClass:"searchRange"},[e._v(" "+e._s(e.$t("mapList.searchRange",{location:""+(e.searchByMap?e.$t("mapList.designatedArea"):""+(e.searchFilter.location.value?e.searchFilter.location.value:null))}))+" ")])]:e._e(),e.staySource.length<1&&!e.isLoading&&(e.searchFilter.location||e.searchByMap)?[o("div",{staticClass:"noResult"},[e._v(" "+e._s(e.$t("mapList.noMatchStay",{location:""+(e.searchByMap?e.$t("mapList.designatedArea"):""+(e.searchFilter.location?e.searchFilter.location.value:""))}))+" ")])]:e._e()]:e._e()],2),e._l(e.paginatedStaySource[e.currentPage-1],(function(t){return[o("div",{key:e.keyPrefix+"stay-container-"+t.id+e.searchKey,ref:"stay-container-"+t.id,refInFor:!0,staticClass:"stay-container",class:{hover:t==e.$store.state.MapModules.mapProduct.hover},on:{click:function(o){return e.selectProduct(t)},mouseenter:function(o){return e.hoverProduct(t,!0)},mouseleave:function(o){return e.hoverProduct(t,!1)}}},[o("button",{staticClass:"wish-list",attrs:{"aria-label":"add to wish list"},on:{click:function(o){o.stopPropagation(),e.handleWishList(t.id,e.wishList.includes(t.id))}}},[e.wishList.includes(t.id)?e._e():o("i",{staticClass:"far fa-heart"}),e.wishList.includes(t.id)?o("i",{class:{"fas fa-heart":"wishList"!=e.$route.name,"el-icon-delete":"wishList"==e.$route.name}}):e._e()]),o("div",{staticClass:"img-container"},[o("el-carousel",{attrs:{"indicator-position":t.photos.normalImgs.length<2?"none":"",arrow:t.photos.normalImgs.length<2?"never":"hover",autoplay:!1,trigger:"click"}},e._l(t.photos.normalImgs,(function(t){return o("el-carousel-item",{key:e.keyPrefix+"product-image-"+t.id+e.searchKey},[o("keep-alive",[o("el-image",{attrs:{src:t.url,alt:t.title,fit:"cover"}})],1)],1)})),1)],1),o("div",{staticClass:"info-container"},[o("span",{staticClass:"sub-title"},[e._v(" "+e._s(e.$t("mapList.sortDescription",{location:t.info.mapInfo.address_components[t.info.mapInfo.address_components.length-4].long_name,roomCategory:e.$t("stayCategory."+t.info.category)}))+" ")]),o("div",{staticClass:"title"},[e._v(e._s(t.info.title))]),o("div",{staticStyle:{"border-top":"1px solid #DDDDDD",width:"30px","margin-top":"10px"}}),o("ul",{staticClass:"roomType-list"},[t.computedResult.matchRoomTypes.length<4?e._l(t.computedResult.matchRoomTypes,(function(t){return o("li",{key:e.keyPrefix+t.id+e.searchKey},[e._v(" "+e._s(t.name+" · "+e.$t("roomTypeCategory."+t.type)+" · "+(t.pplNum>1?e.$t("mapList.guestsUnit",{num:t.pplNum}):e.$t("mapList.guestUnit",{num:t.pplNum}))+" · "+(t.bedType.total>1?e.$t("mapList.bedsNumberUnit",{num:t.bedType.total}):e.$t("mapList.bedNumberUnit",{num:t.bedType.total}))+" · ")+" "+e._s(e._f("currency")(t.price))+" ")])})):[e._l(t.computedResult.matchRoomTypes.slice(0,3),(function(t){return o("li",{key:e.keyPrefix+t.id+e.searchKey},[e._v(" "+e._s(t.name+" · "+e.$t("roomTypeCategory."+t.type)+" · "+(t.pplNum>1?e.$t("mapList.guestsUnit",{num:t.pplNum}):e.$t("mapList.guestUnit",{num:t.pplNum}))+" · "+(t.bedType.total>1?e.$t("mapList.bedsNumberUnit",{num:t.bedType.total}):e.$t("mapList.bedNumberUnit",{num:t.bedType.total}))+" · ")+" "+e._s(e._f("currency")(t.price))+" ")])})),e._m(0,!0)]],2),o("div",{staticClass:"price"},[o("span",[e._v(e._s("true"==e.$t("mapList.eachNight.before")?e.$t("mapList.eachNight.text"):"")+" "),o("span",{staticClass:"price-bold"},[e._v(" "+e._s(e._f("currency")(t.computedResult.sortedPrices[0],!1))+e._s(t.computedResult.sortedPrices.length>1&&t.computedResult.sortedPrices[0]!=t.computedResult.sortedPrices[t.computedResult.sortedPrices.length-1]?" - ":"")+" "),t.computedResult.sortedPrices.length>1&&t.computedResult.sortedPrices[0]!=t.computedResult.sortedPrices[t.computedResult.sortedPrices.length-1]?o("span",[e._v(" "+e._s(e._f("currency")(t.computedResult.sortedPrices.length>1?t.computedResult.sortedPrices[t.computedResult.sortedPrices.length-1]:"",!1)))]):e._e(),e._v(" TWD")]),e._v(" "+e._s("false"==e.$t("mapList.eachNight.before")?"/ "+e.$t("mapList.eachNight.text"):"")+" ")])])])]),e.paginatedStaySource[e.currentPage-1].length>1?o("el-divider",{key:e.keyPrefix+t.id+"divider"+e.searchKey}):e._e()]})),e.paginatedStaySource.length>1?o("span",{staticClass:"pagination-wrapper",on:{mouseenter:function(t){e.paginationHover=!0},mouseleave:function(t){e.paginationHover=!1}}},[(!e.paginationHover&&e._windowSize.mapPointLg.larger,e._e()),o("el-pagination",{attrs:{"pager-count":5,layout:"prev, pager, next","page-count":e.paginatedStaySource.length,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1):e._e()],2)},ja=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",[o("span",{staticStyle:{"writing-mode":"vertical-rl"}},[e._v("...")])])}],Va={data:function(){return{pageNumber:1,paginationHover:!1}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["c"])(["isLoading","staySource","paginatedStaySource"])),Object(s["d"])("SearchModules",["searchFilter","filterSearchProducts","searchByMap","roomTypeNumber","searchKey"])),Object(s["d"])("MapModules",{google:function(e){return e.google},scrollToId:function(e){return e.mapProduct.scrollToId},bounds:function(e){return e.bounds}})),Object(s["d"])(["mapPageMode","currentPage"])),Object(s["d"])("WishlistModules",["wishList","wishListProducts","wishListRoomTypeNumber"])),Object(s["d"])("UIModules",["_windowSize","asideVisible"])),{},{hoverWrapper:function(){return this.$store.state.MapModules.mapProduct.hover},keyPrefix:function(){return"search"==this.$route.name?"search-":"wishList"==this.$route.name?"wishList-":"general-prefix"}}),watch:{scrollToId:function(e){e&&this.scrollToProduct(e)},"$route.name":function(){this.$parent.$el.scrollTo(0,0)}},methods:{selectProduct:function(e){this.$store.dispatch("MapModules/selectMapProduct",[e,!1])},hoverProduct:function(e,t){e==this.$store.state.MapModules.mapProduct.hover?this.$store.dispatch("MapModules/hoverMapProduct",{product:null,hoverClass:!1}):this.$store.dispatch("MapModules/hoverMapProduct",t?{product:e,hoverClass:!0}:{product:null,hoverClass:t})},scrollToProduct:function(e){if(this.$refs["stay-container-".concat(e)]){var t=this.$refs["stay-container-".concat(e)][0],o=this.$parent.$parent.$parent.$el.clientHeight;this.$refs.staysContainer.clientHeight>o&&this.$parent.$el.scrollTo(0,t.offsetTop-81)}},handleWishList:function(e,t){var o=this;"wishList"==this.$route.name&&t?this.$confirm(this.$t("popconfirm.deleteFromWishList"),{confirmButtonText:this.$t("popconfirm.confirm"),cancelButtonText:this.$t("popconfirm.cancel"),type:"warning"}).then((function(){o.$store.dispatch("WishlistModules/handleWishList",[e,o.$route.name])})):this.$store.dispatch("WishlistModules/handleWishList",[e,this.$route.name])},handlePageChange:function(e){this.$store.commit("CHANGE_PAGE",e)},handleMapVisible:function(){this.$store.commit("UIModules/SET_ASIDE_VISIBLE",!this.asideVisible)}}},Ua=Va,Fa=(o("5f27"),Object(H["a"])(Ua,Na,ja,!1,null,"2559677c",null)),Ha=Fa.exports,Wa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"productContainer",staticClass:"product-container",class:{md:!e._windowSize.lg.larger}},[o("transition",{attrs:{name:"el-fade-in"}},[e.navHalfShow?o("el-button",{staticClass:"fix-top-back-btn",class:{"half-show":e.navHalfShow,"all-show":e.navAllShow},attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[o("i",{staticClass:"el-icon-back"})]):e._e()],1),e.navAllShow?o("div",{staticClass:"product-nav",style:{width:e._windowSize.mapPointLg.larger?"1000px":"100%"}},[o("span",{staticClass:"title"},[e._v(e._s(e.mapProduct.select.info.title))]),o("div",{ref:"subjectListWrapper",staticClass:"sbj-list-wrapper"},[o("div",{staticClass:"sbj-list"},[o("button",{ref:"roomTypeBtn",staticClass:"sbj-btn",class:{view:e.isInRoomTypeView},attrs:{disabled:e.isInRoomTypeView},on:{click:function(t){return e.handleScrollTo("roomType")}}},[e._v(" "+e._s(e.$t("stayPage.roomType"))+" ")]),o("button",{ref:"introBtn",staticClass:"sbj-btn",class:{view:e.isInIntroView},attrs:{disabled:e.isInIntroView},on:{click:function(t){return e.handleScrollTo("intro")}}},[e._v(" "+e._s(e.$t("stayPage.stayIntro",{stayCategory:e.$t("stayCategory."+e.mapProduct.select.info.category)}))+" ")]),o("button",{ref:"serviceBtn",staticClass:"sbj-btn",class:{view:e.isInServiceView},attrs:{disabled:e.isInServiceView},on:{click:function(t){return e.handleScrollTo("service")}}},[e._v(" "+e._s(e.$t("stayPage.facilityService"))+" ")])])]),o("button",{staticClass:"wish-list",attrs:{"aria-label":" add to wish list"},on:{click:function(t){t.stopPropagation(),e.handleWishList(e.mapProduct.select.id,e.wishList.includes(e.mapProduct.select.id))}}},[o("span",[e.wishList.includes(e.mapProduct.select.id)?e._e():o("i",{staticClass:"far fa-heart"}),e.wishList.includes(e.mapProduct.select.id)?o("i",{staticClass:"fas fa-heart"}):e._e()])])]):e._e(),o("div",{ref:"topBackNav"},[o("el-button",{staticClass:"top-back-nav",attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[o("i",{staticClass:"el-icon-back"}),e._v(" "+e._s(e.$t("stayPage.back")))])],1),o("PhotoDisplaySection",{on:{showViewer:function(t){e.showViewer=!0}}}),o("div",{ref:"productHeader",staticClass:"header"},[o("button",{staticClass:"wish-list",attrs:{"aria-label":"add to wish list"},on:{click:function(t){t.stopPropagation(),e.handleWishList(e.mapProduct.select.id,e.wishList.includes(e.mapProduct.select.id))}}},[e.wishList.includes(e.mapProduct.select.id)?e._e():o("i",{staticClass:"far fa-heart"}),e.wishList.includes(e.mapProduct.select.id)?o("i",{staticClass:"fas fa-heart"}):e._e()]),o("div",{staticClass:"sub-title"},[e._v(" "+e._s(e.$t("mapList.sortDescription",{location:e.mapProduct.select.info.mapInfo.address_components[e.mapProduct.select.info.mapInfo.address_components.length-4].long_name,roomCategory:e.$t("stayCategory."+e.mapProduct.select.info.category)}))+" ")]),o("div",{staticClass:"title"},[e._v(e._s(e.mapProduct.select.info.title))]),o("div",{staticClass:"title-divider"}),o("div",{staticClass:"sbj-list-wrapper"},[o("div",{ref:"subjectHeader",staticClass:"sbj-list"},[o("button",{staticClass:"sbj-btn",on:{click:function(t){return e.handleScrollTo("roomType")}}},[e._v(" "+e._s(e.$t("stayPage.roomType"))+" ")]),o("button",{staticClass:"sbj-btn",on:{click:function(t){return e.handleScrollTo("intro")}}},[e._v(" "+e._s(e.$t("stayPage.stayIntro",{stayCategory:e.$t("stayCategory."+e.mapProduct.select.info.category)}))+" ")]),o("button",{staticClass:"sbj-btn",on:{click:function(t){return e.handleScrollTo("service")}}},[e._v(" "+e._s(e.$t("stayPage.facilityService"))+" ")])])])]),o("el-divider",{staticClass:"header-divider"}),o("section",[o("div",{ref:"roomTypeSubject",staticClass:"suject-title room-type-section"},[e._v(" "+e._s(e.$t("stayPage.roomType"))+" "),"search"==e.mapPageMode?o("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:e.handleCommand}},[e.mapProduct.select.computedResult?o("button",{staticClass:"el-dropdown-link"},[e._v(" "+e._s("fitSearch"==e.roomTypeListFilter?e.$t("stayPage.searchResults"):"showAll"==e.roomTypeListFilter?e.$t("stayPage.allRooms"):e.$t("stayPage.searchResults"))+" "),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),e.mapProduct.select.computedResult?o("el-dropdown-menu",{staticClass:"roomtype-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"fitSearch"}},[e._v(e._s(e.$t("stayPage.searchResults")))]),o("el-dropdown-item",{attrs:{command:"showAll"}},[e._v(e._s(e.$t("stayPage.allRooms")))])],1):e._e()],1):e._e()],1),"fitSearch"==e.roomTypeListFilter&&e.mapProduct.select.computedResult?e._l(e.mapProduct.select.computedResult.matchRoomTypes,(function(t,a){return o("roomTypeCard",{key:"roomType-"+t.id,attrs:{roomType:t,index:a,number:e.mapProduct.select.computedResult.matchRoomTypes.length},on:{showDetail:e.handleShowDetail,showReserveModal:e.handleShowReserveModal,mounted:function(t){return e.handleRoomTypeCardMounted("fitSearch")}}})})):e._e(),"showAll"==e.roomTypeListFilter?e._l(e.mapProduct.select.roomTypes,(function(t,a){return o("roomTypeCard",{key:"roomType-"+t.id,attrs:{roomType:t,index:a,number:e.mapProduct.select.roomTypes.length},on:{showDetail:e.handleShowDetail,showReserveModal:e.handleShowReserveModal,mounted:function(t){return e.handleRoomTypeCardMounted("showAll")}}})})):e._e()],2),o("el-divider"),o("section",[o("div",{ref:"introSubject",staticClass:"suject-title"},[e._v(" "+e._s(e.$t("stayPage.stayIntro",{stayCategory:e.$t("stayCategory."+e.mapProduct.select.info.category)}))+" ")]),o("el-card",{staticClass:"product-info-card",attrs:{shadow:"never"}},[o("div",{staticClass:"description-content",domProps:{innerHTML:e._s(e.convertedDescription)}})])],1),o("el-divider"),o("section",[o("div",{ref:"serviceSubject",staticClass:"suject-title"},[e._v(e._s(e.$t("stayPage.facilityService")))]),o("el-card",{staticClass:"stay-facility",attrs:{shadow:"never"}},[o("PropertyFacility",{attrs:{product:e.mapProduct.select}})],1)],1),e.reserveModalVisible?o("Reserve",{attrs:{visible:e.reserveModalVisible},on:{"update:visible":function(t){e.reserveModalVisible=t}}}):e._e(),e._windowSize.lg.larger?e._e():o("RoomTypeDetail",{attrs:{visible:e.detailVisible,detail:e.roomDetail},on:{"update:visible":function(t){e.detailVisible=t}}})],1)},za=[],qa=(o("a4d3"),o("e01a"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"room-type-card",attrs:{shadow:"never"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"image-container"},[o("el-carousel",{attrs:{"indicator-position":e.roomType.photos.normalImgs.length<2?"none":"",arrow:e.roomType.photos.normalImgs.length<2?"never":"hover",autoplay:!1,trigger:"click"}},e._l(e.roomType.photos.normalImgs,(function(t){return o("el-carousel-item",{key:e.keyPrefix+"product-image-"+t.id+e.$custom.getUuid()},[o("el-image",{attrs:{src:t.url,alt:t.title,fit:"cover"}})],1)})),1)],1),o("div",{staticClass:"room-info"},[o("div",{staticClass:"room-header"},[o("div",{staticClass:"left-col"},[o("span",{staticClass:"title"},[e._v(e._s(e.roomType.name))]),e._windowSize.lg.larger?o("br"):e._e(),o("span",{staticClass:"sub-title"},[o("span",[e._v(e._s(e.$t("roomTypeCategory."+e.roomType.type)))]),e._v(" · "),o("span",[o("i",{staticClass:"el-icon-user-solid"}),e._v(" "+e._s(e.roomType.pplNum>1?e.$t("stayPage.guestsUnit",{num:e.roomType.pplNum}):e.$t("stayPage.guestUnit",{num:e.roomType.pplNum})))]),e._v(" · "),o("span",[e._v(" "+e._s(e.roomType.floorArea)+"m²")])])]),o("div",{staticClass:"right-col"},[e._windowSize.lg.larger?e._e():o("span",{staticClass:"facility-detail",on:{click:e.handleMoreInfo}},[e._v("房型設施")]),o("span",{staticClass:"price"},[e._v(e._s(e.$t("stayPage.priceBefore"))+" "+e._s(e._f("currency")(e.roomType.price,!1))+" TWD "+e._s(e.$t("stayPage.priceAfter")))]),o("button",{staticClass:"small-reserve-btn",on:{click:function(t){return e.handleReserve(e.roomType)}}},[e._v(" "+e._s(e.$t("stayPage.reserve"))+" ")])])]),e._windowSize.lg.larger?o("div",{staticClass:"card-title-divider"}):e._e(),e._windowSize.lg.larger?o("div",{ref:"facilitiesContainer",staticClass:"facilities-container",class:{show:e.showAllFacilities}},[o("div",{ref:"facilitiesInnerContainer",staticClass:"facilities-inner-container"},[o("div",{staticClass:"left-col"},[o("div",{staticClass:"bed-type-title"},[e._v(e._s(e.$t("stayPage.bedTypeTitle")))]),o("ul",e._l(e.bedTypes,(function(t){return o("li",{key:t.bedTypeName,staticClass:"bed-type"},[e._v(" "+e._s(t.bedNumber+" "+e.$t("bedType."+t.bedTypeName))+" ")])})),0)]),o("div",{staticClass:"right-col"},[o("div",{ref:"facilitiesGroup",staticClass:"facilities-group"},e._l(e.facilities,(function(t,a){return o("div",{key:a,staticClass:"facilities-subject"},[t.length>0?o("div",{staticClass:"facility-title"},[e._v(" "+e._s(e.$t("stayPage."+(Object.keys(e.facilities),a)))+" ")]):e._e(),o("ul",e._l(e.facilities[(Object.keys(e.facilities),a)],(function(t,a){return o("li",{key:a},[o("span",{staticClass:"collapse-item"},[o("i",{class:t.icon}),e._v(" "+e._s(e.$t("facilitiesSheet."+t.labelKey+".label"))+" ")])])})),0)])})),0)])])]):e._e(),e.facilityContainerHeight<e.facilityInnerContainerHeight&&e._windowSize.lg.larger?o("div",{staticClass:"more"},[o("span",{on:{click:function(t){e.showAllFacilities=!e.showAllFacilities}}},[e._v(e._s(e.showAllFacilities?e.$t("roomTypeCard.collapse"):e.$t("roomTypeCard.showAll")))]),e.showAllFacilities?e._e():o("i",{staticClass:"el-icon-arrow-down"}),e.showAllFacilities?o("i",{staticClass:"el-icon-arrow-up"}):e._e()]):e._e()])]),e.index+1<e.number&&e._windowSize.lg.larger?o("el-divider"):e._e()],1)}),Ga=[],Ka={props:{roomType:{type:Object,required:!0},index:{type:Number,required:!0},number:{type:Number,required:!0}},data:function(){return{collapseActiveNames:null,facilityContainerHeight:null,facilityInnerContainerHeight:null,showAllFacilities:!1}},watch:{"_windowSize.lg.larger":function(e){e&&(this.facilityContainerHeight&&this.facilityInnerContainerHeight||this.checkFacilityContainer())}},computed:Object(p["a"])(Object(p["a"])({},Object(s["d"])("UIModules",["_windowSize"])),{},{facilities:function(){var e=this.roomType.facilities,t=null,o=[],a=[],i=[];for(var s in e.basicFacilities)if(e.basicFacilities[s]){var n={id:this.$custom.getUuid(),icon:this.$t("facilitiesSheet.".concat(s,".icon")),labelKey:s};o.push(n)}for(var r in e.bedroomFacilities)if(e.bedroomFacilities[r]){var l={id:this.$custom.getUuid(),icon:this.$t("facilitiesSheet.".concat(r,".icon")),labelKey:r,value:e.bedroomFacilities[r]};a.push(l)}for(var c in e.bathroomFacilities)if(e.bathroomFacilities[c]){var u={id:this.$custom.getUuid(),icon:this.$t("facilitiesSheet.".concat(c,".icon")),labelKey:c,value:e.bathroomFacilities[c]};i.push(u)}return t={basicFacilities:o,bedroomFacilities:a,bathroomFacilities:i},t},keyPrefix:function(){return"search"==this.$route.name?"search-":"wishList"==this.$route.name?"wishList-":"general-prefix"},bedTypes:function(){var e=this,t=[],o=[],a=function(a){if("total"!=a&&e.roomType.bedType[a]>0){var i={bedTypeName:a,bedNumber:e.roomType.bedType[a]};o.push(i),t.push(i)}var s={single:1,double:2,king:3,crib:4,floorMattress:5};t.sort((function(e,t){return s[e.bedTypeName]-s[t.bedTypeName]}))};for(var i in this.roomType.bedType)a(i);return t}}),methods:{checkFacilityContainer:function(){var e=this;this.$nextTick((function(){e.$refs.facilitiesContainer&&e.$refs.facilitiesInnerContainer&&(e.facilityContainerHeight=e.$refs.facilitiesContainer.offsetHeight,e.facilityInnerContainerHeight=e.$refs.facilitiesInnerContainer.offsetHeight)}))},handleMoreInfo:function(){this.$emit("showDetail",{bedTypes:this.bedTypes,facilities:this.facilities})},handleReserve:function(e){this.$emit("showReserveModal"),this.$store.commit("ReservationModules/SET_SELECT_ROOM",e)}},mounted:function(){this.$emit("mounted"),this.checkFacilityContainer()}},Qa=Ka,Ya=(o("4d67"),Object(H["a"])(Qa,qa,Ga,!1,null,"07032aac",null)),Ja=Ya.exports,Za=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"facilities-group"},[e._l(e.subjects,(function(t,a){return[t.length>0?o("div",{key:a,staticClass:"facility-subject"},[o("div",{staticClass:"facility-title"},[e._v(e._s(e.$t("stayPage."+(Object.keys(e.subjects),a))))]),o("div",{staticClass:"facility-list-wrapper"},[o("ul",{staticClass:"facility-list"},e._l(t,(function(t){return o("li",{key:t.id,staticClass:"collapse-item"},[o("i",{class:t.icon}),e._v(" "+e._s(" "+t.label)+" ")])})),0)])]):e._e()]}))],2)},Xa=[],ei={props:{product:{type:Object,required:!0}},data:function(){return{facilitiesSheet:{wholeDayCounter:{icon:"fas fa-user-clock",label:"24小時櫃檯"},selfCheck:{icon:"el-icon-check",label:"自助入住"},pickUp:{icon:"fas fa-bus-alt",label:"接送服務"},luggageDeposit:{icon:"fas fa-luggage-cart",label:"行李寄放"},earlyCheckIn:{icon:"el-icon-finished",label:"提早入住"},lostPropertyStorage:{icon:"fas fa-toolbox",label:"遺失物保管"},parkLot:{icon:"el-icon-house",label:"停車空間"},valetParking:{icon:"fas fa-car-side",label:"代客泊車"},restaurant:{icon:"fas fa-utensils",label:"餐廳"},bar:{icon:"fas fa-wine-glass-alt",label:"酒吧"},kitchen:{icon:"fas fa-utensils",label:"自助廚房"},readingRoom:{icon:"fas fa-book-open",label:"閱讀室"},banquetRoom:{icon:"el-icon-video-camera-solid",label:"影音廳"},audiovisualHall:{icon:"fas fa-cocktail",label:"宴客廳"},swimmingPoor:{icon:"fas fa-swimming-pool",label:"游泳池"},publicBathhouse:{icon:"fas fa-water",label:"公共澡堂"},meetingRoom:{icon:"fas fa-chalkboard-teacher",label:"會議空間"},publicComputers:{icon:"fas fa-laptop-house",label:"公用電腦"},wholeDayWasher:{icon:"fas fa-tint",label:"24小時洗衣機"},wholeDayDryer:{icon:"fas fa-tshirt",label:"24小時烘衣機"},ironingFacility:{icon:"fas fa-weight-hanging",label:"熨燙衣物設備"},convenienceStore:{icon:"fas fa-store-alt",label:"24小時商店"}}}},computed:{subjects:function(){return{service:this.service,foodAndDrink:this.catering,entertainment:this.entertainment,businessAndLeisure:this.bussinessLife}},service:function(){var e=this.product.service,t=[];for(var o in e)if(e[o]){var a={id:this.$custom.getUuid(),icon:this.$t("stayServiceAndFacilities.".concat(o,".icon")),label:this.$t("stayServiceAndFacilities.".concat(o,".label"))};t.push(a)}return t},catering:function(){var e=this.product.facility.catering,t=[];for(var o in e)if(e[o]){var a={id:this.$custom.getUuid(),icon:this.$t("stayServiceAndFacilities.".concat(o,".icon")),label:this.$t("stayServiceAndFacilities.".concat(o,".label"))};t.push(a)}return t},entertainment:function(){var e=this.product.facility.entertainment,t=[];for(var o in e)if(e[o]){var a={id:this.$custom.getUuid(),icon:this.$t("stayServiceAndFacilities.".concat(o,".icon")),label:this.$t("stayServiceAndFacilities.".concat(o,".label"))};t.push(a)}return t},bussinessLife:function(){var e=this.product.facility.bussinessLife,t=[];for(var o in e)if(e[o]){var a={id:this.$custom.getUuid(),icon:this.$t("stayServiceAndFacilities.".concat(o,".icon")),label:this.$t("stayServiceAndFacilities.".concat(o,".label"))};t.push(a)}return t}}},ti=ei,oi=(o("3224"),Object(H["a"])(ti,Za,Xa,!1,null,"1b7e0c9c",null)),ai=oi.exports,ii=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"img-container-wrapper",on:{mouseenter:function(t){e.photoBtnShow=!0},mouseleave:function(t){e.photoBtnShow=!1}}},[o("transition",{attrs:{name:"el-fade-in"}},[e.photoBtnShow?o("span",{staticClass:"button-group"},[e.panoImgNum?o("button",{on:{click:e.handleShowPanoViewer}},[e._v(" "+e._s(e.$t("stayPage.viewPanoramas"))+" ")]):e._e(),o("button",{on:{click:e.handleShowViewer}},[e._v(e._s(e.$t("stayPage.viewPhotos")))])]):e._e()]),e.imageLength<3||!e._windowSize.lg.larger?[o("div",{staticClass:"img-container"},[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[0].url}})])]:e.imageLength>=3&&e.imageLength<5?[o("div",{staticClass:"img-container three-type"},[o("div",{staticClass:"first-image"},[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[0].url}})]),o("div",{staticClass:"image-col"},[o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[1].url}})]),o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[2].url}})])])])]:e.imageLength>=5?[o("div",{staticClass:"img-container five-type"},[o("div",{staticClass:"first-image"},[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[0].url}})]),o("div",{staticClass:"image-col"},[o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[1].url}})]),o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[2].url}})])]),o("div",{staticClass:"image-col"},[o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[3].url}})]),o("div",[o("img",{staticClass:"imgElm",attrs:{src:e.mapProduct.select.photos.normalImgs[4].url}})])])])]:e._e(),o("PhotoPreview",{attrs:{showViewer:e.showPhotoViewer,previewSrcList:e.mapProduct.select.photos.normalImgs}}),e.showPanoViewer?o("PanoDialog",{attrs:{src:e.mapProduct.select.photos.panoramas,visible:e.showPanoViewer},on:{closeDialog:e.handleClosePanoViewer}}):e._e()],2)},si=[],ni=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"el-image"},[e.preview?[e.showViewer?o("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.calcPreviewSrcList}}):e._e()]:e._e()],2)},ri=[],li=o("08a9"),ci="",ui={name:"ElImagePreview",components:{ImageViewer:li["a"]},props:{previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},showViewer:{type:Boolean,default:!1}},data:function(){return{}},computed:{preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e},calcPreviewSrcList:function(){var e=[];return this.previewSrcList.forEach((function(t){e.push(t.url)})),e}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{clickHandler:function(){this.preview&&(ci=document.body.style.overflow,document.body.style.overflow="hidden")},closeViewer:function(){document.body.style.overflow=ci,this.$store.dispatch("setViewer",{value:!1,key:"showPhotoViewer"})}}},di=ui,pi=(o("0f28"),Object(H["a"])(di,ni,ri,!1,null,"7c10907b",null)),mi=pi.exports,hi=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"preview-dialog",attrs:{"lock-scroll":!0,fullscreen:!0,visible:e.visible,width:"100%",center:!0,modal:!1},on:{close:e.closeDialog}},[o("VuePannellum",{staticStyle:{height:"100vh"},attrs:{src:e.selectedPano.data.image.url,preview:e.selectedPano.data.display_url,showFullscreen:!0,autoRotate:!1,panoList:e.src},on:{"update:src":function(t){return e.$set(e.selectedPano.data.image,"url",t)}}},[o("transition",{attrs:{duration:1200,name:"el-zoom-in-bottom"}},[e.showList?o("div",{staticClass:"pano-list"},[o("ul",{ref:"listRef",staticClass:"list-ul"},[e._l(e.src,(function(t){return[o("li",{key:"pano-"+t.id,staticClass:"pano-wrapper",class:{selected:e.selectedPano===t},on:{click:function(o){return e.handleSelect(t)}}},[o("img",{attrs:{src:t.data.display_url}})])]}))],2),e.listSrollLeft>0?o("span",{staticClass:"list-scroll-btn left-btn",on:{mousedown:function(t){return e.handleListBtn(-1,!0)},mouseup:function(t){return e.handleListBtn(0,!1)}}},[o("i",{staticClass:"fas fa-angle-left"})]):e._e(),e.listSrollRight<e.scrollWidth?o("span",{staticClass:"list-scroll-btn right-btn",on:{mousedown:function(t){return e.handleListBtn(1,!0)},mouseup:function(t){return e.handleListBtn(0,!1)}}},[o("i",{staticClass:"fas fa-angle-right"})]):e._e()]):e._e()]),o("span",{staticClass:"show-list-btn",class:{"list-show":!e.showList},on:{click:e.handleCollapseList}},[o("i",{staticClass:"fas fa-chevron-down"})])],1)],1)},fi=[],gi={props:{src:Array,visible:Boolean},components:{VuePannellum:Mo},data:function(){return{selectedPano:null,showList:!1,listWidth:null,scrollWidth:null,listSrollLeft:0,scrollTimer:null}},computed:{listSrollRight:function(){return this.listSrollLeft+this.listWidth}},methods:{closeDialog:function(){this.$emit("closeDialog")},handleSelect:function(e){this.selectedPano=e},handleCollapseList:function(){var e=this;this.showList=!this.showList,this.$nextTick((function(){e.calcListWidth(),e.handleScrollEvent()}))},handleScrollEvent:function(){var e=this;this.$refs.listRef&&this.$refs.listRef.addEventListener("scroll",(function(){e.listSrollLeft=e.$refs.listRef.scrollLeft}))},calcListWidth:function(){this.$refs.listRef&&(this.scrollWidth=this.$refs.listRef.scrollWidth,this.listWidth=this.$refs.listRef.clientWidth,this.listSrollLeft=this.$refs.listRef.scrollLeft)},handleListBtn:function(e,t){var o=this;t?(this.$refs.listRef.scrollLeft+=50*e,this.listSrollLeft=this.$refs.listRef.scrollLeft,this.scrollTimer=setInterval((function(){o.$refs.listRef.scrollLeft+=50*e,o.listSrollLeft=o.$refs.listRef.scrollLeft,(o.listSrollRight>=o.scrollWidth||o.listSrollLeft<=0)&&clearInterval(o.scrollTimer)}),50)):clearInterval(this.scrollTimer)}},created:function(){this.selectedPano=this.src[0]},mounted:function(){this.$bus.$on("resize",this.calcListWidth),document.documentElement.style.overflow="hidden"},beforeDestroy:function(){this.$bus.$off("resize",this.calcListWidth),document.documentElement.removeAttribute("style")}},vi=gi,bi=(o("f142"),Object(H["a"])(vi,hi,fi,!1,null,"0d3eae6d",null)),yi=bi.exports,_i={components:{PanoDialog:yi,PhotoPreview:mi},data:function(){return{photoBtnShow:!1,showPanoramasViewer:!1}},watch:{"mapProduct.select":{handler:function(){var e=this;this.$nextTick((function(){e.initImg()}))},deep:!0}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["d"])("MapModules",["mapProduct"])),Object(s["d"])(["showPhotoViewer","showPanoViewer"])),Object(s["d"])("UIModules",["_windowSize"])),{},{imageLength:function(){return this.mapProduct.select.photos.normalImgs.length},panoImgNum:function(){return this.mapProduct.select.photos.panoramas}}),methods:{initImg:function(){var e=this;this.$nextTick((function(){var t=document.getElementsByClassName("imgElm");t.forEach((function(t){t.addEventListener("load",e.getRatio(event,t))}))}))},getRatio:function(e,t){var o=this;return Object(Be["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(){return new Promise((function(e){var o=setInterval((function(){t.clientWidth>0&&t.clientHeight>0&&(clearInterval(o),e())}),10)}))},e.next=3,a();case 3:i=t.parentElement,s=i.clientWidth/i.clientHeight,n=t.clientWidth/t.clientHeight,n<=s&&isFinite(n)&&isFinite(s)&&t.clientHeight>i.clientHeight&&(r=(t.clientHeight-i.clientHeight)/2,t.style.transform="translateY(-".concat(r,"px)"),t.style.webkitTransform="translateY(-".concat(r,"px)")),n>s&&isFinite(n)&&isFinite(s)&&(t.style.width="auto",t.style.height="100%",t.clientWidth>i.clientWidth&&(l=(t.clientWidth-i.clientWidth)/2,t.style.transform="translateX(-".concat(l,"px)"),t.style.webkitTransform="translateX(-".concat(l,"px)"))),t.removeEventListener("load",o.getRatio);case 9:case"end":return e.stop()}}),e)})))()},handleShowViewer:function(){this.$store.dispatch("setViewer",{value:!0,key:"showPhotoViewer"})},handleShowPanoViewer:function(){this.$store.dispatch("setViewer",{value:!0,key:"showPanoViewer"})},handleClosePanoViewer:function(){this.$store.dispatch("setViewer",{value:!1,key:"showPanoViewer"})}},created:function(){},mounted:function(){},beforeDestroy:function(){}},wi=_i,Si=(o("ebf5"),Object(H["a"])(wi,ii,si,!1,null,"43f86c77",null)),Ci=Si.exports,Pi=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"el-zoom-in-bottom"}},[e.visible?o("div",{staticClass:"room-type-detail"},[o("header",[o("div",{staticClass:"title"},[e._v("房型設施")]),o("button",{staticClass:"close-btn",on:{click:e.handleClose}},[o("i",{staticClass:"el-icon-close"})])]),o("div",{staticClass:"body"},[o("div",{staticClass:"left-col"},[o("div",{staticClass:"bed-type-title"},[e._v(e._s(e.$t("stayPage.bedTypeTitle")))]),o("ul",e._l(e.detail.bedTypes,(function(t){return o("li",{key:t.bedTypeName,staticClass:"bed-type"},[e._v(" "+e._s(t.bedNumber+" "+e.$t("bedType."+t.bedTypeName))+" ")])})),0)]),o("div",{staticClass:"right-col"},[o("div",{ref:"facilitiesGroup",staticClass:"facilities-group"},e._l(e.detail.facilities,(function(t,a){return o("div",{key:a,staticClass:"facilities-subject"},[t.length>0?o("div",{staticClass:"facility-title"},[e._v(" "+e._s(e.$t("stayPage."+(Object.keys(e.detail.facilities),a)))+" ")]):e._e(),o("ul",e._l(e.detail.facilities[(Object.keys(e.detail.facilities),a)],(function(t,a){return o("li",{key:a},[o("span",{staticClass:"collapse-item"},[e._v(" "+e._s(e.$t("facilitiesSheet."+t.labelKey+".label"))+" "),o("i",{class:t.icon})])])})),0)])})),0)])])]):e._e()])},Ti=[],$i={props:{visible:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},methods:{handleClose:function(){this.$emit("update:visible",!1)}},beforeDestroy:function(){this.$emit("update:visible",!1)}},Li=$i,ki=(o("df36"),Object(H["a"])(Li,Pi,Ti,!1,null,"7b9b7b20",null)),Oi=ki.exports,Mi=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{staticClass:"reserve-modal",on:{close:e.handleClose},scopedSlots:e._u([{key:"header",fn:function(){return[o("span",[e._v(e._s(e.$t("reserveModal.reserveStay")))])]},proxy:!0},{key:"body",fn:function(){return[o("transition",{attrs:{name:"el-zoom-in-center"}},[e.reserveSucceed?o("div",{staticClass:"success-info"},[o("div",[o("i",{staticClass:"el-icon-check"})]),o("span",[e._v(e._s(e.$t("reserveModal.reservationComplete")))])]):e._e()]),e.reserveSucceed?e._e():[o("div",{staticClass:"room-info"},[o("div",{staticClass:"property-title"},[e._v(e._s(e.selectStay.info.title))]),o("div",{staticClass:"room-title"},[e._v(e._s(e.selectRoom.name))]),o("div",{staticClass:"room-price"},[e._v(" "+e._s(e._f("currency")(e.selectRoom.price))+"/"+e._s(e.$t("reserveModal.night"))+" ")])]),o("div",{staticClass:"option-wrapper"},[o("div",{ref:"datePickerBtn",staticClass:"date-picker-btn btn",on:{click:e.handleDatePickerClick}},[o("el-date-picker",{ref:"datePicker",staticStyle:{display:"none"},attrs:{"popper-class":"reserve-date-picker",type:"daterange",size:"small",align:"center","range-separator":"-","value-format":"yyyy/M/d","start-placeholder":e.$t("homePage.searchBar.checkInDates"),"end-placeholder":e.$t("homePage.searchBar.checkOutDates"),"picker-options":e.datePickerOptions},model:{value:e.reserveDate,callback:function(t){e.reserveDate=t},expression:"reserveDate"}}),o("div",{staticClass:"check-in date-area"},[o("div",{staticClass:"label"},[e._v(e._s(e.$t("reserveModal.checkIn")))]),o("div",{staticClass:"input"},[e._v(" "+e._s(e.reserveDate?e.reserveDate[0]:e.$t("reserveModal.selectDate"))+" ")])]),o("div",{staticClass:"check-out date-area"},[o("div",{staticClass:"label"},[e._v(e._s(e.$t("reserveModal.checkOut")))]),o("div",{staticClass:"input"},[e._v(" "+e._s(e.reserveDate?e.reserveDate[1]:e.$t("reserveModal.selectDate"))+" ")])])],1),o("div",{staticClass:"ppl-num-btn btn"},[o("div",{staticClass:"ppl-num-area"},[o("div",{staticClass:"label",on:{click:e.handleRoomNumInputFocus}},[e._v(" "+e._s(e.$t("reserveModal.roomNum"))+" ")]),e.roomNumInputVisible?e._e():o("div",{staticClass:"input",on:{click:e.handleRoomNumInputFocus}},[e._v(" "+e._s(e.roomNumber>0?e.roomNumber+" "+e.$t("reserveModal.roomNumUnit"):"預訂房間數量")+" ")]),e.roomNumInputVisible?o("input",{directives:[{name:"model",rawName:"v-model",value:e.roomNumber,expression:"roomNumber"}],ref:"roomNumInput",staticClass:"room-num-input",attrs:{type:"number",min:"1"},domProps:{value:e.roomNumber},on:{blur:e.handleRoomNumBlur,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRoomNumEnter(t)},input:function(t){t.target.composing||(e.roomNumber=t.target.value)}}}):e._e()])])]),e.totalNights?o("div",{staticClass:"detail-wrapper"},[o("ul",{staticClass:"charge-list"},[o("li",[o("div",{staticClass:"charge-title-wrapper"},[o("span",{staticClass:"charge-title"},[e._v(" "+e._s(e.roomNumber+""+e.$t("reserveModal.roomNumUnit")))]),o("span",{staticClass:"charge-calc-detail"},[e._v(" "+e._s(e.totalNights+" "+e.$t("reserveModal.night"))+" x "+e._s(e._f("currency")(e.selectRoom.price))+" ")])]),o("span",{staticClass:"charge-price"},[e._v(e._s(e._f("currency")(e.selectRoom.price*e.totalNights*e.roomNumber)))])])]),o("div",{staticClass:"total"},[e._v(" "+e._s(e.$t("reserveModal.total"))+" "+e._s(e._f("currency")(e.selectRoom.price*e.totalNights*e.roomNumber))+" ")])]):e._e(),o("button",{staticClass:"reserve-btn",style:{backgroundPosition:"left "+e.btnBgPosition.x+"px top "+e.btnBgPosition.y+"px"},attrs:{disabled:e.reserveLoading},on:{mouseenter:e.handleBtnHover,mousemove:e.handleBtnHover,click:e.handleReserveBtnClick}},[o("pulse-loader",{attrs:{loading:e.reserveLoading,color:"#ffffffee",size:"8px"}}),e._v(" "+e._s(e.reserveLoading?"":e.totalNights?e.$t("reserveModal.reserve"):e.$t("reserveModal.checkAvailableDate"))+" ")],1)]]},proxy:!0}])})],1)},Ii=[],Ri={components:{Modal:z},props:{visible:{type:Boolean,default:!0}},data:function(){return{reserveDate:null,reserveDateArray:[],btnBgPosition:{x:null,y:null},datePickerOptions:{disabledDate:function(e){var t=new Date;return t.setDate(t.getDate()-1),e<t}},roomNumber:1,roomNumInputVisible:!1,reserveSucceed:!1,reserveLoading:!1}},watch:{reserveDate:function(){for(var e=[],t=new Date(this.reserveDate[0]),o=0;o<this.totalNights;o++){var a=new Date(t.getTime()+864e5*o),i=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("/");e.push(i),this.reserveDateArray=e}}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["d"])("ReservationModules",["selectRoom","selectStay"])),Object(s["d"])("UIModules",["_windowSize"])),{},{totalNights:function(){if(this.reserveDate){var e=new Date(this.reserveDate[0]),t=new Date(this.reserveDate[1]),o=(t.getTime()-e.getTime())/864e5;return o}return null}}),methods:{handleClose:function(){this.$emit("update:visible",!this.visible)},handleBtnHover:function(e){this.btnBgPosition.x=e.offsetX-1.5*e.target.offsetWidth,this.btnBgPosition.y=e.offsetY-1.5*e.target.offsetHeight},handleDatePickerClick:function(){var e=this;this.$refs.datePicker.focus(),this.$nextTick((function(){var t=document.body.getElementsByClassName("reserve-date-picker")[0];t&&(e._windowSize.lg.larger?t.className=t.className.replace(/\bdate-pick-full-page\b/g,""):t.className+=" reserve-date-pick-full-page",setTimeout((function(){e.handleDatePickerPosition()}),0))})),setTimeout((function(){e.handleDatePickerPosition()}),0)},handleDatePickerPosition:function(){var e=this;setTimeout((function(){var t=document.body.getElementsByClassName("reserve-date-picker")[0];t.style.top="".concat(e.$refs.datePickerBtn.offsetParent.offsetParent.offsetTop-e.$refs.datePickerBtn.offsetParent.offsetParent.clientHeight/2+e.$refs.datePickerBtn.offsetParent.offsetTop+e.$refs.datePickerBtn.offsetTop+e.$refs.datePickerBtn.clientHeight-10.5,"px"),t.style.display="block",t.style.left="".concat(e.$refs.datePickerBtn.offsetParent.offsetParent.offsetLeft-t.clientWidth/2-1,"px"),e._windowSize.lg.larger?t.style.height="auto":t.style.height="calc(100vh - ".concat(e.$refs.datePickerBtn.offsetParent.offsetParent.offsetTop-e.$refs.datePickerBtn.offsetParent.offsetParent.clientHeight/2+e.$refs.datePickerBtn.offsetParent.offsetTop+e.$refs.datePickerBtn.offsetTop+e.$refs.datePickerBtn.clientHeight,"px)")}),0)},handleRoomNumInputFocus:function(){var e=this;this.roomNumInputVisible=!0,this.$nextTick((function(){e.$refs.roomNumInput.focus()}))},handleRoomNumBlur:function(){this.roomNumInputVisible=!1},handleRoomNumEnter:function(){var e=this;this.$nextTick((function(){e.$refs.roomNumInput.blur()}))},handleReserveBtnClick:function(e){var t=this;this.totalNights?(this.reserveLoading=!0,this.$store.dispatch("ReservationModules/reserve",{reserveDate:this.reserveDateArray,roomQty:this.roomNumber}).then((function(){t.reserveSucceed=!0,console.log("預訂成功 from component")})).catch((function(){console.log("預訂失敗 from component")})).finally((function(){t.reserveLoading=!1}))):this.handleDatePickerClick(e)}},created:function(){},mounted:function(){var e=this;this.$bus.$on("resize",(function(){e.$refs.datePicker&&e.$refs.datePicker.handleClose()}))},beforeDestroy:function(){this.$bus.$off("resize",this.handleDatePickerPosition)}},xi=Ri,Ei=(o("6096"),o("b45e"),Object(H["a"])(xi,Mi,Ii,!1,null,"4c31f3c7",null)),Di=Ei.exports,Ai={data:function(){return{imageLength:4,topBackNavHeight:null,subjectHeaderPosition:null,roomTypeViewPoint:null,introViewPoint:null,serviceViewPoint:null,roomTypeListFilter:"showAll",productContainerHeight:null,showViewer:!1,detailVisible:!1,roomDetail:null,reserveModalVisible:!1}},components:{roomTypeCard:Ja,RoomTypeDetail:Oi,PropertyFacility:ai,PhotoDisplaySection:Ci,Reserve:Di},watch:{"mapProduct.select":{handler:function(){var e=this;this.$nextTick((function(){e.initialUI()}))},deep:!0},mapPageMode:function(){this.$store.dispatch("MapModules/selectMapProduct",[null]),this.$store.dispatch("MapModules/hoverMapProduct",{product:null,hoverClass:!1})},isInRoomTypeView:function(e){e&&this.$refs.subjectListWrapper&&(this.$refs.subjectListWrapper.scrollLeft=this.$refs.roomTypeBtn.offsetLeft-159)},isInIntroView:function(e){e&&this.$refs.subjectListWrapper&&(this.$refs.subjectListWrapper.scrollLeft=this.$refs.introBtn.offsetLeft-159)},isInServiceView:function(e){e&&this.$refs.subjectListWrapper&&(this.$refs.subjectListWrapper.scrollLeft=this.$refs.serviceBtn.offsetLeft-159)}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["d"])("MapModules",["mapProduct"])),Object(s["d"])(["asideScroll","mapPageMode"])),Object(s["d"])("WishlistModules",["wishList"])),Object(s["d"])("UIModules",["_windowSize"])),{},{isInRoomTypeView:function(){return this.introViewPoint>this.calcScrollRefPoint&&this.calcScrollRefPoint>=this.roomTypeViewPoint},isInIntroView:function(){return this.serviceViewPoint>this.calcScrollRefPoint&&this.calcScrollRefPoint>=this.introViewPoint},isInServiceView:function(){return this.calcScrollRefPoint>=this.serviceViewPoint},views:function(){return{isInRoomTypeView:this.isInRoomTypeView,isInIntroView:this.isInIntroView,isInServiceView:this.isInServiceView}},navHalfShow:function(){return this.asideScroll>this.topBackNavHeight},navAllShow:function(){return this.asideScroll>this.subjectHeaderPosition-3},calcScrollRefPoint:function(){return this.asideScroll+3*(this.productContainerHeight-75)/5},convertedDescription:function(){var e=this.mapProduct.select.info.description.replace(/\r\n|\r|\n/g,"<br />");return e}}),methods:{close:function(){this.$bus.$emit("backToProductsList"),this.$store.dispatch("MapModules/scrollToMapProduct",this.mapProduct.select.id),this.$store.dispatch("MapModules/selectMapProduct",[null,!0]),this.$store.dispatch("MapModules/hoverMapProduct",{product:null,hoverClass:!1})},initialUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mapProduct.select.computedResult?"fitSearch":"showAll";this.topBackNavHeight=this.$refs.topBackNav.offsetHeight,this.subjectHeaderPosition=this.$refs.productHeader.offsetTop+this.$refs.subjectHeader.offsetTop-10.5,this.roomTypeViewPoint=this.$refs.roomTypeSubject.offsetTop-24,this.introViewPoint=this.$refs.introSubject.offsetTop-24,this.serviceViewPoint=this.$refs.serviceSubject.offsetTop-24,this.roomTypeListFilter=e},handleCommand:function(e){var t=this;this.$nextTick((function(){t.initialUI(e)}))},handleScrollTo:function(e){"roomType"==e&&this.$bus.$emit("handleScrollTo",this.$refs.roomTypeSubject.offsetTop-98),"intro"==e&&this.$bus.$emit("handleScrollTo",this.$refs.introSubject.offsetTop-98),"service"==e&&this.$bus.$emit("handleScrollTo",this.$refs.serviceSubject.offsetTop-98)},setProdocutContainerHeight:function(){this.initialUI(),this.productContainerHeight=this.$refs.productContainer.parentNode.clientHeight},handleRoomTypeCardMounted:function(e){this.initialUI(e)},handleWishList:function(e,t){var o=this;"wishList"==this.$route.name&&t?this.$confirm("確定將此房源從心願單移除嗎？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$store.dispatch("WishlistModules/handleWishList",[e,o.$route.name]),o.close()})):this.$store.dispatch("WishlistModules/handleWishList",[e,this.$route.name])},handleShowDetail:function(e){this.detailVisible=!0,this.roomDetail=e},handleShowReserveModal:function(){this.reserveModalVisible||(this.reserveModalVisible=!0,this.$store.commit("ReservationModules/SET_SELECT_PROPERTY",this.mapProduct.select))}},created:function(){this.$bus.$emit("addProductScrollListener")},mounted:function(){var e=this;this.$nextTick((function(){e.setProdocutContainerHeight()})),this.$bus.$on("resize",this.setProdocutContainerHeight),this.$nextTick((function(){e.initialUI()}))},beforeDestroy:function(){this.$bus.$off("resize",this.setProdocutContainerHeight),this.$bus.$emit("destroyProductScrollListener"),this.$store.dispatch("MapModules/selectMapProduct",[null])}},Bi=Ai,Ni=(o("9963"),o("b9e1"),Object(H["a"])(Bi,Wa,za,!1,null,"4aab368e",null)),ji=Ni.exports,Vi=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e._windowSize.mapPointLg.larger&&e.asideVisible?e._e():o("button",{staticClass:"map-btn",attrs:{"aria-label":"Open the map"},on:{click:e.handleMapVisible}},[e.asideVisible?[o("i",{staticClass:"el-icon-map-location"}),o("span",[e._v("地圖")])]:e._e(),e.asideVisible?e._e():[o("i",{staticClass:"el-icon-notebook-2"}),o("span",[e._v("列表")])]],2)},Ui=[],Fi={computed:Object(p["a"])({},Object(s["d"])("UIModules",["_windowSize","asideVisible"])),methods:{handleMapVisible:function(){this.$store.commit("UIModules/SET_ASIDE_VISIBLE",!this.asideVisible)}}},Hi=Fi,Wi=(o("d670"),Object(H["a"])(Hi,Vi,Ui,!1,null,"0c392006",null)),zi=Wi.exports,qi={data:function(){return{}},components:{SearchResultMap:Ba,MapProducts:Ha,MapProduct:ji,MapSwitchButton:zi},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(s["d"])("MapModules",["mapProduct","google"])),Object(s["d"])(["showPhotoViewer","showPanoViewer","mapPageMode"])),Object(s["d"])("SearchModules",["filterSearchProducts","searchKey","searchQuery","searchExecuted"])),Object(s["d"])("WishlistModules",["wishListProducts"])),Object(s["d"])("UIModules",["_windowSize","asideVisible"])),watch:{"mapProduct.select":{handler:function(e){var t=this;e&&(this.$store.commit("UIModules/SET_ASIDE_VISIBLE",!0),this.$nextTick((function(){t.$refs.mapAside&&(t.$refs.mapAside.$el.scrollTop=0,t.$store.commit("UPDATE_ASIDE_SCROLL",0))})))},deep:!0},google:function(e){e&&"wishList"==this.$route.name&&this.$store.dispatch("WishlistModules/mapWishListProducts")},"$route.name":{handler:function(e){"search"==e&&this.$store.commit("UIModules/SHOW_SEARCHBAR",!0),this.$store.commit("CHANGE_MAP_PAGE_MODE",e),this.google&&this.$store.dispatch("WishlistModules/mapWishListProducts"),this.searchQuery&&"search"==e&&this.$router.replace({query:this.searchQuery}).catch((function(e){}))},immediate:!0}},methods:{updateAsideScroll:function(){this.$store.commit("UPDATE_ASIDE_SCROLL",this.$refs.mapAside.$el.scrollTop)},handleSearchByQuery:function(){var e=this;return Object(Be["a"])(regeneratorRuntime.mark((function t(){var o,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("SearchModules/SET_SEARCH_QUERY",e.$route.query),!(!e.searchExecuted&&e.$route.query.search_bounds_s&&e.$route.query.search_bounds_w&&e.$route.query.search_bounds_e&&e.$route.query.search_bounds_n)){t.next=15;break}return o={south:parseFloat(e.$route.query.search_bounds_s),west:parseFloat(e.$route.query.search_bounds_w),north:parseFloat(e.$route.query.search_bounds_n),east:parseFloat(e.$route.query.search_bounds_e)},t.next=5,new e.google.maps.LatLng({lat:o.west,lng:o.south});case 5:return a=t.sent,t.next=8,new e.google.maps.LatLng(o.east,o.north);case 8:return i=t.sent,t.next=11,new e.google.maps.LatLngBounds;case 11:s=t.sent,s.extend(a),s.extend(i),e.$store.dispatch("SearchModules/handleQuerySearch",{routeQuery:e.$route.query,bounds:s});case 15:case"end":return t.stop()}}),t)})))()},handleSelectStayQuery:function(e){if(e&&!this.$route.query.stayId){var t=JSON.parse(JSON.stringify(this.$route.query));t.stayId=e.id,this.$router.replace({query:t})}else if(!e){var o=JSON.parse(JSON.stringify(this.$route.query));o.stayId&&(delete o.stayId,this.$router.replace({query:o}))}}},created:function(){if(this.$route.query.stayId){var e=this,t="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/product/").concat(this.$route.query.stayId);this.$http.get(t).then((function(t){1==t.data.success&&e.$store.dispatch("MapModules/selectMapProduct",[t.data.product,!1])}))}},mounted:function(){var e=this;this.$store.dispatch("WishlistModules/getWishList"),this.$bus.$on("addProductScrollListener",(function(){e.$nextTick((function(){e.$refs.mapAside.$el.scrollTop=0,e.$refs.mapAside.$el.addEventListener("scroll",e.updateAsideScroll)}))})),this.$bus.$on("destroyProductScrollListener",(function(){e.$store.commit("UPDATE_ASIDE_SCROLL",e.$refs.mapAside.$el.scrollTop),e.$refs.mapAside.$el.removeEventListener("scroll",e.updateAsideScroll)})),this.$bus.$on("handleScrollTo",(function(t){e.$refs.mapAside.$el.scrollTop=t})),this.$bus.$on("mapLoaded",(function(){e.handleSearchByQuery()}))},beforeDestroy:function(){this.$store.commit("UIModules/SHOW_SEARCHBAR",!1),this.$bus.$off("addProductScrollListener"),this.$bus.$off("destroyProductScrollListener"),this.$bus.$off("handleScrollTo"),this.$bus.$off("mapLoaded")}},Gi=qi,Ki=(o("6d09"),Object(H["a"])(Gi,pa,ma,!1,null,"b26d0cf0",null)),Qi=Ki.exports;i["default"].use(le["a"]);var Yi=[{path:"*",redirect:{name:"homePage"}},{path:"/admin",component:ht,children:[{path:"",name:"ProductsHomePage",component:kt,meta:{requiresAuth:!0}},{path:"products",name:"Products",component:kt,meta:{requiresAuth:!0}},{path:"create",name:"Create",component:Go,meta:{requiresAuth:!0}},{path:"edit",name:"Edit",component:Go,meta:{requiresAuth:!0}},{path:"management",name:"RoomManagement",component:Vt,meta:{requiresAuth:!0}}]},{path:"/",component:Xo,children:[{path:"",name:"homePage",component:da},{path:"search",name:"search",component:Qi,meta:{title:"search"}},{path:"wishlist",name:"wishList",component:Qi,meta:{title:"wishList"}}]}],Ji=new le["a"]({routes:Yi}),Zi=Ji;i["default"].prototype.$bus=new i["default"];var Xi=function(e){var t=Number(e);return"$".concat(t.toFixed(0).replace(/./g,(function(e,t,o){var a=t&&"."!==e&&(o.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e;return a})))},es=function(e){var t=new Date(1e3*e),o="\n      ".concat(t.getFullYear()," 年 ").concat(t.getMonth()+1," 月 ").concat(t.getDate()," 日 ").concat(t.getHours(),":").concat(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes(),"\n    ");return o},ts=function(e){var t=new Date(1e3*e),o="\n      ".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate()," ").concat(t.getHours()<10?"0".concat(t.getHours()):t.getHours(),":").concat(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes(),"\n    ");return o},os=(o("fb6a"),{namespaced:!0,state:{products:null,pagination:{}},actions:{getProducts:function(e,t){var o=this,i=Object(a["a"])(t,3),s=i[0],n=void 0===s?"":s,l=i[1],c=void 0===l?1:l,u=i[2],d=void 0!==u&&u;return new Promise((function(t){var a="admin"==n?"admin/":"",i="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/").concat(a,"products?page=").concat(c);d&&(i="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/").concat(a,"products/all")),e.commit("COUNT_LOADING",1,{root:!0}),r.a.get(i).then((function(a){if(a.data.success)if(d){var i=[],s=a.data.products;for(var n in s)i.push(s[n]);e.commit("PRODUCTS",i)}else e.commit("PRODUCTS",a.data.products),e.commit("PAGINATION",a.data.pagination);else o._vm.$message({showClose:!0,center:!0,type:"danger",message:a.data.message+"from getProducts2-1"});e.commit("COUNT_LOADING",-1,{root:!0}),t()}))}))},getMapProducts:function(e,t){var o=this,i=Object(a["a"])(t,2),s=i[0],n=void 0===s?"":s,l=i[1],c=void 0===l?1:l;return new Promise((function(t){var a="admin"==n?"admin/":"",i="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/").concat(a,"products").concat("all"==c?"/all":"?page="+c);e.commit("COUNT_LOADING",1,{root:!0}),r.a.get(i).then((function(a){a.data.success?(e.commit("PRODUCTS",a.data.products),e.commit("PAGINATION",a.data.pagination)):o._vm.$message({showClose:!0,center:!0,type:"danger",message:a.data.message+"from getMapProducts"}),e.commit("COUNT_LOADING",-1,{root:!0}),t()}))}))}},mutations:{PRODUCTS:function(e,t){e.products=t},PAGINATION:function(e,t){e.pagination=t}},getters:{products:function(e){return e.products},pagination:function(e){return e.pagination}}}),as={namespaced:!0,state:{cartData:{cart:{},removingItem:[]}},actions:{getCart:function(e){var t=this,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/cart");e.commit("LOADING",!0,{root:!0}),r.a.get(o).then((function(o){o.data.success?(e.commit("GET_CART",o.data.data),console.log(o.data)):t.$store.dispatch("AlertModules/updateMessage",[o.data.message,"danger"]),e.commit("LOADING",!1,{root:!0})}))},addToCart:function(e,t){var o=Object(a["a"])(t,3),i=o[0],s=o[1],n=o[2],l=void 0===n?1:n,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/cart"),u={product_id:i,qty:l};e.dispatch("updateLoading",!0,{root:!0}),r.a.post(c,{data:u}).then((function(t){t.data.success?(e.dispatch("getCart"),bt()("#productModal").modal("hide"),e.dispatch("AlertModules/updateMessage",["已將「".concat(s.trim(),"」加入購物車"),"success"],{root:!0})):e.dispatch("AlertModules/updateMessage",[t.data.message,"success"],{root:!0}),e.dispatch("updateLoading",!1,{root:!0})}))},deleteCartItem:function(e,t){var o=Object(a["a"])(t,2),i=o[0],s=o[1],n="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/cart/").concat(i);e.commit("REMOVING_CART_ITEM",i),r.a.delete(n).then((function(t){t.data.success?(e.dispatch("getCart").then((function(){e.commit("REMOVING_CART_ITEM",i)})),e.dispatch("AlertModules/updateMessage",["已將「".concat(s.trim(),"」從購物車移除"),"warning"],{root:!0})):e.dispatch("AlertModules/updateMessage",[t.data.message,"danger"])}))}},mutations:{GET_CART:function(e,t){e.cartData.cart=t},REMOVING_CART_ITEM:function(e,t){var o=e.cartData.removingItem;-1==o.indexOf(t)?o.push(t):o.splice(o.indexOf(t),1)}},getters:{cart:function(e){return e.cartData.cart},removingItem:function(e){return e.cartData.removingItem}}},is={namespaced:!0,state:{messages:[]},actions:{updateMessage:function(e,t){var o=Object(a["a"])(t,2),i=o[0],s=o[1],n=Math.floor(new Date/1e3),r={message:i,status:s,timestamp:n};e.commit("UPDATE_MESSAGES",r),e.dispatch("removeMessageWithTiming",n)},removeMessage:function(e,t){e.commit("REMOVE_MESSAGES_WITH_TIMING",t)},removeMessageWithTiming:function(e,t){setTimeout((function(){e.state.messages.forEach((function(o,a){o.timestamp===t&&e.commit("REMOVE_MESSAGES_WITH_TIMING",a)}))}),5e3)}},mutations:{UPDATE_MESSAGES:function(e,t){e.messages.push(t)},REMOVE_MESSAGES:function(e,t){e.messages.splice(t,1)},REMOVE_MESSAGES_WITH_TIMING:function(e,t){e.messages.splice(t,1)}},getters:{messages:function(e){return e.messages}}},ss={namespaced:!0,state:{titleList:{},orders:[],filteredOrders:[],pagination:{}},actions:{GetRoomManagementData:function(e){return Object(Be["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.state.orders.length>0&&e.commit("CLEAR_ORDERS"),o=e.dispatch("getOrders"),a=e.dispatch("ProductsModules/getProducts",["admin","all",!0],{root:!0}),Promise.all([o,a]).then((function(){e.dispatch("getTitleList")}));case 4:case"end":return t.stop()}}),t)})))()},getOrders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(o){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/admin/orders?page=").concat(t);r.a.get(a).then((function(t){if(t.data.success){var a=t.data.orders.filter((function(e){return e.message&&e.message.roomInfo&&e.message.roomInfo.propertyId&&"delete"!=e.message.status}));t.data.pagination.has_next&&a.length>0?(e.commit("GET_ORDERS",a),e.dispatch("getOrders",t.data.pagination.current_page+1).then((function(){o()}))):o()}else e.dispatch("AlertModules/updateMessage",[t.data.message,"danger"],{root:!0})}))}))},getTitleList:function(e){var t=e.state.titleList,o=[];e.state.orders.forEach((function(a){o.push(a);var i=a.message.roomInfo.propertyId,s=a.message.roomInfo.roomTypeId,n=e.rootState.ProductsModules.products.find((function(e){return e.id==i}));if(!n)return e.commit("SET_TITLE_LIST_PROPERTY",{propertyKey:i,propertyTitle:"查無房源"}),void e.commit("SET_TITLE_LIST_ROOMTYPE",{propertyKey:i,roomTypeKey:s,roomTypeObj:{name:"查無房型",price:0}});var r=n.roomTypes.find((function(e){return e.id==s}));t[i]||e.commit("SET_TITLE_LIST_PROPERTY",{propertyKey:i}),t[i].roomTypes||e.commit("SET_TITLE_LIST_ROOMTYPE",{propertyKey:i}),e.commit("SET_TITLE_LIST_PROPERTY",{propertyKey:i,propertyTitle:n.info.title}),e.commit("SET_TITLE_LIST_ROOMTYPE",{propertyKey:i,roomTypeKey:s,roomTypeObj:r})})),e.commit("PUSH_FILTERED_ORDER",o)}},mutations:{CLEAR_ORDERS:function(e){e.orders=[]},GET_ORDERS:function(e,t){e.orders=e.orders.concat(t)},PUSH_FILTERED_ORDER:function(e,t){e.filteredOrders=t},PAGINATION:function(e,t){e.pagination=t},SET_TITLE_LIST_PROPERTY:function(e,t){e.titleList[t.propertyKey]||i["default"].set(e.titleList,t.propertyKey,{}),t.propertyTitle&&i["default"].set(e.titleList[t.propertyKey],"propertyTitle",t.propertyTitle)},SET_TITLE_LIST_ROOMTYPE:function(e,t){e.titleList[t.propertyKey].roomTypes||i["default"].set(e.titleList[t.propertyKey],"roomTypes",{}),t.roomTypeObj&&i["default"].set(e.titleList[t.propertyKey].roomTypes,t.roomTypeKey,t.roomTypeObj)}},getters:{orders:function(e){return e.orders},pagination:function(e){return e.pagination},orderSource:function(e){return e.filteredOrders},paginatedOrderArray:function(e,t){for(var o=10,a=t.orderSource.length,i=a%o,s=0===i?parseInt(a/o):parseInt(a/o)+1,n=[],r=function(e){var a=e*o,i=(e-1)*o,s=t.orderSource.filter((function(e,t){return i<=t&&t<a}));n.push(s)},l=1;l<=s;l++)r(l);return n}}},ns={namespaced:!0,state:{google:null,geocoder:null,bounds:null,center:null,zoom:null,showSearchControl:!1,mapProduct:{select:null,hover:null,hoverClass:!1,scrollToId:null,selectByMap:null},viewAllProductsBounds:null,SearchControlTimer:null},actions:{setGoogleAPI:function(e){return Object(Be["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){qt()({apiKey:"AIzaSyDTP6E9ofDGuoa6fo0egyM8CSOKQ4cGVAg",language:localStorage.getItem("language")||"en"}).then((function(o){e.commit("SET_API",o),t()}))})));case 1:case"end":return t.stop()}}),t)})))()},handleSearchControl:function(e,t){e.commit("SET_SEARCH_CONTROL",t)},selectMapProduct:function(e,t){var o=Object(a["a"])(t,2),i=o[0],s=o[1],n=void 0!==s&&s;e.commit("SELECT_BY_MAP",n),e.commit("SET_SELECT_PRODUCT",i)},hoverMapProduct:function(e,t){var o=t.product,a=t.hoverClass,i=void 0!==a&&a;e.commit("MAP_PRODUCT_HOVER",{product:o,hoverClass:i})},removeMapProduct:function(e){e.commit("REMOVE_SELECT_MAP_PRODUCT")},scrollToMapProduct:function(e,t){e.commit("SCROLL_TO_MAP_PRODUCT",t)},setControlVisibleTimer:function(e){var t=setTimeout((function(){e.state.SearchControlTimer==t&&e.commit("SET_CONTROL_TIMER",null)}),3e3);e.commit("SET_CONTROL_TIMER",t)}},mutations:{SET_API:function(e,t){e.google=t,e.geocoder=new e.google.maps.Geocoder},UPDATE_BOUNDS:function(e,t){e.bounds=t},UPDATE_CENTER:function(e,t){e.center=t},UPDATE_ZOOM:function(e,t){e.zoom=t},SET_SEARCH_CONTROL:function(e,t){e.showSearchControl=t},MAP_PRODUCT_HOVER:function(e,t){e.mapProduct.hover=t.product,e.mapProduct.hoverClass=t.hoverClass},SET_SELECT_PRODUCT:function(e,t){e.mapProduct.select=t},SELECT_BY_MAP:function(e,t){e.mapProduct.selectByMap=t},REMOVE_SELECT_MAP_PRODUCT:function(e){e.mapProduct.select=null},SCROLL_TO_MAP_PRODUCT:function(e,t){e.mapProduct.scrollToId=t},SAVE_VIEW_ALL_BOUNDS:function(e,t){e.viewAllProductsBounds=t},SET_CONTROL_TIMER:function(e,t){e.SearchControlTimer=t}}},rs={namespaced:!0,state:{filterSearchProducts:null,searchFilter:{location:null,pplNum:0,date:null},searchByMap:!1,searchBounds:null,searchCenter:null,searchZoom:null,resultsLatLng:null,filteredProductsBounds:null,roomTypeNumber:null,searchKey:null,searchQuery:null,searchExecuted:!1,searchByQuery:null,searchType:null},actions:{filterSearchProducts:function(e,t){var o=this;return Object(Be["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,l,c,u,d,p,m,h,f,g,v,b,y,_,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return w=function(e){var t=[];e.forEach((function(e){t.push(e.price)}));var o=p._vm.$custom.quickSort(t);return{matchRoomTypesPrices:t,sortedPrices:o}},i=t.searchByMap,s=void 0!==i&&i,n=t.searchByQuery,r=void 0!==n&&n,l=t.bounds,c=void 0===l?null:l,u=t.searchType,d=void 0===u?null:u,e.commit("SEARCH_EXECUTED",!0),e.commit("SEARCH_BY_MAP",s),p=o,m=0,e.dispatch("MapModules/selectMapProduct",[null,!1],{root:!0}),a.next=9,e.dispatch("ProductsModules/getMapProducts",[null,"all"],{root:!0});case 9:h=e.rootState.MapModules,f=e.rootState.ProductsModules.products,g=e.state.searchFilter.pplNum,s&&!r?c=h.bounds:r||(c=e.state.searchFilter.location.mapInfo.geometry.bounds||e.state.searchFilter.location.mapInfo.geometry.viewport),e.commit("SET_SEARCH_BOUNDS",{bounds:c}),b=f.reduce((function(e,t){if(!0===c.contains(t.info.LatLng)){if(!g){var o=w(t.roomTypes),a=o.matchRoomTypesPrices,i=o.sortedPrices,s=p._vm.$custom.quickSortObj(t.roomTypes,"pplNum");t.computedResult={matchRoomTypes:s,prices:a,sortedPrices:i},m+=t.roomTypes.length}e.push(t)}return e}),[]),v=b,g&&(y=b.reduce((function(e,t){var o=t.roomTypes.filter((function(e){return g+1>=e.pplNum&&e.pplNum>=g}));if(m+=o.length,o.length>0){var a=w(o),i=a.matchRoomTypesPrices,s=a.sortedPrices,n=p._vm.$custom.quickSortObj(o,"pplNum");t.computedResult={matchRoomTypes:n,prices:i,sortedPrices:s},e.push(t)}return e}),[]),v=y),_=v.map((function(e){return e.info.LatLng})),e.commit("SAVE_RESULTS_LATLNG",_),e.commit("SAVE_FILTERED_PRODUCTS",v),e.commit("SAVE_ROOMTYPES_NUMBER",m),e.commit("GENERATE_SEARCH_KEY",p._vm.$custom.getUuid()),e.commit("SET_SEARCH_TYPE",d);case 23:case"end":return a.stop()}}),a)})))()},passSearchLocation:function(e,t){e.commit("SAVE_SEARCH_LOCATION",t)},handleQuerySearch:function(e,t){return Object(Be["a"])(regeneratorRuntime.mark((function o(){var a,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=t.routeQuery,i=t.bounds,"true"==a.search_by_map||e.commit("SAVE_SEARCH_LOCATION",{value:a.place_name,mapInfo:{geometry:{viewport:i}}}),a.startDate&&a.endDate&&(s=[a.startDate,a.endDate],e.commit("updateDate",s)),e.commit("updatePplNum",a.guest_number),e.commit("SET_SEARCH_BY_QUERY",{bounds:i,routeQuery:a});case 5:case"end":return o.stop()}}),o)})))()}},mutations:{SEARCH_BY_MAP:function(e,t){e.searchByMap=t},SAVE_FILTERED_PRODUCTS:function(e,t){e.filterSearchProducts=t},SAVE_SEARCH_LOCATION:function(e,t){e.searchFilter.location=t},updatePplNum:function(e,t){e.searchFilter.pplNum=t},updateDate:function(e,t){e.searchFilter.date=t},SAVE_RESULTS_LATLNG:function(e,t){e.resultsLatLng=t},SAVE_FILTERED_PRODUCTS_BOUNDS:function(e,t){e.filteredProductsBounds=t},SAVE_ROOMTYPES_NUMBER:function(e,t){e.roomTypeNumber=t},GENERATE_SEARCH_KEY:function(e,t){e.searchKey=t},SET_SEARCH_BOUNDS:function(e,t){e.searchBounds=t.bounds},SET_SEARCH_QUERY:function(e,t){e.searchQuery=t},SEARCH_EXECUTED:function(e,t){e.searchExecuted=t},SET_SEARCH_BY_QUERY:function(e,t){e.searchByQuery=t},SET_SEARCH_TYPE:function(e,t){e.searchType=t}}},ls={namespaced:!0,state:{wishList:null,wishListProducts:null,wishListProductsBounds:null,wishListRoomTypeNumber:null},actions:{getWishList:function(e){if(!localStorage.wishList){var t=[];localStorage.setItem("wishList",JSON.stringify(t))}var o=JSON.parse(localStorage.getItem("wishList"));e.commit("SET_WISHLIST",o)},handleWishList:function(e,t){var o=Object(a["a"])(t,2),i=o[0],s=o[1];e.commit("SET_WISHLIST_PRODUCTS",[]);var n=JSON.parse(localStorage.getItem("wishList"));if(n.includes(i)){var r=n.indexOf(i);n.splice(r,1)}else n.push(i);localStorage.setItem("wishList",JSON.stringify(n)),e.commit("SET_WISHLIST",n),"wishList"==s&&e.dispatch("mapWishListProducts")},mapWishListProducts:function(e){var t=this;return Object(Be["a"])(regeneratorRuntime.mark((function o(){var a,i,s,n,r,l,c,u,d;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(d=function(e){var t=[];e.forEach((function(e){t.push(e.price)}));var o=a._vm.$custom.quickSort(t);return{matchRoomTypesPrices:t,sortedPrices:o}},e.commit("SET_WISHLIST_PRODUCTS",[]),a=t,e.dispatch("getWishList"),i=0,e.rootState.ProductsModules.products){o.next=8;break}return o.next=8,e.dispatch("ProductsModules/getProducts",[null,"all"],{root:!0});case 8:if(s=localStorage.wishList?JSON.parse(localStorage.getItem("wishList")):[],n=e.rootState.ProductsModules.products,s.length>0){for(r=s.reduce((function(e,t){var o=n.find((function(e){return e.id==t}));if(!o){var a=s.indexOf(t);return s.splice(a,1),localStorage.setItem("wishList",JSON.stringify(s)),e}var r=d(o.roomTypes),l=r.sortedPrices,c=r.matchRoomTypesPrices;return i+=o.roomTypes.length,o.computedResult={matchRoomTypes:o.roomTypes,prices:c,sortedPrices:l},e.push(o),e}),[]),l=r.map((function(e){return e.info.LatLng})),c=new e.rootState.MapModules.google.maps.LatLngBounds,u=0;u<l.length;u++)c.extend(l[u]);e.commit("SET_WISHLIST_PRODUCTS_ROOMTYPE_NUMBER",i),e.commit("SET_WISHLIST_PRODUCTS_BOUNDS",c),e.commit("SET_WISHLIST_PRODUCTS",r)}else e.commit("SET_WISHLIST_PRODUCTS",[]);case 11:case"end":return o.stop()}}),o)})))()}},mutations:{SET_WISHLIST:function(e,t){e.wishList=t},SET_WISHLIST_PRODUCTS:function(e,t){e.wishListProducts=t},SET_WISHLIST_PRODUCTS_BOUNDS:function(e,t){e.wishListProductsBounds=t},SET_WISHLIST_PRODUCTS_ROOMTYPE_NUMBER:function(e,t){e.wishListRoomTypeNumber=t}},getters:{wishListProductsGetter:function(e,t,o){return e.map}}},cs={namespaced:!0,state:{datePickBtnShow:!1,searchBarVisible:!1,asideVisible:!0,_windowWidth:0,_windowSize:{xs:{less:!1,inRange:!1,larger:!1},sm:{less:!1,inRange:!1,larger:!1},md:{less:!1,inRange:!1,larger:!1},lg:{less:!1,inRange:!1,larger:!1},mapPointMd:{larger:!1},mapPointLg:{larger:!1}},loginModalVisible:!1},actions:{},mutations:{SHOW_SEARCHBAR:function(e,t){e.searchBarVisible=t},SET_WINDOW_WIDTH:function(e,t){e._windowWidth=t,e._windowSize.xs.less=t<321,e._windowSize.xs.inRange=320<t&&t<421,e._windowSize.xs.larger=320<t,e._windowSize.sm.less=t<421,e._windowSize.sm.inRange=420<t&&t<481,e._windowSize.sm.larger=420<t,e._windowSize.md.less=t<481,e._windowSize.md.inRange=480<t&&t<769,e._windowSize.md.larger=480<t,e._windowSize.lg.less=t<1225,e._windowSize.lg.inRange=768<t&&t<1225,e._windowSize.lg.larger=768<t,e._windowSize.mapPointMd.larger=1080<t,e._windowSize.mapPointLg.larger=1080<t},SET_ASIDE_VISIBLE:function(e,t){e.asideVisible=t},SET_DATEPICKER_CLOSE_BUTTON:function(e,t){e.datePickBtnShow=t},SET_LOGIN_MODAL_VISIBLE:function(e,t){e.loginModalVisible=t}},getters:{}},us={namespaced:!0,state:{selectStay:null,selectRoom:null},actions:{addToCart:function(e){return console.log(e.state.selectStay),new Promise((function(t,o){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/cart"),i={product_id:e.state.selectStay.id,qty:1};r.a.post(a,{data:i}).then((function(e){e.data.success?t():o(e.data)}))}))},sendOrder:function(e,t){var o=t.reserveDate,a=t.roomQty;return new Promise((function(t,i){var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("william","/order"),n={user:{name:"",email:"",tel:"",address:""},message:{status:"tbd",roomInfo:{orderDate:o,propertyId:e.state.selectStay.id,roomQty:a,roomTypeId:e.state.selectRoom.id}}};r.a.post(s,{data:n}).then((function(e){e.data.success?t("Resolve:預訂成功"):i()}))}))},reserve:function(e,t){var o=t.reserveDate,a=t.roomQty;return new Promise((function(t,i){e.dispatch("addToCart").then((function(){e.dispatch("sendOrder",{reserveDate:o,roomQty:a}).then((function(){t()})).catch((function(){i()}))})).catch((function(e){console.log(e),i()}))}))}},mutations:{SET_SELECT_ROOM:function(e,t){e.selectRoom=t},SET_SELECT_PROPERTY:function(e,t){e.selectStay=t}},getters:{}},ds={namespaced:!0,state:{userAuth:!1},actions:{},mutations:{UPDATE_USER_AUTH:function(e,t){e.userAuth=t}}};i["default"].use(s["a"]);var ps=new s["a"].Store({strict:!0,state:{isLoading:!1,isLoadingQuery:0,mapRef:{},asideScroll:null,showPhotoViewer:!1,showPanoViewer:!1,mapPageMode:null,paginatedStaySource:null,currentPage:1},actions:{updateLoading:function(e,t){e.commit("LOADING",t)},saveMapRef:function(e,t){e.commit("SAVE_MAP_REF",t)},setViewer:function(e,t){e.commit("SET_PHOTO_VIEWER",t)}},mutations:{LOADING:function(e,t){e.isLoading=t},COUNT_LOADING:function(e,t){e.isLoadingQuery+=t},SAVE_MAP_REF:function(e,t){e.mapRef=t},UPDATE_ASIDE_SCROLL:function(e,t){e.asideScroll=t},SET_PHOTO_VIEWER:function(e,t){e[t.key]=t.value},CHANGE_MAP_PAGE_MODE:function(e,t){e.mapPageMode=t},CHANGE_PAGE:function(e,t){e.currentPage=t}},getters:{isLoading:function(e){return e.isLoadingQuery>0},staySource:function(e){var t=e.WishlistModules.wishListProducts||[],o=t.slice();return"search"==e.mapPageMode?e.SearchModules.filterSearchProducts||[]:"wishList"==e.mapPageMode&&o.reverse()||[]},paginatedStaySource:function(e,t){for(var o=10,a=t.staySource.length,i=a%o,s=0===i?parseInt(a/o):parseInt(a/o)+1,n=[],r=function(e){var a=e*o,i=(e-1)*o,s=t.staySource.filter((function(e,t){return i<=t&&t<a}));n.push(s)},l=1;l<=s;l++)r(l);return n}},modules:{ProductsModules:os,CartModules:as,AlertModules:is,OrdersModules:ss,MapModules:ns,SearchModules:rs,WishlistModules:ls,UIModules:cs,ReservationModules:us,AuthModules:ds}}),ms=(o("25f0"),o("2909")),hs={getUuid:function(){var e=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?o:3&o|8).toString(16)}))},generateUID:function(){var e=46656*Math.random()|0,t=46656*Math.random()|0;return e=("000"+e.toString(36)).slice(-3),t=("000"+t.toString(36)).slice(-3),e+t},quickSort:function(e){if(e.length<=1)return e;for(var t=[],o=[],a=[],i=Number(e[Math.floor(Math.random()*e.length)]),s=0;s<e.length;++s){var n=Number(e[s]);n<i?t.push(n):n>i?o.push(n):n==i&&a.push(n)}return a.splice(a[a.length-1],1),[].concat(Object(ms["a"])(hs.quickSort(t)),a,[i],Object(ms["a"])(hs.quickSort(o)))},quickSortObj:function(e,t){if(e.length<=1)return e;for(var o=[],a=[],i=[],s=e[Math.floor(Math.random()*e.length)],n=Number(s[t]),r=0;r<e.length;++r){var l=e[r],c=Number(l[t]);c<n?o.push(l):c>n?a.push(l):c==n&&l.id!=s.id&&i.push(l)}return[].concat(Object(ms["a"])(hs.quickSortObj(o,t)),i,[s],Object(ms["a"])(hs.quickSortObj(a,t)))}},fs={install:function(e){e.prototype.$custom=hs}};function gs(e){var t={};return document.cookie.split(";").forEach((function(e){var o=e.split("="),i=Object(a["a"])(o,2),s=i[0],n=i[1];t[s.trim()]=n})),t[e]}i["default"].config.productionTip=!1,i["default"].use(d.a),i["default"].use(s["a"]),i["default"].use(fs),i["default"].use(c.a,r.a),i["default"].component("ValidationProvider",R["b"]),i["default"].component("ValidationObserver",R["a"]),i["default"].component("Datetime",I["Datetime"]),i["default"].component("Loading",O.a),i["default"].component("PulseLoader",M["a"]),i["default"].filter("currency",Xi),i["default"].filter("date",es),i["default"].filter("simpleTime",ts),i["default"].config.productionTip=!1,r.a.defaults.withCredentials=!0,Object(R["d"])("zh_TW",E),Object(R["c"])("email",x["a"]),Object(R["c"])("required",x["d"]),Object(R["c"])("numeric",x["c"]),Object(R["c"])("min_value",x["b"]),new i["default"]({router:Zi,store:ps,i18n:L,render:function(e){return e(re)}}).$mount("#app"),Zi.beforeEach((function(e,t,o){if(e.meta.requiresAuth){ps.commit("COUNT_LOADING",1);var a=gs("hexToken"),i=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");a?r.a.defaults.headers.common.Authorization=i:ps.commit("AuthModules/UPDATE_USER_AUTH",!1);var s="".concat("https://vue-course-api.hexschool.io","/api/user/check");r.a.post(s).then((function(e){e.data.success&&o(),ps.commit("COUNT_LOADING",-1)}))}else o()}))},"56fe":function(e,t,o){},"5c0b":function(e,t,o){"use strict";var a=o("9c0c"),i=o.n(a);i.a},"5d54":function(e,t,o){},"5f27":function(e,t,o){"use strict";var a=o("378e"),i=o.n(a);i.a},6096:function(e,t,o){"use strict";var a=o("2c3d"),i=o.n(a);i.a},"63d9":function(e,t,o){},"676e":function(e,t,o){},"68c1":function(e,t,o){},"6cb4":function(e,t,o){e.exports=o.p+"static/img/join-the-world.b68e8231.jpg"},"6cfe":function(e,t,o){"use strict";var a=o("0578"),i=o.n(a);i.a},"6d09":function(e,t,o){"use strict";var a=o("b6cf"),i=o.n(a);i.a},"6fc5":function(e,t,o){},7028:function(e,t,o){"use strict";var a=o("d147"),i=o.n(a);i.a},"71ac":function(e,t){e.exports={functional:!0,render(e,t){const{_c:o,_v:a,data:i,children:s=[]}=t,{class:n,staticClass:r,style:l,staticStyle:c,attrs:u={},...d}=i;return o("svg",{class:[n,r],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1490.45 800"},u),...d},s.concat([o("g",{attrs:{id:"logo-word_svg__word"}},[o("path",{staticClass:"logo-word_svg__st0",attrs:{d:"M115 255.6c-1.9 16.5-2.8 33-2.8 49.6v12.5h16.9c19 0 27.8-.4 40.7-2.4v47.6c-13.3-2-21-2.4-39.5-2.4h-18.1v125c0 19.8 7.3 27 26.6 27 10.5 0 16.9-2 29.5-8.9l7.3 42.8c-17.3 6.5-29.5 8.5-50.4 8.5-46.4 0-64.9-16.5-64.9-58.9V360.5H44.9c-14.9 0-22.6.4-35.9 2.4v-47.6c11.7 2 19.4 2.4 36.3 2.4h14.9v-12.5c-.1-16.6-1-33.1-2.8-49.6H115zM338.5 523c-16.1 15.3-26.2 21-42.8 25.4-12.2 3.3-24.9 4.9-37.5 4.8-49.2 0-79.1-25.4-79.1-67.8 0-28.2 17.8-53.6 45.6-65.4 26.2-10.9 56.1-14.9 113.8-16.1v-20.5c0-23.4-15.7-35.5-46.4-35.5-16.1 0-32.7 4.4-42 11.7-7.7 5.6-11.3 11.3-16.1 25.8l-51.6-9.3c9.3-23.4 16.5-33.9 31.9-44.8 19.8-14.5 42.3-20.6 77-20.6 38.7 0 62.1 6.9 79.5 23.8 13.7 12.9 19 28.2 19 55.7v108.5c0 21.4.8 32.3 3.2 50.4h-54.4V523zm0-83.9c-77 1.6-107.3 14.9-107.3 46.4 0 19 14.1 30.7 36.7 30.7 21.4 0 42.3-8.1 56.1-21.4 9.7-9.7 14.5-21.4 14.5-35.5v-20.2zM575.7 368.5c-17-4.8-25.4-6.5-35.9-6.5-20.2 0-35.5 6.5-46.8 19.8-10.1 11.7-14.1 21-16.5 40.3v74.6c-.1 17.5.8 35 2.8 52.4h-57.7c2-17.4 2.9-34.9 2.8-52.4V370.1c0-24.6-.4-35.9-2.8-52.4h54.9v37.9c14.5-28.6 39.5-42.4 75.8-42.4 9.7 0 19.4 1.2 37.5 4.4l-14.1 50.9zM589.4 433.9c0-75 46.8-123 120.2-123 73 0 119.4 47.6 119.4 122.2s-47.2 123.8-119 123.8c-73.8 0-120.6-47.6-120.6-123zm52 0c0 49.6 25.8 80.3 67.8 80.3S777 484 777 434.7c0-52-24.6-81.9-67.4-81.9-42.4 0-68.2 30.7-68.2 81.1zM906.8 228.2c-2 15.3-2.8 29.5-2.8 52.8v132.7l60.5-60.1c18.6-17.8 25.4-25.8 31.9-35.9h75.4c-23 20.6-23 20.6-40.3 37.1l-57.3 54.5 68.2 93.2c27.4 37.5 27.4 37.5 36.7 46.8h-71.8c-4.8-12.9-9.7-21-26.6-45.6L937.1 440 904 471.4v26.2c0 26.2.4 35.9 2.8 51.6H850c2-16.5 2.8-30.2 2.8-52.4V281c0-24.2-.8-37.5-2.8-52.8h56.8zM1082.3 433.9c0-75 46.8-123 120.2-123 73 0 119.4 47.6 119.4 122.2s-47.2 123.8-119 123.8c-73.8 0-120.6-47.6-120.6-123zm52 0c0 49.6 25.8 80.3 67.8 80.3s67.8-30.3 67.8-79.5c0-52-24.6-81.9-67.4-81.9-42.4 0-68.2 30.7-68.2 81.1z",fill:"#00a69c"}})])]))}}},"73cb":function(e,t,o){"use strict";var a=o("3add"),i=o.n(a);i.a},7754:function(e,t,o){"use strict";var a=o("563d"),i=o.n(a);i.a},"7aec":function(e,t,o){"use strict";var a=o("56fe"),i=o.n(a);i.a},"7c96":function(e,t,o){},"806a":function(e,t,o){"use strict";var a=o("68c1"),i=o.n(a);i.a},"8a19":function(e,t,o){"use strict";var a=o("0c52"),i=o.n(a);i.a},"8bfa":function(e,t,o){"use strict";var a=o("cc96"),i=o.n(a);i.a},"906b":function(e,t,o){"use strict";var a=o("e2cc"),i=o.n(a);i.a},"949d":function(e,t,o){},9963:function(e,t,o){"use strict";var a=o("9b82"),i=o.n(a);i.a},"99f8":function(e,t,o){"use strict";var a=o("5d54"),i=o.n(a);i.a},"9b82":function(e,t,o){},"9c0c":function(e,t,o){},"9c21":function(e,t,o){},"9cba":function(e,t,o){"use strict";var a=o("eb76"),i=o.n(a);i.a},a244:function(e,t,o){"use strict";var a=o("b1aa"),i=o.n(a);i.a},a9fd:function(e,t,o){},af05:function(e,t,o){"use strict";var a=o("d532"),i=o.n(a);i.a},b007:function(e,t,o){"use strict";var a=o("502e"),i=o.n(a);i.a},b1aa:function(e,t,o){},b45e:function(e,t,o){"use strict";var a=o("b858"),i=o.n(a);i.a},b518:function(e,t,o){},b6cf:function(e,t,o){},b743:function(e,t,o){},b781:function(e,t,o){},b858:function(e,t,o){},b9e1:function(e,t,o){"use strict";var a=o("e5d1"),i=o.n(a);i.a},ba7d:function(e,t,o){"use strict";var a=o("949d"),i=o.n(a);i.a},ba97:function(e,t,o){e.exports=o.p+"static/img/user.baf6375e.png"},baf4:function(e,t,o){"use strict";var a=o("7c96"),i=o.n(a);i.a},bffc:function(e,t,o){},cbe3:function(e,t,o){"use strict";var a=o("6fc5"),i=o.n(a);i.a},cc92:function(e,t,o){},cc96:function(e,t,o){},cff6:function(e,t,o){e.exports=o.p+"static/img/article.f0d567b8.jpg"},d147:function(e,t,o){},d298:function(e,t,o){"use strict";var a=o("40a5"),i=o.n(a);i.a},d3e0:function(e,t,o){"use strict";var a=o("fa1e"),i=o.n(a);i.a},d4af:function(e,t,o){},d532:function(e,t,o){},d670:function(e,t,o){"use strict";var a=o("d4af"),i=o.n(a);i.a},d6bd:function(e,t,o){},db7c:function(e,t,o){"use strict";var a=o("2def"),i=o.n(a);i.a},db7f:function(e,t,o){},df36:function(e,t,o){"use strict";var a=o("676e"),i=o.n(a);i.a},df751:function(e,t,o){"use strict";var a=o("1acd"),i=o.n(a);i.a},e146:function(e,t,o){e.exports=o.p+"static/img/online-experience.251b8eda.jpg"},e242:function(e,t,o){},e2cc:function(e,t,o){},e5d1:function(e,t,o){},eb76:function(e,t,o){},ebf5:function(e,t,o){"use strict";var a=o("fa92"),i=o.n(a);i.a},ec4e:function(e,t){e.exports={functional:!0,render(e,t){const{_c:o,_v:a,data:i,children:s=[]}=t,{class:n,staticClass:r,style:l,staticStyle:c,attrs:u={},...d}=i;return o("svg",{class:[n,r],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 800 800"},u),...d},s.concat([o("path",{attrs:{d:"M23.71 371.48h484.56a42 42 0 0142 42V530a42 42 0 01-42 42H23.71a49.12 49.12 0 01-49.12-49.1V420.6a49.12 49.12 0 0149.12-49.12z",transform:"rotate(-90 262.42 471.75)",fill:"#00a69c",id:"logo_svg__line1"}}),o("path",{attrs:{d:"M712.51 575v148.72a13.91 13.91 0 007.16 12.17l27.67 15.36a4.44 4.44 0 01-2.15 8.33H543.45A31.49 31.49 0 01512 728.1V467.26a31.49 31.49 0 0131.48-31.48h29.89A139.17 139.17 0 01712.51 575z",fill:"#00a69c",id:"logo_svg__line2"}}),o("path",{attrs:{fill:"#066c62",d:"M162.15 191.15h200.54v114.1l-200.54 166.5v-280.6z",id:"logo_svg__shadow"}}),o("g",{attrs:{id:"logo_svg__top",fill:"#00a69c"}},[o("path",{attrs:{d:"M99.48 40.42H563.1a49.14 49.14 0 0149.14 49.14v102.26A49.14 49.14 0 01563.1 241H99.48a49.12 49.12 0 01-49.12-49.12V89.54a49.12 49.12 0 0149.12-49.12z"}}),o("path",{attrs:{d:"M712.51 179.59v108.34a13.92 13.92 0 01-8.71 12.9l-160.35 64.76A31.48 31.48 0 01512 334.11V71.9a31.49 31.49 0 0131.48-31.48h29.89a139.17 139.17 0 01139.14 139.17z"}})])]))}}},ee80:function(e,t,o){},f142:function(e,t,o){"use strict";var a=o("b781"),i=o.n(a);i.a},f2b0:function(e,t,o){"use strict";var a=o("4fcb"),i=o.n(a);i.a},f338:function(e,t,o){"use strict";var a=o("b743"),i=o.n(a);i.a},f4bc:function(e,t,o){"use strict";var a=o("e242"),i=o.n(a);i.a},f5f0:function(e,t,o){"use strict";var a=o("d6bd"),i=o.n(a);i.a},fa1e:function(e,t,o){},fa92:function(e,t,o){}});
//# sourceMappingURL=index.2fc9fe6a.js.map